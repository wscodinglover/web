(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{347:function(t,e,a){"use strict";a.r(e);var n=a(14),r=Object(n.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"lerna-备忘清单"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#lerna-备忘清单"}},[t._v("#")]),t._v(" Lerna 备忘清单")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://www.npmjs.com/package/lerna",target:"_blank",rel:"noopener noreferrer"}},[e("img",{attrs:{src:"https://img.shields.io/npm/v/lerna.svg?style=flat",alt:"NPM version"}}),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://www.npmjs.com/package/lerna",target:"_blank",rel:"noopener noreferrer"}},[e("img",{attrs:{src:"https://img.shields.io/npm/dm/lerna.svg?style=flat",alt:"Downloads"}}),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/nest/network/dependents",target:"_blank",rel:"noopener noreferrer"}},[e("img",{attrs:{src:"https://badgen.net/github/dependents-repo/lerna/lerna/nest",alt:"Repo Dependents"}}),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/nest",target:"_blank",rel:"noopener noreferrer"}},[e("img",{attrs:{src:"https://badgen.net/badge/icon/Github?icon=github&label",alt:"Github repo"}}),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("本备忘单旨在快速理解 "),e("a",{attrs:{href:"https://github.com/lerna/lerna",target:"_blank",rel:"noopener noreferrer"}},[t._v("Lerna v6"),e("OutboundLink")],1),t._v(" 所涉及的主要概念，显示了它的常用命令使用清单\n")]),t._v(" "),e("h2",{attrs:{id:"入门"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#入门"}},[t._v("#")]),t._v(" 入门")]),t._v(" "),e("h3",{attrs:{id:"介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[t._v("#")]),t._v(" 介绍")]),t._v(" "),e("p",[t._v("现代构建系统，用于管理和发布来自同一存储库的多个 JavaScript/TypeScript 包。")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ npx lerna@latest init\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("下面是示例目录结构")]),t._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("div",{staticClass:"highlight-lines"},[e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("div",{staticClass:"highlighted"},[t._v(" ")]),e("br"),e("br")]),e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("├── README.md\n├── remixapp   "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# web 应用 (remixapp)")]),t._v("\n│   ├── src\n│   └── package.json\n│\n├── packages\n│   ├── footer "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 组件(@remixapp/footer)")]),t._v("\n│   │   ├── src\n│   │   └── package.json\n│   │\n│   └── header "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 组件(@remixapp/header)")]),t._v("\n│       ├── src\n│       └── package.json\n│\n├── lerna.json\n└── package.json\n")])]),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br")])]),e("h3",{attrs:{id:"引导程序-bootstrap"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#引导程序-bootstrap"}},[t._v("#")]),t._v(" 引导程序 (Bootstrap)")]),t._v(" "),e("p",[t._v("它在 "),e("code",[t._v("package.json")]),t._v(" 中依赖于它们，如下所示：")]),t._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("div",{staticClass:"highlight-lines"},[e("br"),e("br"),e("div",{staticClass:"highlighted"},[t._v(" ")]),e("div",{staticClass:"highlighted"},[t._v(" ")]),e("br"),e("br")]),e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dependencies"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ....")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"@remixapp/header"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"@remixapp/footer"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br")])]),e("p",[e("code",[t._v("remixapp")]),t._v(" 应用程序导入"),e("code",[t._v("页眉")]),t._v("和"),e("code",[t._v("页脚")]),t._v("库，如下所示：")]),t._v(" "),e("div",{staticClass:"language-jsx line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-jsx"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Header "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"header"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Footer "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"footer"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Home")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Header")])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),e("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("Content!")]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Footer")])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),e("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n    ")]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br")])]),e("h3",{attrs:{id:"useworkspaces"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#useworkspaces"}},[t._v("#")]),t._v(" useWorkspaces")]),t._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("div",{staticClass:"highlight-lines"},[e("br"),e("br"),e("div",{staticClass:"highlighted"},[t._v(" ")]),e("br"),e("br"),e("br")]),e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"$schema"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node_modules/lerna/schemas/lerna-schema.json"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"useWorkspaces"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"version"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.0.0"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br")])]),t._v(" "),e("p",[t._v("在 "),e("code",[t._v("lerna.json")]),t._v(" 中配置 "),e("code",[t._v("useWorkspaces")]),t._v(" 告诉 "),e("code",[t._v("Lerna")]),t._v(" 将包链接过程委托给你的包管理器 (此功能由 npm、yarn 和 pnpm 支持)。")]),t._v(" "),e("h3",{attrs:{id:"任务运行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#任务运行"}},[t._v("#")]),t._v(" 任务运行")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("npx lerna run "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--scope")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("header "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 单个")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("多个任务运行")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("npx lerna run "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--scope")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("header,footer\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("忽略 "),e("code",[t._v("header")]),t._v(","),e("code",[t._v("footer")]),t._v(" 其它包中运行任务运行")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("npx lerna run build "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--ignore")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("header,footer\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h2",{attrs:{id:"命令索引"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#命令索引"}},[t._v("#")]),t._v(" 命令索引")]),t._v(" "),e("h3",{attrs:{id:"run-exec-运行命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#run-exec-运行命令"}},[t._v("#")]),t._v(" run/exec 运行命令")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在所有包含它的包中运行 npm run my-script")]),t._v("\n$ lerna run "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" -- "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("args"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n$ lerna run "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v("\n$ lerna run build\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 观看所有包并在更改时转换，流式前缀输出")]),t._v("\n$ lerna run "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--parallel")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("watch")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在所有包中运行命令")]),t._v("\n$ lerna "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" -- "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("command"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("args"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n$ lerna "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" -- "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-rf")]),t._v(" ./node_modules\n$ lerna "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" -- protractor conf.js\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br")])]),e("hr"),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v(":-")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v(":-")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--npm-client <client>")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/run#--npm-client-client",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("必须是知道如何运行 npm 生命周期脚本的可执行文件，默认值是 "),e("code",[t._v("npm")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--stream")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/run#--stream",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("立即从子进程流式输出，以原始包名称为前缀")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--parallel")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/run#--parallel",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("类似于 "),e("code",[t._v("--stream")]),t._v(" 但完全忽略并发和拓扑排序，立即在所有匹配的包中运行给定的命令或脚本，并带有前缀流输出")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--no-bail")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/run#--no-bail",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("默认情况下，如果任何脚本运行返回非零退出代码，"),e("code",[t._v("lerna run")]),t._v(" 将退出并出现错误。传递 "),e("code",[t._v("--no-bail")]),t._v(" 以禁用此行为")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--no-prefix")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/run#--no-prefix",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("当输出为流式传输（"),e("code",[t._v("--stream")]),t._v(" 或 "),e("code",[t._v("--parallel")]),t._v("）时禁用包名称前缀。当将结果传送到其他进程（例如编辑器插件）时，此选项很有用")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--profile")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/run#--profile",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("分析脚本执行并生成性能配置文件")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--profile-location <location>")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/run#--profile-location-location",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("您可以为性能配置文件输出提供自定义位置。提供的路径将相对于当前工作目录进行解析。")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("useNx=false")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/run#usenxfalse",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("通过将 "),e("code",[t._v("useNx")]),t._v(" 设置为 "),e("code",[t._v("false")]),t._v("，您可以使用 "),e("code",[t._v("lerna")]),t._v(" 中的遗留任务运行实现 ("),e("code",[t._v("p-map")]),t._v(" 和 "),e("code",[t._v("p-queue")]),t._v(")，而不是使用由 "),e("a",{attrs:{href:"https://nx.dev",target:"_blank",rel:"noopener noreferrer"}},[t._v("Nx"),e("OutboundLink")],1),t._v(" 提供支持的默认现代任务运行器实现。")])])])]),t._v(" "),e("h3",{attrs:{id:"publish-发布包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#publish-发布包"}},[t._v("#")]),t._v(" publish 发布包")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 发布自上次发布以来已更改的软件包")]),t._v("\n$ lerna publish              \n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显式发布在当前提交中标记的包")]),t._v("\n$ lerna publish from-git     \n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显式发布注册表中不存在最新版本的软件包")]),t._v("\n$ lerna publish from-package\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用下一个语义预发布版本，例如")]),t._v("\n$ lerna publish "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--canary")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1.0.0 => 1.0.1-alpha.0+${SHA}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 自上次提交以来更改的包")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 随后的金丝雀发布将产生1.0.1-alpha.1+${SHA}等")]),t._v("\n\n$ lerna publish "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--canary")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--preid")]),t._v(" beta\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1.0.0 => 1.0.1-beta.0+${SHA}")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 以下是等价的：")]),t._v("\n$ lerna publish "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--canary")]),t._v(" minor\n$ lerna publish "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--canary")]),t._v(" preminor\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1.0.0 => 1.1.0-alpha.0+${SHA}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br"),e("span",{staticClass:"line-number"},[t._v("18")]),e("br"),e("span",{staticClass:"line-number"},[t._v("19")]),e("br")])]),e("hr"),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v(":-")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v(":-")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--canary")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#--canary",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("使用此标志运行时，以更精细的方式（每次提交）发布包")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--contents <dir>")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#--contents-dir",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("要发布的子目录。 必须适用于所有包，并且必须包含 "),e("code",[t._v("package.json")]),t._v(" 文件")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--dist-tag <tag>")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#--dist-tag-tag",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("使用此标志运行时，将使用给定的 "),e("code",[t._v("npm dist-tag")]),t._v("（默认为 "),e("code",[t._v("latest")]),t._v("）发布到 "),e("code",[t._v("npm")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--git-head <sha>")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#--git-head-sha",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("打包 "),e("code",[t._v("tarball")]),t._v(" 时将显式 "),e("code",[t._v("SHA")]),t._v(" 设置为清单上的 "),e("code",[t._v("gitHead")]),t._v("，仅允许使用 "),e("code",[t._v("from-package")]),t._v(" 位置")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--graph-type <all\\|dependencies>")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#--graph-type-alldependencies",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("设置在构建包图时使用哪种依赖项。默认值是依赖项，即仅包含包的 "),e("code",[t._v("package.json")]),t._v(" 的依赖项部分中列出的包")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--ignore-scripts")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#--ignore-scripts",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("传递时，此标志将在 "),e("code",[t._v("lerna")]),t._v(" 发布期间禁用运行"),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#lifecycle-scripts",target:"_blank",rel:"noopener noreferrer"}},[t._v("生命周期脚本"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--ignore-prepublish")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#--ignore-prepublish",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("传递时，此标志将禁用在 "),e("code",[t._v("lerna")]),t._v(" 发布期间运行"),e("a",{attrs:{href:"https://docs.npmjs.com/cli/v8/using-npm/scripts#prepare-and-prepublish",target:"_blank",rel:"noopener noreferrer"}},[t._v("已弃用"),e("OutboundLink")],1),t._v("的"),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#lifecycle-scripts",target:"_blank",rel:"noopener noreferrer"}},[t._v("预发布脚本"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--legacy-auth")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#--legacy-auth",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("发布需要身份验证的包时，您正在使用仅使用旧版 "),e("code",[t._v("Base64")]),t._v(" "),e("code",[t._v("用户名:密码")]),t._v(" 的内部托管 NPM 注册表。这与 NPM 发布 "),e("code",[t._v("_auth")]),t._v(" 标志相同")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--no-git-reset")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#--no-git-reset",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("默认情况下，"),e("code",[t._v("lerna publish")]),t._v(" 确保对工作树的任何更改都已重置")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--no-granular-pathspec")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#--no-granular-pathspec",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("默认情况下，"),e("code",[t._v("lerna publish")]),t._v(" 将尝试（如果启用）"),e("code",[t._v("git checkout")]),t._v(" 仅在发布过程中临时修改的叶包清单")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--verify-access")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#--verify-access",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("从历史上看，"),e("code",[t._v("lerna")]),t._v(" 试图通过使用给定令牌执行一些抢占式 "),e("code",[t._v("npm API")]),t._v(" 请求来快速解决授权/身份验证问题")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--otp")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#--otp",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("发布需要双重身份验证的包时，您可以使用 "),e("code",[t._v("--otp")]),t._v(" 指定一次性密码")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--preid")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#--preid",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("与同名的 "),e("code",[t._v("lerna")]),t._v(" 版本选项不同，该选项只适用于 "),e("code",[t._v("--canary")]),t._v(" 版本计算")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--pre-dist-tag <tag>")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#--pre-dist-tag-tag",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("与 "),e("code",[t._v("--dist-tag")]),t._v(" 的工作方式相同，但仅适用于使用预发布版本发布的软件包")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--registry <url>")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#--registry-url",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("使用此标志运行时，转发的 "),e("code",[t._v("npm")]),t._v(" 命令将为您的包使用指定的注册表")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--tag-version-prefix")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#--tag-version-prefix",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("此选项允许提供自定义前缀而不是默认前缀："),e("code",[t._v("v")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--temp-tag")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#--temp-tag",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("传递时，此标志将更改默认发布过程，首先将所有更改的包发布到临时 "),e("code",[t._v("dist-tag(lerna-temp)")]),t._v("，然后将新版本移动到 "),e("code",[t._v("--dist-tag")]),t._v(" 配置的 "),e("code",[t._v("dist-tag")]),t._v(" (默认"),e("code",[t._v("latest")]),t._v(")")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--yes")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#--yes",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("使用此标志运行时，"),e("code",[t._v("lerna publish")]),t._v(" 将跳过所有确认提示")])])])]),t._v(" "),e("h4",{attrs:{id:"不推荐使用的选项"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#不推荐使用的选项"}},[t._v("#")]),t._v(" 不推荐使用的选项")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v(":-")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v(":-")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--no-verify-access")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#--no-verify-access",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("旧的抢先访问验证现在默认关闭，因此不需要 "),e("code",[t._v("--no-verify-access")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--skip-npm")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#--skip-npm",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("直接调用 "),e("a",{attrs:{href:"#version-%E4%BF%AE%E6%94%B9%E7%89%88%E6%9C%AC%E5%8F%B7"}},[t._v("lerna version")])])])])]),t._v(" "),e("h4",{attrs:{id:"每个包中的配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#每个包中的配置"}},[t._v("#")]),t._v(" 每个包中的配置")]),t._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"publishConfig"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"access"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"public"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"registry"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://my-registry.com"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"tag"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"flippin-sweet"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"directory"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dist"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br")])]),e("hr"),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v(":-")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v(":-")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("access")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#publishconfigaccess",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("要发布具有范围的包(例如，"),e("code",[t._v("@mycompany/rocks")]),t._v(")")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("registry")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#publishconfigregistry",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("通过设置注册表来自定义每个包的注册表")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("tag")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#publishconfigtag",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("您可以通过设置标签来自定义每个包的 "),e("code",[t._v("dist-tag")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("directory")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#publishconfigtag",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("这个 "),e("em",[t._v("非标准")]),t._v(" 字段允许您像 "),e("code",[t._v("--contents")]),t._v(" 一样自定义发布的子目录，但基于每个包")])])])]),t._v(" "),e("h3",{attrs:{id:"version-修改版本号"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#version-修改版本号"}},[t._v("#")]),t._v(" version 修改版本号")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ lerna version "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(".1 "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 明确的")]),t._v("\n$ lerna version patch "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# semver 关键字")]),t._v("\n$ lerna version       "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 从提示中选择")]),t._v("\n\n$ lerna version "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("major "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" minor "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用下一个语义版本值")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 这会跳过“为...选择新版本”提示")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 强制所有包版本化")]),t._v("\n$ lerna version --force-publish\n$ lerna version "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-m")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"chore(doc): publish %s"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# 提交消息 = "chore(doc): publish v1.0.0"')]),t._v("\n$ lerna version "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-m")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"chore(doc): publish %v"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# 提交消息 = "chore(doc): publish 1.0.0"')]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br")])]),e("hr"),t._v(" "),e("ul",[e("li",[e("code",[t._v("major")]),t._v(" 重大的")]),t._v(" "),e("li",[e("code",[t._v("minor")]),t._v(" 次要的")]),t._v(" "),e("li",[e("code",[t._v("patch")]),t._v(" 修补")]),t._v(" "),e("li",[e("code",[t._v("premajor")]),t._v(" 主要的")]),t._v(" "),e("li",[e("code",[t._v("preminor")]),t._v(" 初级")]),t._v(" "),e("li",[e("code",[t._v("prepatch")]),t._v(" 预补丁")]),t._v(" "),e("li",[e("code",[t._v("prerelease")]),t._v(" 预发行\n")])]),t._v(" "),e("hr"),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v(":-")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v(":-")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--allow-branch <glob>")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#--allow-branch-glob",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("与启用 "),e("code",[t._v("lerna version")]),t._v(" 的 "),e("code",[t._v("git")]),t._v(" 分支匹配的 "),e("code",[t._v("glob")]),t._v(" 白名单")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--amend")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#--amend",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("使用此标志运行时，"),e("code",[t._v("lerna version")]),t._v(" 将在当前提交上执行所有更改，而不是添加新的")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--changelog-preset")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#--changelog-preset",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("默认情况下，更改日志预设设置为 "),e("a",{attrs:{href:"https://github.com/conventional-changelog/conventional-changelog/tree/master/packages/conventional-changelog-angular#angular-convention",target:"_blank",rel:"noopener noreferrer"}},[t._v("angular"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--conventional-commits")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#--conventional-commits",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("使用常规提交规范来确定"),e("a",{attrs:{href:"https://github.com/conventional-changelog/conventional-changelog/tree/master/packages/conventional-recommended-bump",target:"_blank",rel:"noopener noreferrer"}},[t._v("版本 bump"),e("OutboundLink")],1),t._v(" 并生成 CHANGELOG.md 文件")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--conventional-graduate")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#--conventional-graduate",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("将使用 "),e("code",[t._v("*")]),t._v(" 对指定的包(逗号分隔)或所有包进行分级")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--conventional-prerelease")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#--conventional-prerelease",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("预发布版本发布指定的包")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--create-release <type>")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#--create-release-type",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("根据更改的包创建正式的 "),e("code",[t._v("GitHub")]),t._v(" 或 "),e("code",[t._v("GitLab")]),t._v(" 版本")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--exact")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#--exact",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("在更新的包中精确指定更新的依赖项（没有标点符号），而不是与 "),e("RouterLink",{attrs:{to:"/nodejs/semver.html"}},[t._v("semver")]),t._v(" 兼容（使用"),e("code",[t._v("^")]),t._v("）")],1)]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--force-publish")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#--force-publish",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("强制发布指定的包")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--git-remote <name>")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#--git-remote-name",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("把 "),e("code",[t._v("git")]),t._v(" 更改推送到指定的远程位置，而不是"),e("code",[t._v("origin")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--ignore-changes")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#--ignore-changes",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("检测更改的包时忽略与 "),e("code",[t._v("glob")]),t._v(" 匹配的文件中的更改")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--ignore-scripts")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#--ignore-scripts",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("禁用在 "),e("code",[t._v("lerna version")]),t._v(" 期间运行的生命周期脚本")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--include-merged-tags")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#--include-merged-tags",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("在检测到更改的包时包括来自合并分支的标签")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--message <msg>")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#--message-msg",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("此选项别名为 "),e("code",[t._v("-m")]),t._v(" 以与 "),e("code",[t._v("git commit")]),t._v(" 进行奇偶校验")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--no-changelog")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#--no-changelog",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("使用常规提交时，不要生成任何 CHANGELOG.md 文件")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--no-commit-hooks")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#--no-commit-hooks",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("允许 "),e("code",[t._v("git commit hooks")]),t._v(" 在提交版本更改时运行。通过 "),e("code",[t._v("--no-commit-hooks")]),t._v(" 禁用此行为")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--no-git-tag-version")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#--no-git-tag-version",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("将提交对 "),e("code",[t._v("package.json")]),t._v(" 文件的更改并标记发布。通过 "),e("code",[t._v("--no-git-tag-version")]),t._v(" 禁用该行为")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--no-granular-pathspec")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#--no-granular-pathspec",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("仅添加在版本控制过程中更改的叶包清单(可能还有变更日志)。这产生了 "),e("code",[t._v("git add --packages/*/package.json")]),t._v(" 的等价物，但针对更改的内容量身定制")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--no-private")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#--no-private",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("在选择版本、提交和标记版本时包含私有包。通过 "),e("code",[t._v("--no-private")]),t._v(" 禁用此行为")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--no-push")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#--no-push",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("将已提交和标记的更改推送到配置的 "),e("code",[t._v("git remote")]),t._v("。通过 "),e("code",[t._v("--no-push")]),t._v(" 禁用此行为")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--preid")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#--preid",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("使用此标志运行时，lerna 版本将使用指定的"),e("a",{attrs:{href:"https://semver.org/#spec-item-9",target:"_blank",rel:"noopener noreferrer"}},[t._v("预发布标识符"),e("OutboundLink")],1),t._v("增加 "),e("code",[t._v("premajor")]),t._v("、"),e("code",[t._v("preminor")]),t._v("、"),e("code",[t._v("prepatch")]),t._v(" 或 "),e("code",[t._v("prerelease")]),t._v(" "),e("RouterLink",{attrs:{to:"/nodejs/semver.html"}},[t._v("semver")]),t._v(" bumps")],1)]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--sign-git-commit")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#--sign-git-commit",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("此选项类似于同名的 npm 版本选项")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--sign-git-tag")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#--sign-git-tag",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("此选项类似于同名的 "),e("code",[t._v("npm")]),t._v(" 版本选项")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--force-git-tag")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#--force-git-tag",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("此选项替换任何现有标记而不是失败")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--tag-version-prefix")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#--tag-version-prefix",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("此选项允许提供自定义前缀而不是默认前缀："),e("code",[t._v("v")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--yes")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#--yes",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("使用此标志运行时，"),e("code",[t._v("lerna")]),t._v(" 版本将跳过所有确认提示")])])])]),t._v(" "),e("h4",{attrs:{id:"不推荐使用的选项-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#不推荐使用的选项-2"}},[t._v("#")]),t._v(" 不推荐使用的选项")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v(":-")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v(":-")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--cd-version")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#--cd-version",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("将 "),e("code",[t._v("semver")]),t._v(" 关键字传递给 "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#semver-bump",target:"_blank",rel:"noopener noreferrer"}},[t._v("bump"),e("OutboundLink")],1),t._v(" 位置")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--repo-version")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#--repo-version",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("将明确的版本号传递给 "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#semver-bump",target:"_blank",rel:"noopener noreferrer"}},[t._v("bump"),e("OutboundLink")],1),t._v(" 位置")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--skip-git")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/version#--skip-git",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("请改用 "),e("code",[t._v("--no-git-tag-version")]),t._v(" 和 "),e("code",[t._v("--no-push")])])])])]),t._v(" "),e("h3",{attrs:{id:"bootstrap"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#bootstrap"}},[t._v("#")]),t._v(" bootstrap")]),t._v(" "),e("p",[t._v("将本地包"),e("code",[t._v("链接")]),t._v("在一起，并"),e("code",[t._v("安装")]),t._v("其余的包依赖项")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ lerna bootstrap -- "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--production")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n                     --no-optional\n$ lerna bootstrap "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--hoist")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])]),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v(":-")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v(":-")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--hoist [glob]")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/bootstrap#--strict",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("在 "),e("code",[t._v("repo")]),t._v(" 根目录安装与 "),e("code",[t._v("glob")]),t._v(" 匹配的外部依赖项，以便它们可用于所有包")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--strict")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/bootstrap#--nohoist-glob",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("与提升 "),e("em",[t._v("(hoist)")]),t._v(" 一起使用时，会在发出版本警告后抛出错误并停止引导")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--nohoist [glob]")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/bootstrap#--nohoist-glob",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("不要在 "),e("code",[t._v("repo")]),t._v(" 根目录安装与 "),e("code",[t._v("glob")]),t._v(" 匹配的外部依赖项。这可用于选择不提升某些依赖项")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--ignore")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/bootstrap#--ignore",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("当与 "),e("code",[t._v("bootstrap")]),t._v(" 命令一起使用时，还可以在 "),e("code",[t._v("lerna")]),t._v(" 中设置 "),e("code",[t._v("--ignore")]),t._v(" 标志")])])])]),t._v(" "),e("h4",{attrs:{id:"选项"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#选项"}},[t._v("#")]),t._v(" 选项")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v(":-")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v(":-")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--ignore-prepublish")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/bootstrap#--ignore-prepublish",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("跳过默认在引导程序包中运行的预发布生命周期脚本")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--ignore-scripts")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/bootstrap#--ignore-scripts",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("跳过通常在引导程序包中运行（准备等）的任何生命周期脚本")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--registry <url>")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/bootstrap#--registry-url",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("指定 npm 包的仓库地址")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--npm-client <client>")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/bootstrap#--npm-client-client",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("必须是知道如何安装 "),e("code",[t._v("npm")]),t._v(" 包依赖项的可执行文件")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--use-workspaces")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/bootstrap#--use-workspaces",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("启用与 "),e("code",[t._v("Yarn Workspaces")]),t._v(" 的集成(从 "),e("code",[t._v("yarn@0.27+")]),t._v(" 开始可用)")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--no-ci")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/bootstrap#--no-ci",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("在 "),e("code",[t._v("CI")]),t._v(" 环境中调用 "),e("code",[t._v("npm ci")]),t._v(" 而不是 "),e("code",[t._v("npm install")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--force-local")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/bootstrap#--force-local",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("此标志会导致引导命令始终对本地依赖项进行符号链接，而不管匹配的版本范围如何")])])])]),t._v(" "),e("h3",{attrs:{id:"info-本地环境信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#info-本地环境信息"}},[t._v("#")]),t._v(" info 本地环境信息")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ lerna info\n\nlerna notice cli v6.0.0\n Environment info:\n\n  System"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("系统"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(":\n    OS: macOS "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("12.2")]),t._v("\n    CPU: "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" x64 Apple M1\n  Binaries"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("二进制文件"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(":\n    Node: "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("16.17")]),t._v(".0 - /usr/local/bin/node\n    Yarn: "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.22")]),t._v(".10 - /usr/local/bin/yarn\n    npm: "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("8.5")]),t._v(".0 - /usr/local/bin/npm\n  Utilities"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("实用程序"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(":\n    Git: "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.33")]),t._v(".0 - /opt/homebrew/bin/git\n  npmPackages:\n    lerna: ^6.0.0 "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("6.0")]),t._v(".0\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br")])]),e("h3",{attrs:{id:"过滤选项"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#过滤选项"}},[t._v("#")]),t._v(" 过滤选项")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ lerna "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--scope")]),t._v(" my-component -- "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-la")]),t._v("\n$ lerna run "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--scope")]),t._v(" toolbar-* "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v("\n$ lerna run "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--scope")]),t._v(" package-1 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--scope")]),t._v(" *-2 lint\n\n$ lerna "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--ignore")]),t._v(" package-"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1,2")]),t._v(",5"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  -- "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-la")]),t._v("\n$ lerna run "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--ignore")]),t._v(" package-1  "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v("\n$ lerna run "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--ignore")]),t._v(" package-@"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--ignore")]),t._v(" package-3 lint\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 列出自最新标签以来已更改的包的内容")]),t._v("\n$ lerna "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--since")]),t._v(" -- "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-la")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 对自 main 以来发生更改的所有包运行测试")]),t._v("\n$ lerna run "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--since")]),t._v(" main\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 列出自 some-branch 以来发生变化的所有包")]),t._v("\n$ lerna "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--since")]),t._v(" some-branch\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# my-component 及其所有依赖项将被引导")]),t._v("\n$ lerna bootstrap "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--scope")]),t._v(" my-component --include-dependencies\n\n$ lerna bootstrap "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--scope")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"package-*"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--ignore")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"package-util-*"')]),t._v(" --include-dependencies\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 所有匹配 “package-util-*” 的包都将被忽略，除非它们是")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 依赖于名称与 “package-*” 匹配的包")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br"),e("span",{staticClass:"line-number"},[t._v("18")]),e("br"),e("span",{staticClass:"line-number"},[t._v("19")]),e("br"),e("span",{staticClass:"line-number"},[t._v("20")]),e("br"),e("span",{staticClass:"line-number"},[t._v("21")]),e("br")])]),e("h4",{attrs:{id:"选项-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#选项-2"}},[t._v("#")]),t._v(" 选项")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v(":-")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v(":-")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--scope <glob>")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/core/filter-options#--scope-glob",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("仅包括名称与给定 "),e("code",[t._v("glob")]),t._v(" 匹配的包")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--ignore <glob>")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/core/filter-options#--ignore-glob",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("排除名称与给定 "),e("code",[t._v("glob")]),t._v(" 匹配的包")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--no-private")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/core/filter-options#--no-private",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("排除私有包")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--since [ref]")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/core/filter-options#--since-ref",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("仅包括自指定 "),e("code",[t._v("ref")]),t._v(" 以来已更改的包")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--exclude-dependents")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/core/filter-options#--exclude-dependents",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("使用 "),e("code",[t._v("--since")]),t._v(" 运行命令时排除所有传递依赖项，覆盖默认的“changed”算法")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--include-dependents")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/core/filter-options#--include-dependents",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("无论 "),e("code",[t._v("--scope")]),t._v("、"),e("code",[t._v("--ignore")]),t._v(" 或 "),e("code",[t._v("--since")]),t._v(" 是什么，在运行命令时都包括所有传递依赖项")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--include-dependencies")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/core/filter-options#--include-dependencies",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("无论 "),e("code",[t._v("--scope")]),t._v("、"),e("code",[t._v("--ignore")]),t._v(" 或 "),e("code",[t._v("--since")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/core/filter-options#--since-ref",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1),t._v(" 是什么，在运行命令时都包括所有传递依赖项")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--include-merged-tags")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/core/filter-options#--include-merged-tags",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("使用 "),e("code",[t._v("--since")]),t._v(" 运行命令时包括来自合并分支的标签")])])])]),t._v(" "),e("h3",{attrs:{id:"list"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#list"}},[t._v("#")]),t._v(" list")]),t._v(" "),e("p",[t._v("列出本地程序包，也尊重所有可用的"),e("a",{attrs:{href:"#%E8%BF%87%E6%BB%A4%E9%80%89%E9%A1%B9"}},[t._v("过滤选项")])]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 与 lerna list 相同，它本身类似于 ls 命令")]),t._v("\nlerna "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 相当于 lerna ls -l，显示长输出")]),t._v("\nlerna ll\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 相当于 lerna ls -la，显示所有包(包括私有包）")]),t._v("\nlerna la\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br")])]),e("h4",{attrs:{id:"选项-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#选项-3"}},[t._v("#")]),t._v(" 选项")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v(":-")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v(":-")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--json")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("显示为 JSON "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#--json",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--ndjson")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("换行符分隔 "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#--ndjson",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("-a,--all")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("所有包 "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#--all",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("-l,--long")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("显示扩展信息 "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#--long",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("-p,--parseable")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("显示可解析的输出 "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#--parseable",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--toposort")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("按拓扑排序 "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#--toposort",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--graph")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("JSON 格式邻接依赖关系图 "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publish#--graph",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)])])])]),t._v(" "),e("h3",{attrs:{id:"changed"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#changed"}},[t._v("#")]),t._v(" changed")]),t._v(" "),e("p",[t._v("列出自上次标记版本以来已更改的本地软件包")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("lerna changed")]),t._v(" 支持 "),e("code",[t._v("lerna ls")]),t._v(" 支持的所有"),e("a",{attrs:{href:"#%E9%80%89%E9%A1%B9-1"}},[t._v("选项")])]),t._v(" "),e("li",[t._v("与 "),e("code",[t._v("lerna ls")]),t._v(" 不同的是不支持过滤器选项\n")])]),t._v(" "),e("p",[e("code",[t._v("lerna changed")]),t._v(" 支持 "),e("code",[t._v("lerna version")]),t._v(" 的以下选项")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v(":-")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v(":-")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--conventional-graduate")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publishhttps://github.com/lerna/lerna/tree/main/commands/version#--conventional-graduate",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--force-publish")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publishhttps://github.com/lerna/lerna/tree/main/commands/version#--force-publish",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--ignore-changes")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publishhttps://github.com/lerna/lerna/tree/main/commands/version#--ignore-changes",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--include-merged-tags")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/publishhttps://github.com/lerna/lerna/tree/main/commands/version#--include-merged-tags",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)])])])]),t._v(" "),e("h3",{attrs:{id:"init"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#init"}},[t._v("#")]),t._v(" init")]),t._v(" "),e("p",[t._v("创建新的 Lerna 仓库或将现有仓库升级到当前版本 Lerna")]),t._v(" "),e("ul",[e("li",[t._v("如果 "),e("code",[t._v("lerna")]),t._v(" 不存在，请将其添加到 "),e("code",[t._v("package.json")]),t._v(" 中的 "),e("code",[t._v("devDependency")])]),t._v(" "),e("li",[t._v("创建一个 "),e("code",[t._v("lerna.json")]),t._v(" 配置文件来存储版本号")]),t._v(" "),e("li",[t._v("如果不存在 "),e("code",[t._v(".gitignore")]),t._v("，则生成一个忽略文件\n")])]),t._v(" "),e("hr"),t._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("$ lerna init "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--independent")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("hr"),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v(":-")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v(":-")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--independent")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/init#--independent",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("使用独立版本控制模式 "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/init#--independent",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--exact")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/init#--exact",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("添加或更新 "),e("code",[t._v("lerna")]),t._v(" 的本地版本时将使用插入符范围 "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/init#--exact",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)])])])]),t._v(" "),e("p",[t._v("它将配置 "),e("code",[t._v("lerna.json")]),t._v(" 以强制所有后续执行完全匹配")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"command"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"init"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"exact"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"version"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.0.0"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br")])]),e("h3",{attrs:{id:"import"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#import"}},[t._v("#")]),t._v(" import")]),t._v(" "),e("p",[t._v("将一个包导入到带有提交历史的 "),e("code",[t._v("monorepo")])]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 开始使用 Lerna")]),t._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" init lerna-repo "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" lerna-repo\n$ npx lerna init\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加提交")]),t._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果没有提交，导入命令将失败")]),t._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-m")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Initial lerna commit"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 导入其他存储库")]),t._v("\n$ npx lerna "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("外部存储库的路径"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n$ npx lerna "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("import")]),t._v(" ~/Product "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--flatten")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br")])]),e("p",[t._v("选项")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v(":-")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v(":-")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--flatten")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/import#--flatten",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("当导入具有冲突的合并提交的存储库时，导入命令将无法尝试应用所有提交")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--dest")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/import#--dest",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("导入仓库时，可以通过 "),e("code",[t._v("lerna.json")]),t._v(" 中列出的目录来指定目标目录")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--preserve-commit")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/import#--preserve-commit",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("每个 git 提交都有一个作者和一个提交者")])])])]),t._v(" "),e("h3",{attrs:{id:"add"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#add"}},[t._v("#")]),t._v(" add")]),t._v(" "),e("p",[t._v("将依赖项添加到匹配的包")]),t._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("$ lerna "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("package"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("@version"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("--dev"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("--exact"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("--peer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])]),e("p",[t._v("选项")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v(":-")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v(":-")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--dev")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/add#--dev",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("将新包添加到 "),e("code",[t._v("devDependencies")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--exact")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/add#--exact",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("添加具有精确版本（例如 "),e("code",[t._v("1.0.1")]),t._v("）而不是默认 "),e("code",[t._v("^")]),t._v(" semver 范围（例如 "),e("code",[t._v("^1.0.1")]),t._v("）的新包")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--peer")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/add#--peer",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("将新包添加到 "),e("code",[t._v("peerDependencies")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--registry <url>")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/add#--registry-url",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("使用自定义注册表安装目标包")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("--no-bootstrap")]),t._v(" "),e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/add#--no-bootstrap",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("跳过链式 "),e("code",[t._v("lerna bootstrap")])])])])]),t._v(" "),e("p",[t._v("实例")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将 mod-1 包添加到“prefix-”前缀文件夹中的包中")]),t._v("\n$ lerna "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" mod-1 packages/prefix-*\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将 mod-1 安装到mod-2")]),t._v("\n$ lerna "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" mod-1 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--scope")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("mod-2\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在 devDependencies 中安装 mod-1 到 mod-2")]),t._v("\n$ lerna "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" mod-1 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--scope")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("mod-2 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--dev")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在 peerDependencies 中安装 mod-1 到 mod-2")]),t._v("\n$ lerna "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" mod-1 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--scope")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("mod-2 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--peer")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在除 mod-1 之外的所有模块中安装 mod-1")]),t._v("\n$ lerna "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" mod-1\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在所有模块中安装 babel-core")]),t._v("\n$ lerna "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" babel-core\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br")])]),e("h3",{attrs:{id:"diff"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#diff"}},[t._v("#")]),t._v(" diff")]),t._v(" "),e("p",[t._v("比较自上次发布以来的所有包或单个包")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ lerna "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("diff")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("package"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n$ lerna "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("diff")]),t._v("\n$ lerna "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("diff")]),t._v(" package-name "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 区分一个特定的包")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])]),e("p",[t._v("类似于 "),e("code",[t._v("lerna changed")]),t._v("，此命令运行 "),e("code",[t._v("git diff")])]),t._v(" "),e("h3",{attrs:{id:"clean"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#clean"}},[t._v("#")]),t._v(" clean")]),t._v(" "),e("p",[t._v("从所有包中删除 "),e("code",[t._v("node_modules")]),t._v(" 目录")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ lerna clean\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("接受所有"),e("a",{attrs:{href:"#%E8%BF%87%E6%BB%A4%E9%80%89%E9%A1%B9"}},[t._v("过滤选项")]),t._v("。"),e("code",[t._v("lerna clean")]),t._v(" 不会从根 "),e("code",[t._v("node_modules")]),t._v(" 目录中删除模块，即使您启用了 "),e("code",[t._v("--hoist")]),t._v(" 选项")]),t._v(" "),e("h3",{attrs:{id:"add-caching"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#add-caching"}},[t._v("#")]),t._v(" add-caching")]),t._v(" "),e("p",[t._v("运行设置基本缓存选项的向导")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ lerna add-caching\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h3",{attrs:{id:"link"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#link"}},[t._v("#")]),t._v(" link")]),t._v(" "),e("p",[t._v("将所有相互依赖的包符号链接在一起")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ lerna "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("link")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/commands/link#--force-local",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("--force-local")]),e("OutboundLink")],1),t._v(" 设置会导致链接命令始终对本地依赖项进行符号链接")]),t._v(" "),e("h3",{attrs:{id:"repair"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#repair"}},[t._v("#")]),t._v(" repair")]),t._v(" "),e("p",[t._v("更新配置文件以匹配当前安装的 lerna 版本")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i lerna@latest\n$ lerna repair\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])]),e("p",[e("a",{attrs:{href:"https://github.com/lerna/lerna/tree/main/core/lerna/commands/repair#usage",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("lerna repair")]),e("OutboundLink")],1),t._v(" 在升级后最有用，可确保应用新版本 lerna 的任何配置文件更改")])])}),[],!1,null,null,null);e.default=r.exports}}]);