(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{303:function(t,a,s){"use strict";s.r(a);var e=s(14),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"make-备忘清单"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#make-备忘清单"}},[t._v("#")]),t._v(" make 备忘清单")]),t._v(" "),a("p",[t._v("包含 最重要概念、函数、方法等的 make 备忘单。 初学者的完整快速参考。")]),t._v(" "),a("h2",{attrs:{id:"makefile-入门"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#makefile-入门"}},[t._v("#")]),t._v(" Makefile 入门")]),t._v(" "),a("h3",{attrs:{id:"示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[t._v("#")]),t._v(" 示例")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("a.txt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" b.txt c.txt\n\tcat b.txt c.txt > a.txt\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h4",{attrs:{id:"工作流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#工作流程"}},[t._v("#")]),t._v(" 工作流程")]),t._v(" "),a("ul",[a("li",[t._v("读入所有的 "),a("code",[t._v("Makefile")]),t._v("。")]),t._v(" "),a("li",[t._v("读入被 "),a("code",[t._v("include")]),t._v(" 的其它 "),a("code",[t._v("Makefile")]),t._v("。")]),t._v(" "),a("li",[t._v("初始化文件中的变量。")]),t._v(" "),a("li",[t._v("推导隐晦规则，并分析所有规则。")]),t._v(" "),a("li",[t._v("为所有的目标文件创建依赖关系链。")]),t._v(" "),a("li",[t._v("根据依赖关系，决定哪些目标要重新生成。")]),t._v(" "),a("li",[t._v("执行生成命令。")])]),t._v(" "),a("h3",{attrs:{id:"文件命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文件命令"}},[t._v("#")]),t._v(" 文件命令")]),t._v(" "),a("p",[t._v("make命令会以 "),a("code",[t._v("GNUmakefile")]),t._v("（不推荐使用）、"),a("code",[t._v("makefile")]),t._v("、"),a("code",[t._v("Makefile")]),t._v("（推荐使用）的顺序查找当前目录下的文件。")]),t._v(" "),a("h4",{attrs:{id:"自定义文件路径"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义文件路径"}},[t._v("#")]),t._v(" 自定义文件路径")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" target "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" FILE\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("我们可以使用 "),a("code",[t._v("-f FILE")]),t._v(" 来指定makefile文件的路径")]),t._v(" "),a("h4",{attrs:{id:"隐式生成"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#隐式生成"}},[t._v("#")]),t._v(" 隐式生成")]),t._v(" "),a("p",[t._v("如果文件夹中没有 makefile 文件，只有 main.c 源文件，那么我们可以使用 "),a("code",[t._v("make main.o")]),t._v(" 隐式生成链接文件")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" main.o\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 实际执行： cc    -c -o main.o main.c")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h3",{attrs:{id:"规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#规则"}},[t._v("#")]),t._v(" 规则")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("TARGET")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" PREREQUISITES\n  COMMAMD\n...\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("ul",[a("li",[a("code",[t._v("target")]),t._v(": 规则的目标。目标可以是规则的动作（如 "),a("code",[t._v("clean")]),t._v(" 等），也可以是目标文件或者最后的可执行文件。")]),t._v(" "),a("li",[a("code",[t._v("prerequisites")]),t._v(": 规则的依赖。生成规则目标文件所需要的文件名列表（通常一个目标依赖于一个或者多个文件）。")]),t._v(" "),a("li",[a("code",[t._v("command")]),t._v(": 规则的命令行。规则要执行的动作（任意的 shell 命令或者在 shell 下执行的程序）。"),a("span",{staticStyle:{color:"red"}},[t._v("命令需要以 tab 键开头")])])]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("TARGET "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("hr"),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 没有参数首先运行 TARGET")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("help")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示可用目标")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" dist   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 从当前目录制作一个发布存档")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" check  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 无需安装的单元测试")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("h3",{attrs:{id:"清空目标文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#清空目标文件"}},[t._v("#")]),t._v(" 清空目标文件")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin-target builtin"}},[t._v(".PHONY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" clean\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("clean")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  rm *.o temp\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[a("code",[t._v(".PHONY")]),t._v(" 内置命令将排除 clean 文件，不会因为当前目录中因为有 clean 文件而不会不执行 clean 伪目标")]),t._v(" "),a("p",[a("span",{staticStyle:{color:"red"}},[t._v("clean 从来都是放在文件的最后")])]),t._v(" "),a("h3",{attrs:{id:"注释"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注释"}},[t._v("#")]),t._v(" 注释")]),t._v(" "),a("p",[t._v("makefile 文件的注释与 bash 脚本一致")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 这是一个注释")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("main.o")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" main.c\n\tcc -c main.c\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("h3",{attrs:{id:"换行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#换行"}},[t._v("#")]),t._v(" 换行 "),a("code",[t._v("\\")])]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 这是一个注释")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("main.o")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" main.c\n\tcc -c \\\n\tmain.c\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("h3",{attrs:{id:"引用其它的-makefile"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#引用其它的-makefile"}},[t._v("#")]),t._v(" 引用其它的 Makefile")]),t._v(" "),a("p",[a("code",[t._v("include")]),t._v(" 关键字可以把别的 Makefile 包含进来。这样使用 make 运行的时候就会")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# makefile")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("include")]),t._v(" foo.make\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("如果你想让 make 不理那些无法读取的文件，并且继续执行。")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("-include")]),t._v(" <filename>\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h2",{attrs:{id:"变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#变量"}},[t._v("#")]),t._v(" 变量")]),t._v(" "),a("h3",{attrs:{id:"赋值符"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#赋值符"}},[t._v("#")]),t._v(" 赋值符")]),t._v(" "),a("h4",{attrs:{id:"在执行时扩展-允许递归扩展"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在执行时扩展-允许递归扩展"}},[t._v("#")]),t._v(" 在执行时扩展，允许递归扩展")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[t._v("VARIABLE "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" value\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"在声明时扩展"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在声明时扩展"}},[t._v("#")]),t._v(" 在声明时扩展")]),t._v(" "),a("p",[t._v("可以防止递归，并且只能引用之前声明过的变量")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[t._v("VARIABLE "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" value\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"只有在该变量为空时才设置值"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#只有在该变量为空时才设置值"}},[t._v("#")]),t._v(" 只有在该变量为空时才设置值")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[t._v("VARIABLE "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?=")]),t._v(" value\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"将值追加到变量的尾端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#将值追加到变量的尾端"}},[t._v("#")]),t._v(" 将值追加到变量的尾端")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[t._v("VARIABLE "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" value\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"override"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#override"}},[t._v("#")]),t._v(" override")]),t._v(" "),a("p",[t._v("如果变量前不指定 "),a("code",[t._v("override")]),t._v("，那么命令行中指定的变量可以对 Makefile 中的变量重新定义。")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 不会重新定义")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("override")]),t._v(" VARIABLE "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" value\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("override")]),t._v(" VARIABLE "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" value\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("override")]),t._v(" VARIABLE "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?=")]),t._v(" value\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("override")]),t._v(" VARIABLE "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" value\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("override")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("define")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("endef")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),t._v(" "),a("h3",{attrs:{id:"变量-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#变量-2"}},[t._v("#")]),t._v(" 变量")]),t._v(" "),a("p",[t._v("需要使用 "),a("code",[t._v("$()")]),t._v(" 或者 "),a("code",[t._v("${}")]),t._v(" 对变量进行引用")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[t._v("file "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" main.c\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\tclang -o hello "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("h4",{attrs:{id:"避免递归变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#避免递归变量"}},[t._v("#")]),t._v(" 避免递归变量")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 这样会使变量陷入无穷递归")]),t._v("\nA "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("B"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nB "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("A"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("hr"),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[t._v("x "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" foo\ny "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" bar\nx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" later\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 等价于")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# x = later")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# y = foo bar")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("h4",{attrs:{id:"shell-变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shell-变量"}},[t._v("#")]),t._v(" Shell 变量")]),t._v(" "),a("p",[t._v("如果要使用 Shell 变量，需要在之前加上 "),a("code",[t._v("$")])]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\techo "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$$HOME")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h4",{attrs:{id:"定义多行变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#定义多行变量"}},[t._v("#")]),t._v(" 定义多行变量")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("define")]),t._v(" foo\necho foo\necho bar\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("endef")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("foo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("h3",{attrs:{id:"自动变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自动变量"}},[t._v("#")]),t._v(" 自动变量")]),t._v(" "),a("h4",{attrs:{id:""}},[a("a",{staticClass:"header-anchor",attrs:{href:"#"}},[t._v("#")]),t._v(" "),a("code",[t._v("$@")])]),t._v(" "),a("p",[a("code",[t._v("$@")]),t._v(":指代当前目标，即 Make 命令当前构建的那个目标")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\ttouch "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$@")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("hr"),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" foo\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# $@ 就是指的这里的 foo")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h4",{attrs:{id:"-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#-2"}},[t._v("#")]),t._v(" "),a("code",[t._v("$<")])]),t._v(" "),a("p",[a("code",[t._v("$<")]),t._v(" 指代第一个前置条件。比如，规则为 t: p1 p2，那么 "),a("code",[t._v("$<")]),t._v(" 就指代 p1")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("a.md")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" b.md c.md\n  cp "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$<")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$@")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("hr"),t._v(" "),a("p",[t._v("使用 "),a("code",[t._v("make a.md")]),t._v(",相当于以下写法")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("a.md")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" b.md c.md\n    cp b.md a.md \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h4",{attrs:{id:"-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#-3"}},[t._v("#")]),t._v(" "),a("code",[t._v("$^")])]),t._v(" "),a("p",[a("code",[t._v("$^")]),t._v(" 指代所有的前置条件,去除重复项")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("a.md")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" b.md c.md\n  echo "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$^")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h4",{attrs:{id:"-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#-4"}},[t._v("#")]),t._v(" "),a("code",[t._v("$+")])]),t._v(" "),a("p",[a("code",[t._v("$^")]),t._v(" 指代所有的前置条件，不会去除重复项")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("a.md")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" b.md c.md c.md\n\techo "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$+")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h4",{attrs:{id:"-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#-5"}},[t._v("#")]),t._v(" "),a("code",[t._v("$?")])]),t._v(" "),a("p",[a("code",[t._v("$?")]),t._v(" 指代更新的依赖，只有最近更新过的依赖才会引用")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("a.md")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" b.md c.md c.md\n\tcat "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$?")]),t._v(" > a.md\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h4",{attrs:{id:"-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#-6"}},[t._v("#")]),t._v(" "),a("code",[t._v("$*")])]),t._v(" "),a("p",[a("code",[t._v("$*")]),t._v(" 指代匹配符匹配的部分")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("main.o")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" main.c\n\tclang -o "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$*.c")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("hr"),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" main\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 此时 cc  main.c -o main")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h4",{attrs:{id:"-7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#-7"}},[t._v("#")]),t._v(" "),a("code",[t._v("$%")])]),t._v(" "),a("p",[a("code",[t._v("$%")]),t._v(": 仅当目标是函数库文件中，表示规则中的目标成员名")]),t._v(" "),a("ul",[a("li",[t._v("windows 中是 "),a("code",[t._v(".lib")]),t._v(" 文件")]),t._v(" "),a("li",[t._v("unix 中是 "),a("code",[t._v(".a")]),t._v(" 文件")])]),t._v(" "),a("h3",{attrs:{id:"内置命名变量的参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#内置命名变量的参数"}},[t._v("#")]),t._v(" 内置命名变量的参数")]),t._v(" "),a("p",[t._v("这些变量都是相关下面的命令的参数。如果没有指明其默认值，那么其默认值都是空。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v(":-")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v(":-")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("ARFLAGS")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("函数库打包程序AR命令的参数。默认值是 "),a("code",[t._v("rv")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("ASFLAGS")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("汇编语言编译器参数。（当明显地调用 "),a("code",[t._v(".s")]),t._v(" 或 "),a("code",[t._v(".S")]),t._v(" 文件时）")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("CFLAGS")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("C 语言编译器参数。")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("CXXFLAGS")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("C++ 语言编译器参数。")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("COFLAGS")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("RCS 命令参数。")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("CPPFLAGS")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("C 预处理器参数。（ "),a("code",[t._v("C")]),t._v(" 和 "),a("code",[t._v("Fortran")]),t._v(" 编译器也会用到）。")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("FFLAGS")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Fortran 语言编译器参数。")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GFLAGS")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("SCCS "),a("code",[t._v("get")]),t._v(" 程序参数。")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("LDFLAGS")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("链接器参数。（如："),a("code",[t._v("ld")]),t._v(" ）")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("PFLAGS")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Pascal 语言编译器参数。")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("LFLAGS")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Lex 文法分析器参数。")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("RFLAGS")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Ratfor 程序的 Fortran 编译器参数。")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("YFLAGS")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Yacc 文法分析器参数。")])])])]),t._v(" "),a("h3",{attrs:{id:"内置已命名的变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#内置已命名的变量"}},[t._v("#")]),t._v(" 内置已命名的变量")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v(":-")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v(":-")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("AR")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("函数库打包程序。默认命令是 "),a("code",[t._v("ar")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("AS")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("汇编语言编译程序。默认命令是 "),a("code",[t._v("as")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("CC")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("C 语言编译程序。默认命令是 "),a("code",[t._v("cc")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("CXX")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("C++ 语言编译程序。默认命令是 "),a("code",[t._v("g++")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("CO")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("从 RCS 文件中扩展文件程序。默认命令是 "),a("code",[t._v("co")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("CPP")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("C 程序的预处理器（输出是标准输出设备）。默认命令是 "),a("code",[t._v("$(CC) –E")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("FC")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Fortran 和 Ratfor 的编译器和预处理程序。默认命令是 "),a("code",[t._v("f77")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("从 SCCS 文件中扩展文件的程序。默认命令是 "),a("code",[t._v("get")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("LEX")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Lex 方法分析器程序（针对于 C 或 Ratfor）。默认命令是 "),a("code",[t._v("lex")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("PC")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Pascal 语言编译程序。默认命令是 "),a("code",[t._v("pc")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("YACC")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Yacc 文法分析器（针对于 C 程序）。默认命令是 "),a("code",[t._v("yacc")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("YACCR")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Yacc 文法分析器（针对于 Ratfor 程序）。默认命令是 "),a("code",[t._v("yacc –r")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("MAKEINFO")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("转换 Texinfo 源文件（.texi）到 Info 文件程序。默认命令是 "),a("code",[t._v("makeinfo")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("TEX")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("从 TeX 源文件创建TeX DVI文件的程序。默认命令是 "),a("code",[t._v("tex")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("TEXI2DVI")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("从 Texinfo 源文件创建 TeX DVI 文件的程序。默认命令是 "),a("code",[t._v("texi2dvi")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("WEAVE")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("转换 Web 到 TeX 的程序。默认命令是 "),a("code",[t._v("weave")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("CWEAVE")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("转换 C Web 到 TeX 的程序。默认命令是 "),a("code",[t._v("cweave")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("TANGLE")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("转换 Web 到 Pascal 语言的程序。默认命令是 "),a("code",[t._v("tangle")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("CTANGLE")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("转换 C Web 到 C。默认命令是 "),a("code",[t._v("ctangle")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("RM")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("删除文件命令。默认命令是 "),a("code",[t._v("rm –f")])])])])]),t._v(" "),a("h4",{attrs:{id:"内置的变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#内置的变量"}},[t._v("#")]),t._v(" 内置的变量")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("CC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" -o main main.c\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h2",{attrs:{id:"书写规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#书写规则"}},[t._v("#")]),t._v(" 书写规则")]),t._v(" "),a("h3",{attrs:{id:"文件搜寻-vpath"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文件搜寻-vpath"}},[t._v("#")]),t._v(" 文件搜寻（"),a("code",[t._v("vpath")]),t._v("）")]),t._v(" "),a("p",[t._v("如果没有指定 vpath 变量，make 只会在当前的目录中去寻找依赖文件和目标文件。否则，如果当前目录没有，就会到指定的目录中去寻找")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v(":-")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v(":-")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("vpath <pattern> <directories>")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("为符合模式 <pattern> 的文件指定搜索目录 <directories>")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("vpath <pattern>")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("清除符合模式 <pattern> 的文件的搜索目录。")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("vpath")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("清除所有已被设置好了的文件搜索目录")])])])]),t._v(" "),a("h4",{attrs:{id:"-8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#-8"}},[t._v("#")]),t._v(" "),a("code",[t._v("%")])]),t._v(" "),a("ul",[a("li",[t._v("vpath 使用方法中的 <pattern> 需要包含 "),a("code",[t._v("%")]),t._v(" 字符。"),a("code",[t._v("%")]),t._v(" 的意思是匹配零或若干字符（类似于"),a("strong",[t._v("通配符")]),t._v("）,并且引用规则是需要使用"),a("strong",[t._v("自动变量")])])]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("vpath")]),t._v(" %.c dist\nTARGET "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" hello\nOBJ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" bar.o foo.o\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),t._v("(TARGET)")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("OBJ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" -o "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$@")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$^")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("%.o")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$.c")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" -o "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$<")]),t._v(" -o "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#@")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),t._v(" "),a("h3",{attrs:{id:"通配符"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通配符"}},[t._v("#")]),t._v(" 通配符")]),t._v(" "),a("h4",{attrs:{id:"-9"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#-9"}},[t._v("#")]),t._v(" "),a("code",[t._v("*")])]),t._v(" "),a("p",[a("code",[t._v("*")]),t._v("：与 linux 系统下的一样")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 清除所有 .o 结尾的文件")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("clean")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    rm -f *.o\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("h4",{attrs:{id:"-10"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#-10"}},[t._v("#")]),t._v(" "),a("code",[t._v("~")])]),t._v(" "),a("p",[a("code",[t._v("~")]),t._v("：在 linux 或 mac 下表示用户目录，win 下表示 "),a("code",[t._v("HOME")]),t._v(" 环境变量")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    ls ~\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h4",{attrs:{id:"-11"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#-11"}},[t._v("#")]),t._v(" "),a("code",[t._v("?")])]),t._v(" "),a("p",[a("code",[t._v("?")]),t._v(": 与在 linux 等类似，可以匹配单个字符")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\tls -ll packag?.json\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h3",{attrs:{id:"静态模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#静态模式"}},[t._v("#")]),t._v(" 静态模式")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("TARGET")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" PREREQUISITES "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("PREREQUISITES\n  COMMAMD\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#...")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("ul",[a("li",[a("code",[t._v("target")]),t._v(" 定义了一系列的目标文件")]),t._v(" "),a("li",[t._v("第一个 "),a("code",[t._v("prerequisites")]),t._v(" 是指明了 target 的模式，也就是的目标集模式。")]),t._v(" "),a("li",[t._v("第二个 "),a("code",[t._v("prerequisites")]),t._v(" 是目标的依赖模式，它对第一个 "),a("code",[t._v("prerequisites")]),t._v(" 形成的模式再进行一次依赖目标的定义")])]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[t._v("objects "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" foo.o main.o\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),t._v("(objects)")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" %.o"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" %.c\n\t"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" -c "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CFLAGS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$<")]),t._v(" -o "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$@")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("hr"),t._v(" "),a("p",[t._v("相当于:")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("foo.o")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" foo.c\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" -c "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CFLAGS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" foo.c -o foo.o\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("main.o")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" main.c\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" -c "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CFLAGS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" main.c -o main.o\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("h3",{attrs:{id:"伪目标"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#伪目标"}},[t._v("#")]),t._v(" 伪目标")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("伪目标")]),t._v("并不是一个文件，只是一个标签。只有通过显式地指明这个"),a("strong",[t._v("目标")]),t._v("才能让其生效")]),t._v(" "),a("li",[t._v("使用 "),a("code",[t._v(".PHONY")]),t._v(" 来显式地指明目标是 "),a("code",[t._v("伪目标")])])]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin-target builtin"}},[t._v(".PHONY")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" clean\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("clean")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    rm *.o temp\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("h3",{attrs:{id:"约定俗成的规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#约定俗成的规则"}},[t._v("#")]),t._v(" 约定俗成的规则")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v(":-")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v(":-")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("all")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("该伪目标是所有目标的目标，一般用于编译所有的目标")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("clean")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("该伪目标用于删除所有由 make 创建的文件")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("install")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("该伪目标用于安装已编译好的程序，即将目标执行文件拷贝到指定目标中")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("print")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("该伪目标用于例出改变过的源文件")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("tar")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("该伪目标用于把源程序打包备份为 tar 文件")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("dist")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("该伪目标用于创建压缩文件，一般将 tar 文件压成 Z 或 gz 文件")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("TAGS")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("该伪目标用于更新所有的目标，以备完整地重编译使用")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("check/test")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("这两个伪目标用于测试 makefile 的流程")])])])]),t._v(" "),a("h2",{attrs:{id:"命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令"}},[t._v("#")]),t._v(" 命令")]),t._v(" "),a("h3",{attrs:{id:"回声"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#回声"}},[t._v("#")]),t._v(" 回声（"),a("code",[t._v("@")]),t._v("）")]),t._v(" "),a("p",[t._v("正常情况下，make会打印每条命令，然后再执行，这就叫做回声（echoing）")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("all")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 会有命令执行显示")]),t._v("\n\techo Hello, world\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("hr"),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("all")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 不会有命令执行的显示")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("@")]),t._v("echo Hello, world\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),t._v(" "),a("h3",{attrs:{id:"显示命令、禁止命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#显示命令、禁止命令"}},[t._v("#")]),t._v(" 显示命令、禁止命令")]),t._v(" "),a("h4",{attrs:{id:"显示命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#显示命令"}},[t._v("#")]),t._v(" 显示命令")]),t._v(" "),a("p",[t._v("如果我们只希望显示命令，而不希望执行命令，可以使用 "),a("code",[t._v("-n")]),t._v(" 或者 "),a("code",[t._v("--just-print")])]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" all --just-print \n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" all "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-n")]),t._v(" \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h4",{attrs:{id:"禁止命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#禁止命令"}},[t._v("#")]),t._v(" 禁止命令")]),t._v(" "),a("p",[a("code",[t._v("-s")]),t._v(" 或 "),a("code",[t._v("--silent")]),t._v(" 或 "),a("code",[t._v("--quiet")]),t._v(" 与 "),a("code",[t._v("@")]),t._v(" 一样，用于禁止回声")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" all "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),t._v(" "),a("h3",{attrs:{id:"执行命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#执行命令"}},[t._v("#")]),t._v(" 执行命令")]),t._v(" "),a("p",[t._v("使用 tab 及换行")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("exec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    cd /home/hchen\n    pwd\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("hr"),t._v(" "),a("p",[t._v("使用 "),a("code",[t._v(";")])]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("exec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    cd /home/hchen"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" pwd\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h3",{attrs:{id:"make-参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#make-参数"}},[t._v("#")]),t._v(" make 参数")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v(":-")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v(":-")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("-b")]),t._v(","),a("code",[t._v("-m")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("忽略和其它版本make的兼容性")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("-B")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("("),a("code",[t._v("--always-make")]),t._v(") 认为所有的目标都需要重编译")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("-C <dir>")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("("),a("code",[t._v("--directory=<dir>")]),t._v(") 指定读取makefile的目录")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("-e")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("("),a("code",[t._v("--environment-overrides")]),t._v(") 指明环境变量的值覆盖 makefile 中定义的变量的值")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("-f=<file>")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("指定需要执行的makefile")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("-h")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("显示帮助信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("-i")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("("),a("code",[t._v("--ignore-errors")]),t._v(")在执行时忽略所有的错误")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("-I <dir>")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("("),a("code",[t._v("--include-dir=<dir>")]),t._v(") 指定一个被包含 makefile 的搜索目标")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("-j [<nums>]")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("("),a("code",[t._v("--jobs[=<jobsnum>]")]),t._v(")指同时运行命令的个数")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("-k")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("("),a("code",[t._v("--keep-going")]),t._v(")出错也不停止运行")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("-l <load>")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("--load-average[=<load>]")]),t._v("、"),a("code",[t._v("-max-load[=<load>]")]),t._v(" 指定make运行命令的负载")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("-n")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("("),a("code",[t._v("--just-print")]),t._v(", "),a("code",[t._v("--dry-run")]),t._v(", "),a("code",[t._v("--recon")]),t._v(") 仅输出执行过程中的命令序列，但不执行")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("-o <file>")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("("),a("code",[t._v("--old-file=<file>")]),t._v(", "),a("code",[t._v("--assume-old=<file>")]),t._v(")不重新生成的指定的 <file>，即使目标的依赖文件新于它")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("-p")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("("),a("code",[t._v("--print-data-base")]),t._v(") 输出 makefile 中的所有数据，包括所有的规则和变量")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("-q")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("("),a("code",[t._v("--question")]),t._v(") 不运行命令，也不输出。仅仅是检查所指定的目标是否需要更新")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("-r")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("("),a("code",[t._v("--no-builtin-rules")]),t._v(") 禁止 make 使用任何隐含规则")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("-R")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("("),a("code",[t._v("--no-builtin-variabes")]),t._v(") 禁止 make 使用任何作用于变量上的隐含规则")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("-s")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("("),a("code",[t._v("--silent")]),t._v(","),a("code",[t._v("--quiet")]),t._v(") 在命令运行时不输出命令的输出")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("-S")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("("),a("code",[t._v("--no-keep-going")]),t._v(", "),a("code",[t._v("--stop")]),t._v(") 取消“-k”选项的作用")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("-t")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("--touch")]),t._v(" 相当于 UNIX 的 touch 命令，只是把目标的修改日期变成最新的，也就是阻止生成目标的命令运行")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("-v")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("("),a("code",[t._v("--version")]),t._v(") 输出 make 程序的版本、版权等关于 make 的信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("-w")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("("),a("code",[t._v("--print-directory")]),t._v(") 输出运行 makefile 之前和之后的信息。"),a("code",[t._v("--no-print-directory")]),t._v(" 可以禁止 "),a("code",[t._v("-w")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("-W <file>")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("--what-if=<file>")]),t._v(", "),a("code",[t._v("--new-file=<file>")]),t._v(", "),a("code",[t._v("--assume-file=<file>")]),t._v(" 假定目标 <file> 需要更新，如果和 "),a("code",[t._v("-n")]),t._v(" 选项使用，那么这个参数会输出该目标更新时的运行动作")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("--warn-undefined-variables")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("只要 make 发现有未定义的变量，那么就输出警告信息")])])])]),t._v(" "),a("h3",{attrs:{id:"debug-options"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#debug-options"}},[t._v("#")]),t._v(" "),a("code",[t._v("-debug[=<options>]")])]),t._v(" "),a("p",[t._v("输出 make 的调试信息。下面是 <options>的取值：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("options")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v(":-")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("a")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("all")]),t._v("，输出所有的调试信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("b")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("basic")]),t._v("，只输出简单的调试信息。即输出不需要重编译的目标")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("v")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("verbose")]),t._v("，包括 b 的信息。输出包括 makefile 被解析的信息，不需要被重编译的依赖文件等")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("i")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("implicit")]),t._v("，输出所有的隐含规则")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("j")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("jobs")]),t._v("，输出执行规则中命令的详细信息，如命令的 PID、返回码等")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("m")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("makefile")]),t._v("，输出 make 读取 makefile，更新 makefile，执行 makefile 的信息")])])])]),t._v(" "),a("h3",{attrs:{id:"make-的退出码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#make-的退出码"}},[t._v("#")]),t._v(" make 的退出码")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v(":-")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v(":-")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("0")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("成功执行")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("1")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("运行时出现错误")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("2")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("使用了 "),a("code",[t._v("-q")]),t._v(" 选项，并且一些目标不需要更新")])])])]),t._v(" "),a("h2",{attrs:{id:"判断和循环"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#判断和循环"}},[t._v("#")]),t._v(" 判断和循环")]),t._v(" "),a("h3",{attrs:{id:"单分支条件判断"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单分支条件判断"}},[t._v("#")]),t._v(" 单分支条件判断")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("ifeq")]),t._v(" 的意思表示条件语句的开始，表达式包含两个参数，如果相同则为真。")]),t._v(" "),a("li",[a("code",[t._v("ifneq")]),t._v(" 的意思表示条件语句的开始，表达式包含两个参数，如果不同则为真。")]),t._v(" "),a("li",[a("code",[t._v("else")]),t._v(" 表示条件表达式为假的情况。")]),t._v(" "),a("li",[a("code",[t._v("endif")]),t._v(" 表示一个条件语句的结束，任何一个条件表达式都应该以 "),a("code",[t._v("endif")]),t._v(" 结束。\n")])]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ifeq")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(", cc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" -o foo foo.c\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" -o bar bar.c\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("endif")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("h3",{attrs:{id:"多分支条件判断"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#多分支条件判断"}},[t._v("#")]),t._v(" 多分支条件判断")]),t._v(" "),a("h4",{attrs:{id:"ifneq-语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ifneq-语法"}},[t._v("#")]),t._v(" ifneq 语法")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ifneq")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("<arg1>, <arg2>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ifneq")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<arg1>'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<arg2>'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ifneq")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<arg1>"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<arg2>"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ifneq")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<arg1>"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<arg2>'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ifneq")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<arg1>'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<arg2>"')]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("h4",{attrs:{id:"ifeq-语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ifeq-语法"}},[t._v("#")]),t._v(" ifeq 语法")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ifeq")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("<arg1>, <arg2>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ifeq")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<arg1>'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<arg2>'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ifeq")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<arg1>"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<arg2>"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ifeq")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<arg1>"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<arg2>'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ifeq")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<arg1>'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<arg2>"')]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("h3",{attrs:{id:"ifdef"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ifdef"}},[t._v("#")]),t._v(" ifdef")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ifdef")]),t._v(" <variable-name>\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("code",[t._v("ifdef")]),t._v(" 会根据 variable-name 判断，如果为空则为真")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[t._v("bar "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\nfoo "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ifdef")]),t._v(" foo\n    frobozz "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" yes\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v("\n    frobozz "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" no\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("endif")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\techo "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("frobozz"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("p",[a("code",[t._v("ifndef")]),t._v(" 则和 "),a("code",[t._v("ifdef")]),t._v(" 是相反的意思")]),t._v(" "),a("h3",{attrs:{id:"for-循环"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#for-循环"}},[t._v("#")]),t._v(" for 循环")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[t._v("LIST "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" one two three\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("all")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\tfor i in "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("LIST"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" do \\\n\t    echo "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$$i;")]),t._v(" \\\n\tdone\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("h2",{attrs:{id:"函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#函数"}},[t._v("#")]),t._v(" 函数")]),t._v(" "),a("h3",{attrs:{id:"字符串处理函数-替换函数-subst"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#字符串处理函数-替换函数-subst"}},[t._v("#")]),t._v(" 字符串处理函数 - 替换函数("),a("code",[t._v("subst")]),t._v(")")]),t._v(" "),a("p",[t._v("把字串 <text> 中的 <from> 字符串替换成 <to> 。")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("subst")]),t._v(" <from>,<to>,<text>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("示例")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("subst")]),t._v(" ee,EE,feet on the street"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"字符串处理函数-模式字符串替换函数-patsubst"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#字符串处理函数-模式字符串替换函数-patsubst"}},[t._v("#")]),t._v(" 字符串处理函数 - 模式字符串替换函数("),a("code",[t._v("patsubst")]),t._v(")")]),t._v(" "),a("p",[t._v("查找 <text> 中的单词（"),a("strong",[t._v("单词以空格、Tab或回车换行分隔")]),t._v("）是否符合模式 <pattern>。匹配，则以 <replacement> 替换。")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("patsubst")]),t._v(" <pattern>,<replacement>,<text>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ul",[a("li",[t._v("示例")])]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("patsubst")]),t._v(" %.c,%.o,x.c.c bar.c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("把字串 x.c.c bar.c 符合模式 %.c 的单词替换成 %.o ，返回结果是 x.c.o bar.o")]),t._v(" "),a("h3",{attrs:{id:"字符串处理函数-去空格函数-strip"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#字符串处理函数-去空格函数-strip"}},[t._v("#")]),t._v(" 字符串处理函数 - 去空格函数("),a("code",[t._v("strip")]),t._v(")")]),t._v(" "),a("p",[t._v("去掉 "),a("string",[t._v(" 字串中开头和结尾的空字符。")])],1),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("strip")]),t._v(" <string>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("示例")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("strip")]),t._v(" a b c "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("把字串 "),a("code",[t._v("a b c")]),t._v(" 去掉开头和结尾的空格，结果是 a b c。")]),t._v(" "),a("h3",{attrs:{id:"字符串处理函数-查找字符串函数-findstring"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#字符串处理函数-查找字符串函数-findstring"}},[t._v("#")]),t._v(" 字符串处理函数 - 查找字符串函数("),a("code",[t._v("findstring")]),t._v(")")]),t._v(" "),a("p",[t._v("在字串 <in> 中查找 <find> 字串。")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findstring")]),t._v(" <find>,<in>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("示例：")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findstring")]),t._v(" a,a b c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findstring")]),t._v(" a,b c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("第一个函数返回 a 字符串，第二个返回空字符串")]),t._v(" "),a("h3",{attrs:{id:"字符串处理函数-过滤函数-filter"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#字符串处理函数-过滤函数-filter"}},[t._v("#")]),t._v(" 字符串处理函数 - 过滤函数("),a("code",[t._v("filter")]),t._v(")")]),t._v(" "),a("p",[t._v("以 <pattern> 模式过滤 <text> 字符串中的单词，保留符合模式 <pattern> 的单词。可以有多个模式。")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter")]),t._v(" <pattern...>,<text>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("示例")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[t._v("sources "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" foo.c bar.c baz.s ugh.h\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sources"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    cc "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter")]),t._v(" %.c %.s,"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sources"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" -o foo\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter")]),t._v(" %.c %.s,"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sources"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 返回的值是 foo.c bar.c baz.s")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("h3",{attrs:{id:"字符串处理函数-反过滤函数-filter-out"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#字符串处理函数-反过滤函数-filter-out"}},[t._v("#")]),t._v(" 字符串处理函数 - 反过滤函数("),a("code",[t._v("filter-out")]),t._v(")")]),t._v(" "),a("p",[t._v("以 <pattern> 模式过滤 <text> 字符串中的单词，去除符合模式 <pattern> 的单词。可以有多个模式。")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter-out")]),t._v(" <pattern...>,<text>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("示例：")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[t._v("objects"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("main1.o foo.o main2.o bar.o\nmains"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("main1.o main2.o\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter-out")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mains"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(","),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("objects"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 返回值是 foo.o bar.o 。")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("h3",{attrs:{id:"字符串处理函数-排序函数-sort"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#字符串处理函数-排序函数-sort"}},[t._v("#")]),t._v(" 字符串处理函数 - 排序函数("),a("code",[t._v("sort")]),t._v(")")]),t._v(" "),a("p",[t._v("给字符串 <list> 中的单词排序（升序）。")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sort")]),t._v(" <list>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ul",[a("li",[t._v("示例："),a("code",[t._v("$(sort foo bar lose)")]),t._v(" 返回 "),a("code",[t._v("bar foo lose")])]),t._v(" "),a("li",[t._v("注意：sort 函数会去掉 "),a("code",[t._v("<list>")]),t._v(" 中相同的单词")])]),t._v(" "),a("h3",{attrs:{id:"字符串处理函数-取单词函数-word"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#字符串处理函数-取单词函数-word"}},[t._v("#")]),t._v(" 字符串处理函数 - 取单词函数（"),a("code",[t._v("word")]),t._v(")")]),t._v(" "),a("p",[t._v("取字符串 <text> 中第 <n> 个单词。（从一开始）")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("word")]),t._v(" <n>,<text>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("示例："),a("code",[t._v("$(word 2, foo bar baz)")]),t._v(" 返回值是 "),a("code",[t._v("bar")])]),t._v(" "),a("h3",{attrs:{id:"字符串处理函数-取单词串函数-wordlist"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#字符串处理函数-取单词串函数-wordlist"}},[t._v("#")]),t._v(" 字符串处理函数 - 取单词串函数("),a("code",[t._v("wordlist")]),t._v(")")]),t._v(" "),a("ul",[a("li",[t._v("从字符串 <text> 中取从 <s> 开始到 <e> 的单词串。<s> 和 <e> 是一个数字。")])]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wordlist")]),t._v(" <ss>,<e>,<text>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("示例："),a("code",[t._v("$(wordlist 2, 3, foo bar baz)")]),t._v(" 返回值是 bar baz。")]),t._v(" "),a("h3",{attrs:{id:"字符串处理函数-单词个数统计函数-words"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#字符串处理函数-单词个数统计函数-words"}},[t._v("#")]),t._v(" 字符串处理函数 - 单词个数统计函数("),a("code",[t._v("words")]),t._v(")")]),t._v(" "),a("ul",[a("li",[t._v("统计 <text> 中字符串中的单词个数。")])]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("words")]),t._v(" <text>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ul",[a("li",[t._v("示例："),a("code",[t._v("$(words, foo bar baz)")]),t._v(" 返回值是 3。")])]),t._v(" "),a("h3",{attrs:{id:"字符串处理函数-首单词函数-firstword"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#字符串处理函数-首单词函数-firstword"}},[t._v("#")]),t._v(" 字符串处理函数 - 首单词函数("),a("code",[t._v("firstword")]),t._v(")")]),t._v(" "),a("ul",[a("li",[t._v("取字符串 <text> 中的第一个单词。")])]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("firstword")]),t._v(" <text>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ul",[a("li",[t._v("示例："),a("code",[t._v("$(firstword foo bar)")]),t._v(" 返回值是 "),a("code",[t._v("foo")])])]),t._v(" "),a("h3",{attrs:{id:"文件名操作函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文件名操作函数"}},[t._v("#")]),t._v(" 文件名操作函数")]),t._v(" "),a("h4",{attrs:{id:"取目录函数-dir"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#取目录函数-dir"}},[t._v("#")]),t._v(" 取目录函数("),a("code",[t._v("dir")]),t._v(")")]),t._v(" "),a("p",[t._v("从文件名序列 <names> 中取出目录部分。目录部分是指最后一个反斜杠（"),a("code",[t._v("/")]),t._v("）之前的部分。如果没有反斜杠，那么返回 "),a("code",[t._v("./")]),t._v("。")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("dir")]),t._v(" <names...>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("hr"),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("dir")]),t._v(" src/foo.c hacks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#返回值是 src/ ./")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h4",{attrs:{id:"取文件函数-notdir"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#取文件函数-notdir"}},[t._v("#")]),t._v(" 取文件函数("),a("code",[t._v("notdir")]),t._v(")")]),t._v(" "),a("p",[t._v("从文件名序列 <names> 中取出非目录部分。非目录部分是指最後一个反斜杠（"),a("code",[t._v("/")]),t._v("）之后的部分。")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("notdir")]),t._v(" <names...>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("hr"),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("notdir")]),t._v(" src/foo.c hacks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 返回值是 foo.c hacks")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h4",{attrs:{id:"取后缀函数-suffix"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#取后缀函数-suffix"}},[t._v("#")]),t._v(" 取后缀函数（"),a("code",[t._v("suffix")]),t._v(")")]),t._v(" "),a("p",[t._v("从文件名序列 <names> 中取出各个文件名的后缀")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("suffix")]),t._v(" <names...>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("hr"),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("suffix")]),t._v(" src/foo.c src-1.0/bar.c hacks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 返回值是 .c .c")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h4",{attrs:{id:"取前缀函数-basename"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#取前缀函数-basename"}},[t._v("#")]),t._v(" 取前缀函数("),a("code",[t._v("basename")]),t._v(")")]),t._v(" "),a("p",[t._v("从文件名序列 <names> 中取出各个文件名的前缀部分。")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("basename")]),t._v(" <names...>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("hr"),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("basename")]),t._v(" src/foo.c src-1.0/bar.c hacks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 返回值是 src/foo src-1.0/bar hacks")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h4",{attrs:{id:"加后缀函数-addsuffix"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#加后缀函数-addsuffix"}},[t._v("#")]),t._v(" 加后缀函数("),a("code",[t._v("addsuffix")]),t._v(")")]),t._v(" "),a("p",[t._v("把后缀 <suffix> 加到 <names> 中的每个单词后面")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addsuffix")]),t._v(" <suffix>,<names...>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("hr"),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addsuffix")]),t._v(" .c,foo bar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 返回值是 foo.c bar.c ")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h4",{attrs:{id:"加前缀函数-addprefix"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#加前缀函数-addprefix"}},[t._v("#")]),t._v(" 加前缀函数("),a("code",[t._v("addprefix")]),t._v(")")]),t._v(" "),a("p",[t._v("把前缀 <prefix> 加到 <names> 中的每个单词前面。")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("addprefix <prefix>,<names...>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("hr"),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("addprefix src/,foo bar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 返回值是 src/foo src/bar 。")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h4",{attrs:{id:"连接函数-join"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#连接函数-join"}},[t._v("#")]),t._v(" 连接函数("),a("code",[t._v("join")]),t._v(")")]),t._v(" "),a("p",[t._v("把 <list2> 中的单词对应地加到 <list1> 的单词后面。")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),t._v(" <list1>,<list2>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("hr"),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),t._v(" aaa bbb , 111 222 333"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 返回值是 aaa111 bbb222 333 。")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h3",{attrs:{id:"其它函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其它函数"}},[t._v("#")]),t._v(" 其它函数")]),t._v(" "),a("h4",{attrs:{id:"foreach-函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#foreach-函数"}},[t._v("#")]),t._v(" foreach 函数")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("foreach")]),t._v(" <var>,<list>,<text>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("hr"),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# $(name) 中的单词会被挨个取出，并存到变量 n 中，")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# $(n).o 每次根据 $(n) 计算出一个值，这些值以空格分隔，最后作为 foreach 函数的返回")]),t._v("\nnames "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" a b c d\nfiles "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("foreach")]),t._v(" n,"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("names"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(","),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".o"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\techo "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("files"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("h4",{attrs:{id:"if-函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#if-函数"}},[t._v("#")]),t._v(" if 函数")]),t._v(" "),a("p",[t._v("与之前的条件语句——"),a("code",[t._v("ifeq")]),t._v(" 类似")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("if")]),t._v(" <condition>,<then-part>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 或者")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("if")]),t._v(" <condition>,<then-part>,<"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v("-part>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("h4",{attrs:{id:"call-函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#call-函数"}},[t._v("#")]),t._v(" call 函数")]),t._v(" "),a("p",[t._v("call 函数是唯一一个可以用来创建新的参数化的函数。")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),t._v(" <expression>,<parm1>,<parm2>,...,<parmn>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("hr"),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[t._v("reverse "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nfoo "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),t._v(" reverse,a,b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\techo "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("foo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# b a")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("h4",{attrs:{id:"shell-函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shell-函数"}},[t._v("#")]),t._v(" shell 函数")]),t._v(" "),a("p",[t._v("使用操作系统 Shell 的命令")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[t._v("contents "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("shell")]),t._v(" cat foo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nfiles "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("shell")]),t._v(" echo *.c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h4",{attrs:{id:"控制-make-的函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#控制-make-的函数"}},[t._v("#")]),t._v(" 控制 make 的函数")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),t._v(" <text ...>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# and")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("warning")]),t._v(" <text ...>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("h4",{attrs:{id:"origin-函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#origin-函数"}},[t._v("#")]),t._v(" origin 函数")]),t._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("origin")]),t._v(" <variable>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("origin 函数用于告诉这个变量的从何而来")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v(":-")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v(":-")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("undefined")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("如果 <variable> 未定义，返回 "),a("code",[t._v("undefined")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("default")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("如果 <variable> 是默认的，如 "),a("code",[t._v("CC")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("environment")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("如果 <variable> 是环境变量，并且当 Makefile 执行时，-e 参数没有被打开")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("file")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("如果 <variable> 这个变量被定义在 Makefile 中。")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("command line")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("如果 <variable> 这个变量是被命令行定义的。")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("override")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("如果 <variable> 是被 override 指示符重新定义的。")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("automatic")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("如果 <variable> 是一个命令运行中的自动化变量")])])])]),t._v(" "),a("h2",{attrs:{id:"另见"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#另见"}},[t._v("#")]),t._v(" 另见")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://seisman.github.io/how-to-write-makefile/overview.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("make 中文教程"),a("OutboundLink")],1),t._v(" "),a("em",[t._v("(seisman.github.io)")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.gnu.org/software/make/manual/make.html#toc-Overview-of-make",target:"_blank",rel:"noopener noreferrer"}},[t._v("make 手册"),a("OutboundLink")],1),t._v(" "),a("em",[t._v("(www.gnu.org)")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.gnu.org/software/make/",target:"_blank",rel:"noopener noreferrer"}},[t._v("make 官网"),a("OutboundLink")],1),t._v(" "),a("em",[t._v("www.gnu.org")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);