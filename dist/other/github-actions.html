<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>文档搬运工</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="学习笔记，包含前端开发、后端开发、服务器运维等">
    
    <link rel="preload" href="/assets/css/0.styles.fad71e8e.css" as="style"><link rel="preload" href="/assets/js/app.c8ed8bcf.js" as="script"><link rel="preload" href="/assets/js/2.f44a4f26.js" as="script"><link rel="preload" href="/assets/js/83.04d03012.js" as="script"><link rel="prefetch" href="/assets/js/10.68d16472.js"><link rel="prefetch" href="/assets/js/100.9d57c6dd.js"><link rel="prefetch" href="/assets/js/101.7685a749.js"><link rel="prefetch" href="/assets/js/102.1dae5789.js"><link rel="prefetch" href="/assets/js/103.31c8c6f7.js"><link rel="prefetch" href="/assets/js/104.1aabc831.js"><link rel="prefetch" href="/assets/js/105.f188b2cc.js"><link rel="prefetch" href="/assets/js/106.7706f598.js"><link rel="prefetch" href="/assets/js/107.98bf6cba.js"><link rel="prefetch" href="/assets/js/108.78c41dbf.js"><link rel="prefetch" href="/assets/js/109.a8c6ac5f.js"><link rel="prefetch" href="/assets/js/11.e0ba19d3.js"><link rel="prefetch" href="/assets/js/110.2cccc8fa.js"><link rel="prefetch" href="/assets/js/111.19a4e086.js"><link rel="prefetch" href="/assets/js/112.d940b1c0.js"><link rel="prefetch" href="/assets/js/113.58a5e756.js"><link rel="prefetch" href="/assets/js/114.950b8113.js"><link rel="prefetch" href="/assets/js/115.9712a524.js"><link rel="prefetch" href="/assets/js/116.dacaa4fa.js"><link rel="prefetch" href="/assets/js/117.a91f9e15.js"><link rel="prefetch" href="/assets/js/118.84772b6e.js"><link rel="prefetch" href="/assets/js/119.6e3567ca.js"><link rel="prefetch" href="/assets/js/12.67495675.js"><link rel="prefetch" href="/assets/js/120.9eb24a02.js"><link rel="prefetch" href="/assets/js/121.38bbf647.js"><link rel="prefetch" href="/assets/js/122.2f7ab3f4.js"><link rel="prefetch" href="/assets/js/123.419b99f0.js"><link rel="prefetch" href="/assets/js/124.4764bbe8.js"><link rel="prefetch" href="/assets/js/125.87d74ae9.js"><link rel="prefetch" href="/assets/js/126.3bbeef41.js"><link rel="prefetch" href="/assets/js/127.8bdba5aa.js"><link rel="prefetch" href="/assets/js/128.029c8965.js"><link rel="prefetch" href="/assets/js/129.ee2d4363.js"><link rel="prefetch" href="/assets/js/13.6727ab98.js"><link rel="prefetch" href="/assets/js/130.42157c82.js"><link rel="prefetch" href="/assets/js/131.f62c81df.js"><link rel="prefetch" href="/assets/js/14.70b0cf01.js"><link rel="prefetch" href="/assets/js/15.ba9580a7.js"><link rel="prefetch" href="/assets/js/16.1a8c733f.js"><link rel="prefetch" href="/assets/js/17.6657a227.js"><link rel="prefetch" href="/assets/js/18.65942dbb.js"><link rel="prefetch" href="/assets/js/19.7d801cca.js"><link rel="prefetch" href="/assets/js/20.7ca56ddb.js"><link rel="prefetch" href="/assets/js/21.a30264d9.js"><link rel="prefetch" href="/assets/js/22.fca662dd.js"><link rel="prefetch" href="/assets/js/23.1a059155.js"><link rel="prefetch" href="/assets/js/24.d9971ac4.js"><link rel="prefetch" href="/assets/js/25.6c1d4926.js"><link rel="prefetch" href="/assets/js/26.21e8c7b4.js"><link rel="prefetch" href="/assets/js/27.cfff7ef0.js"><link rel="prefetch" href="/assets/js/28.405bf1b8.js"><link rel="prefetch" href="/assets/js/29.3872d2cb.js"><link rel="prefetch" href="/assets/js/3.d00959e5.js"><link rel="prefetch" href="/assets/js/30.fea18838.js"><link rel="prefetch" href="/assets/js/31.364afb36.js"><link rel="prefetch" href="/assets/js/32.3a14b962.js"><link rel="prefetch" href="/assets/js/33.ebb8c231.js"><link rel="prefetch" href="/assets/js/34.bbba3f86.js"><link rel="prefetch" href="/assets/js/35.ebc83e54.js"><link rel="prefetch" href="/assets/js/36.949b4b98.js"><link rel="prefetch" href="/assets/js/37.63a219a5.js"><link rel="prefetch" href="/assets/js/38.2abdd62c.js"><link rel="prefetch" href="/assets/js/39.f31baba8.js"><link rel="prefetch" href="/assets/js/4.7ac2b204.js"><link rel="prefetch" href="/assets/js/40.f1973b4d.js"><link rel="prefetch" href="/assets/js/41.b2b7deaa.js"><link rel="prefetch" href="/assets/js/42.94a89008.js"><link rel="prefetch" href="/assets/js/43.cb36fa9a.js"><link rel="prefetch" href="/assets/js/44.d3cdaea4.js"><link rel="prefetch" href="/assets/js/45.6cedb636.js"><link rel="prefetch" href="/assets/js/46.d7f3520c.js"><link rel="prefetch" href="/assets/js/47.c34ac17e.js"><link rel="prefetch" href="/assets/js/48.d9fffe3c.js"><link rel="prefetch" href="/assets/js/49.a8a8fe51.js"><link rel="prefetch" href="/assets/js/5.f702624b.js"><link rel="prefetch" href="/assets/js/50.d67120fa.js"><link rel="prefetch" href="/assets/js/51.828b01e6.js"><link rel="prefetch" href="/assets/js/52.a09e7b67.js"><link rel="prefetch" href="/assets/js/53.78d609f7.js"><link rel="prefetch" href="/assets/js/54.56dd39fd.js"><link rel="prefetch" href="/assets/js/55.59d3c972.js"><link rel="prefetch" href="/assets/js/56.e8d448dc.js"><link rel="prefetch" href="/assets/js/57.b25a333a.js"><link rel="prefetch" href="/assets/js/58.3a58c623.js"><link rel="prefetch" href="/assets/js/59.d45955ca.js"><link rel="prefetch" href="/assets/js/6.c76c0e1e.js"><link rel="prefetch" href="/assets/js/60.70ea5158.js"><link rel="prefetch" href="/assets/js/61.39efc969.js"><link rel="prefetch" href="/assets/js/62.492b7cb3.js"><link rel="prefetch" href="/assets/js/63.c955736f.js"><link rel="prefetch" href="/assets/js/64.7249d228.js"><link rel="prefetch" href="/assets/js/65.df7d1f53.js"><link rel="prefetch" href="/assets/js/66.0993568b.js"><link rel="prefetch" href="/assets/js/67.ef9dd414.js"><link rel="prefetch" href="/assets/js/68.65bb0d00.js"><link rel="prefetch" href="/assets/js/69.5e0c247c.js"><link rel="prefetch" href="/assets/js/7.96bc15e3.js"><link rel="prefetch" href="/assets/js/70.f563832a.js"><link rel="prefetch" href="/assets/js/71.f9db52a9.js"><link rel="prefetch" href="/assets/js/72.704dde50.js"><link rel="prefetch" href="/assets/js/73.f196359d.js"><link rel="prefetch" href="/assets/js/74.616d3b86.js"><link rel="prefetch" href="/assets/js/75.8a040688.js"><link rel="prefetch" href="/assets/js/76.bb1c773f.js"><link rel="prefetch" href="/assets/js/77.764a298e.js"><link rel="prefetch" href="/assets/js/78.7a1fb4f4.js"><link rel="prefetch" href="/assets/js/79.6c2f29c0.js"><link rel="prefetch" href="/assets/js/8.f652ff79.js"><link rel="prefetch" href="/assets/js/80.2d0b63c6.js"><link rel="prefetch" href="/assets/js/81.3aa6d63c.js"><link rel="prefetch" href="/assets/js/82.26b67013.js"><link rel="prefetch" href="/assets/js/84.c2c2bb57.js"><link rel="prefetch" href="/assets/js/85.529d11ae.js"><link rel="prefetch" href="/assets/js/86.4c1e0495.js"><link rel="prefetch" href="/assets/js/87.fd3ba140.js"><link rel="prefetch" href="/assets/js/88.bda10190.js"><link rel="prefetch" href="/assets/js/89.adb017da.js"><link rel="prefetch" href="/assets/js/9.6b06aa53.js"><link rel="prefetch" href="/assets/js/90.a8757e00.js"><link rel="prefetch" href="/assets/js/91.a492ff4f.js"><link rel="prefetch" href="/assets/js/92.c6410bf2.js"><link rel="prefetch" href="/assets/js/93.5ec8e566.js"><link rel="prefetch" href="/assets/js/94.a0e9ad4f.js"><link rel="prefetch" href="/assets/js/95.3010b85f.js"><link rel="prefetch" href="/assets/js/96.99ce2ecd.js"><link rel="prefetch" href="/assets/js/97.91811599.js"><link rel="prefetch" href="/assets/js/98.3becd40f.js"><link rel="prefetch" href="/assets/js/99.a166247a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.fad71e8e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">文档搬运工</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/feds.html" class="nav-link">
  前端导航
</a></li><li class="dropdown-item"><!----> <a href="/frontend/css.html" class="nav-link">
  CSS3
</a></li><li class="dropdown-item"><!----> <a href="/frontend/electron.html" class="nav-link">
  Electron
</a></li><li class="dropdown-item"><!----> <a href="/frontend/es6.html" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/frontend/styled-components.html" class="nav-link">
  Styled Components
</a></li><li class="dropdown-item"><!----> <a href="/frontend/stylus.html" class="nav-link">
  Stylus
</a></li><li class="dropdown-item"><!----> <a href="/frontend/sass.html" class="nav-link">
  Sass
</a></li><li class="dropdown-item"><!----> <a href="/frontend/html.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/frontend/javascript.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/frontend/jquery.html" class="nav-link">
  jQuery
</a></li><li class="dropdown-item"><!----> <a href="/frontend/lessjs.html" class="nav-link">
  Less
</a></li><li class="dropdown-item"><!----> <a href="/frontend/nextjs.html" class="nav-link">
  Next
</a></li><li class="dropdown-item"><!----> <a href="/frontend/react.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/frontend/reactrouter.html" class="nav-link">
  React Router
</a></li><li class="dropdown-item"><!----> <a href="/frontend/react-native.html" class="nav-link">
  React Native
</a></li><li class="dropdown-item"><!----> <a href="/frontend/regex.html" class="nav-link">
  Regex 正则表达式
</a></li><li class="dropdown-item"><!----> <a href="/frontend/typescript.html" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/frontend/tailwindcss.html" class="nav-link">
  Tailwind CSS
</a></li><li class="dropdown-item"><!----> <a href="/frontend/vue2.html" class="nav-link">
  Vue2
</a></li><li class="dropdown-item"><!----> <a href="/frontend/vue.html" class="nav-link">
  Vue3
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程" class="dropdown-title"><span class="title">编程</span> <span class="arrow down"></span></button> <button type="button" aria-label="编程" class="mobile-dropdown-title"><span class="title">编程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/program/bash.html" class="nav-link">
  Bash
</a></li><li class="dropdown-item"><!----> <a href="/program/c.html" class="nav-link">
  C
</a></li><li class="dropdown-item"><!----> <a href="/program/cpp.html" class="nav-link">
  C++
</a></li><li class="dropdown-item"><!----> <a href="/program/dart.html" class="nav-link">
  Dart
</a></li><li class="dropdown-item"><!----> <a href="/program/docker.html" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/program/flutter.html" class="nav-link">
  Flutter
</a></li><li class="dropdown-item"><!----> <a href="/program/golang.html" class="nav-link">
  Golang
</a></li><li class="dropdown-item"><!----> <a href="/program/graphql.html" class="nav-link">
  GraphQL
</a></li><li class="dropdown-item"><!----> <a href="/program/java.html" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/program/json.html" class="nav-link">
  JSON
</a></li><li class="dropdown-item"><!----> <a href="/program/kubernetes.html" class="nav-link">
  Kubernetes
</a></li><li class="dropdown-item"><!----> <a href="/program/markdown.html" class="nav-link">
  Markdown
</a></li><li class="dropdown-item"><!----> <a href="/program/matlab.html" class="nav-link">
  MATLAB
</a></li><li class="dropdown-item"><!----> <a href="/program/php.html" class="nav-link">
  PHP
</a></li><li class="dropdown-item"><!----> <a href="/program/python.html" class="nav-link">
  Python
</a></li><li class="dropdown-item"><!----> <a href="/program/ruby.html" class="nav-link">
  Ruby
</a></li><li class="dropdown-item"><!----> <a href="/program/rust.html" class="nav-link">
  Rust
</a></li><li class="dropdown-item"><!----> <a href="/program/swift.html" class="nav-link">
  Swift
</a></li><li class="dropdown-item"><!----> <a href="/program/swiftui.html" class="nav-link">
  SwiftUI
</a></li><li class="dropdown-item"><!----> <a href="/program/yaml.html" class="nav-link">
  YAML
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Nodejs" class="dropdown-title"><span class="title">Nodejs</span> <span class="arrow down"></span></button> <button type="button" aria-label="Nodejs" class="mobile-dropdown-title"><span class="title">Nodejs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/nodejs/expressjs.html" class="nav-link">
  Express.js
</a></li><li class="dropdown-item"><!----> <a href="/nodejs/jest.html" class="nav-link">
  Jest
</a></li><li class="dropdown-item"><!----> <a href="/nodejs/koajs.html" class="nav-link">
  Koa.js
</a></li><li class="dropdown-item"><!----> <a href="/nodejs/lerna.html" class="nav-link">
  Lerna
</a></li><li class="dropdown-item"><!----> <a href="/nodejs/npm.html" class="nav-link">
  npm
</a></li><li class="dropdown-item"><!----> <a href="/nodejs/nestjs.html" class="nav-link">
  NestJS
</a></li><li class="dropdown-item"><!----> <a href="/nodejs/pm2.html" class="nav-link">
  PM2
</a></li><li class="dropdown-item"><!----> <a href="/nodejs/package.json.html" class="nav-link">
  Package.json
</a></li><li class="dropdown-item"><!----> <a href="/nodejs/yarn.html" class="nav-link">
  Yarn
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title">工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具" class="mobile-dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool/emacs.html" class="nav-link">
  Emacs
</a></li><li class="dropdown-item"><!----> <a href="/tool/github.html" class="nav-link">
  Github
</a></li><li class="dropdown-item"><!----> <a href="/tool/nginx.html" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/tool/semver.html" class="nav-link">
  Semver
</a></li><li class="dropdown-item"><!----> <a href="/tool/vim.html" class="nav-link">
  Vim
</a></li><li class="dropdown-item"><!----> <a href="/tool/xpath.html" class="nav-link">
  XPath
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="命令" class="dropdown-title"><span class="title">命令</span> <span class="arrow down"></span></button> <button type="button" aria-label="命令" class="mobile-dropdown-title"><span class="title">命令</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/command/adb.html" class="nav-link">
  ADB, Android Debug Bridge
</a></li><li class="dropdown-item"><!----> <a href="/command/conan.html" class="nav-link">
  Conan
</a></li><li class="dropdown-item"><!----> <a href="/command/conda.html" class="nav-link">
  Conda
</a></li><li class="dropdown-item"><!----> <a href="/command/cocoapods.html" class="nav-link">
  CocoaPods
</a></li><li class="dropdown-item"><!----> <a href="/command/cargo.html" class="nav-link">
  Cargo
</a></li><li class="dropdown-item"><!----> <a href="/command/curl.html" class="nav-link">
  Curl
</a></li><li class="dropdown-item"><!----> <a href="/command/chmod.html" class="nav-link">
  Chmod
</a></li><li class="dropdown-item"><!----> <a href="/command/cron.html" class="nav-link">
  Cron
</a></li><li class="dropdown-item"><!----> <a href="/command/cmake.html" class="nav-link">
  CMake
</a></li><li class="dropdown-item"><!----> <a href="/command/make.html" class="nav-link">
  Make
</a></li><li class="dropdown-item"><!----> <a href="/command/git.html" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/command/grep.html" class="nav-link">
  Grep
</a></li><li class="dropdown-item"><!----> <a href="/command/find.html" class="nav-link">
  Find
</a></li><li class="dropdown-item"><!----> <a href="/command/ffmpeg.html" class="nav-link">
  FFmpeg
</a></li><li class="dropdown-item"><!----> <a href="/command/htop.html" class="nav-link">
  Htop
</a></li><li class="dropdown-item"><!----> <a href="/command/homebrew.html" class="nav-link">
  Homebrew
</a></li><li class="dropdown-item"><!----> <a href="/command/netstat.html" class="nav-link">
  Netstat
</a></li><li class="dropdown-item"><!----> <a href="/command/iptables.html" class="nav-link">
  iptables
</a></li><li class="dropdown-item"><!----> <a href="/command/jq.html" class="nav-link">
  jq
</a></li><li class="dropdown-item"><!----> <a href="/command/justfile.html" class="nav-link">
  Justfile
</a></li><li class="dropdown-item"><!----> <a href="/command/lsof.html" class="nav-link">
  Lsof
</a></li><li class="dropdown-item"><!----> <a href="/command/mitmproxy.html" class="nav-link">
  Mitmproxy
</a></li><li class="dropdown-item"><!----> <a href="/command/netcat.html" class="nav-link">
  Netcat
</a></li><li class="dropdown-item"><!----> <a href="/command/sed.html" class="nav-link">
  Sed
</a></li><li class="dropdown-item"><!----> <a href="/command/openssl.html" class="nav-link">
  OpenSSL
</a></li><li class="dropdown-item"><!----> <a href="/command/ps.html" class="nav-link">
  ps
</a></li><li class="dropdown-item"><!----> <a href="/command/systemd.html" class="nav-link">
  Systemd
</a></li><li class="dropdown-item"><!----> <a href="/command/ssh.html" class="nav-link">
  SSH
</a></li><li class="dropdown-item"><!----> <a href="/command/screen.html" class="nav-link">
  Screen
</a></li><li class="dropdown-item"><!----> <a href="/command/yum.html" class="nav-link">
  YUM
</a></li><li class="dropdown-item"><!----> <a href="/command/cmd.html" class="nav-link">
  CMD
</a></li><li class="dropdown-item"><!----> <a href="/command/zip.html" class="nav-link">
  Zip
</a></li><li class="dropdown-item"><!----> <a href="/command/apt.html" class="nav-link">
  APT
</a></li><li class="dropdown-item"><!----> <a href="/command/tar.html" class="nav-link">
  tar
</a></li><li class="dropdown-item"><!----> <a href="/command/linux-command.html" class="nav-link">
  Linux Command
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/database/mysql.html" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/database/mongodb.html" class="nav-link">
  MongoDB
</a></li><li class="dropdown-item"><!----> <a href="/database/oracle.html" class="nav-link">
  Oracle
</a></li><li class="dropdown-item"><!----> <a href="/database/postgres.html" class="nav-link">
  PostgreSQL
</a></li><li class="dropdown-item"><!----> <a href="/database/redis.html" class="nav-link">
  Redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="快捷键" class="dropdown-title"><span class="title">快捷键</span> <span class="arrow down"></span></button> <button type="button" aria-label="快捷键" class="mobile-dropdown-title"><span class="title">快捷键</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/quicklink/adobe-lightroom.html" class="nav-link">
  Adobe Lightroom
</a></li><li class="dropdown-item"><!----> <a href="/quicklink/adobe-photoshop.html" class="nav-link">
  Adobe Photoshop
</a></li><li class="dropdown-item"><!----> <a href="/quicklink/adobe-xd.html" class="nav-link">
  Adobe XD
</a></li><li class="dropdown-item"><!----> <a href="/quicklink/android-studio.html" class="nav-link">
  Android Studio
</a></li><li class="dropdown-item"><!----> <a href="/quicklink/firefox.html" class="nav-link">
  Firefox
</a></li><li class="dropdown-item"><!----> <a href="/quicklink/gmail.html" class="nav-link">
  Gmail
</a></li><li class="dropdown-item"><!----> <a href="/quicklink/gitlab.html" class="nav-link">
  Gitlab
</a></li><li class="dropdown-item"><!----> <a href="/quicklink/google-chrome.html" class="nav-link">
  Google Chrome
</a></li><li class="dropdown-item"><!----> <a href="/quicklink/intelli-j-idea.html" class="nav-link">
  IntelliJ IDEA
</a></li><li class="dropdown-item"><!----> <a href="/quicklink/pycharm.html" class="nav-link">
  PyCharm
</a></li><li class="dropdown-item"><!----> <a href="/quicklink/sketch.html" class="nav-link">
  Sketch
</a></li><li class="dropdown-item"><!----> <a href="/quicklink/sublime-text.html" class="nav-link">
  Sublime Text
</a></li><li class="dropdown-item"><!----> <a href="/quicklink/vscode.html" class="nav-link">
  VSCode
</a></li><li class="dropdown-item"><!----> <a href="/quicklink/webstorm.html" class="nav-link">
  WebStorm
</a></li><li class="dropdown-item"><!----> <a href="/quicklink/xcode.html" class="nav-link">
  Xcode
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其它" class="dropdown-title"><span class="title">其它</span> <span class="arrow down"></span></button> <button type="button" aria-label="其它" class="mobile-dropdown-title"><span class="title">其它</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/aspect-ratio.html" class="nav-link">
  Aspect Ratio
</a></li><li class="dropdown-item"><!----> <a href="/other/github-actions.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Github Actions
</a></li><li class="dropdown-item"><!----> <a href="/other/gitlab-ci.html" class="nav-link">
  Gitlab CI/CD
</a></li><li class="dropdown-item"><!----> <a href="/other/colors-named.html" class="nav-link">
  Colors Named
</a></li><li class="dropdown-item"><!----> <a href="/other/http-status-code.html" class="nav-link">
  HTTP 状态码
</a></li><li class="dropdown-item"><!----> <a href="/other/html-char.html" class="nav-link">
  HTML 字符实体
</a></li><li class="dropdown-item"><!----> <a href="/other/iso-639-1.html" class="nav-link">
  ISO 639-1 Language Code
</a></li><li class="dropdown-item"><!----> <a href="/other/emoji.html" class="nav-link">
  Emoji
</a></li><li class="dropdown-item"><!----> <a href="/other/mime.html" class="nav-link">
  MIME types
</a></li><li class="dropdown-item"><!----> <a href="/other/resolutions.html" class="nav-link">
  Resolutions
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/feds.html" class="nav-link">
  前端导航
</a></li><li class="dropdown-item"><!----> <a href="/frontend/css.html" class="nav-link">
  CSS3
</a></li><li class="dropdown-item"><!----> <a href="/frontend/electron.html" class="nav-link">
  Electron
</a></li><li class="dropdown-item"><!----> <a href="/frontend/es6.html" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/frontend/styled-components.html" class="nav-link">
  Styled Components
</a></li><li class="dropdown-item"><!----> <a href="/frontend/stylus.html" class="nav-link">
  Stylus
</a></li><li class="dropdown-item"><!----> <a href="/frontend/sass.html" class="nav-link">
  Sass
</a></li><li class="dropdown-item"><!----> <a href="/frontend/html.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/frontend/javascript.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/frontend/jquery.html" class="nav-link">
  jQuery
</a></li><li class="dropdown-item"><!----> <a href="/frontend/lessjs.html" class="nav-link">
  Less
</a></li><li class="dropdown-item"><!----> <a href="/frontend/nextjs.html" class="nav-link">
  Next
</a></li><li class="dropdown-item"><!----> <a href="/frontend/react.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/frontend/reactrouter.html" class="nav-link">
  React Router
</a></li><li class="dropdown-item"><!----> <a href="/frontend/react-native.html" class="nav-link">
  React Native
</a></li><li class="dropdown-item"><!----> <a href="/frontend/regex.html" class="nav-link">
  Regex 正则表达式
</a></li><li class="dropdown-item"><!----> <a href="/frontend/typescript.html" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/frontend/tailwindcss.html" class="nav-link">
  Tailwind CSS
</a></li><li class="dropdown-item"><!----> <a href="/frontend/vue2.html" class="nav-link">
  Vue2
</a></li><li class="dropdown-item"><!----> <a href="/frontend/vue.html" class="nav-link">
  Vue3
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程" class="dropdown-title"><span class="title">编程</span> <span class="arrow down"></span></button> <button type="button" aria-label="编程" class="mobile-dropdown-title"><span class="title">编程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/program/bash.html" class="nav-link">
  Bash
</a></li><li class="dropdown-item"><!----> <a href="/program/c.html" class="nav-link">
  C
</a></li><li class="dropdown-item"><!----> <a href="/program/cpp.html" class="nav-link">
  C++
</a></li><li class="dropdown-item"><!----> <a href="/program/dart.html" class="nav-link">
  Dart
</a></li><li class="dropdown-item"><!----> <a href="/program/docker.html" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/program/flutter.html" class="nav-link">
  Flutter
</a></li><li class="dropdown-item"><!----> <a href="/program/golang.html" class="nav-link">
  Golang
</a></li><li class="dropdown-item"><!----> <a href="/program/graphql.html" class="nav-link">
  GraphQL
</a></li><li class="dropdown-item"><!----> <a href="/program/java.html" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/program/json.html" class="nav-link">
  JSON
</a></li><li class="dropdown-item"><!----> <a href="/program/kubernetes.html" class="nav-link">
  Kubernetes
</a></li><li class="dropdown-item"><!----> <a href="/program/markdown.html" class="nav-link">
  Markdown
</a></li><li class="dropdown-item"><!----> <a href="/program/matlab.html" class="nav-link">
  MATLAB
</a></li><li class="dropdown-item"><!----> <a href="/program/php.html" class="nav-link">
  PHP
</a></li><li class="dropdown-item"><!----> <a href="/program/python.html" class="nav-link">
  Python
</a></li><li class="dropdown-item"><!----> <a href="/program/ruby.html" class="nav-link">
  Ruby
</a></li><li class="dropdown-item"><!----> <a href="/program/rust.html" class="nav-link">
  Rust
</a></li><li class="dropdown-item"><!----> <a href="/program/swift.html" class="nav-link">
  Swift
</a></li><li class="dropdown-item"><!----> <a href="/program/swiftui.html" class="nav-link">
  SwiftUI
</a></li><li class="dropdown-item"><!----> <a href="/program/yaml.html" class="nav-link">
  YAML
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Nodejs" class="dropdown-title"><span class="title">Nodejs</span> <span class="arrow down"></span></button> <button type="button" aria-label="Nodejs" class="mobile-dropdown-title"><span class="title">Nodejs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/nodejs/expressjs.html" class="nav-link">
  Express.js
</a></li><li class="dropdown-item"><!----> <a href="/nodejs/jest.html" class="nav-link">
  Jest
</a></li><li class="dropdown-item"><!----> <a href="/nodejs/koajs.html" class="nav-link">
  Koa.js
</a></li><li class="dropdown-item"><!----> <a href="/nodejs/lerna.html" class="nav-link">
  Lerna
</a></li><li class="dropdown-item"><!----> <a href="/nodejs/npm.html" class="nav-link">
  npm
</a></li><li class="dropdown-item"><!----> <a href="/nodejs/nestjs.html" class="nav-link">
  NestJS
</a></li><li class="dropdown-item"><!----> <a href="/nodejs/pm2.html" class="nav-link">
  PM2
</a></li><li class="dropdown-item"><!----> <a href="/nodejs/package.json.html" class="nav-link">
  Package.json
</a></li><li class="dropdown-item"><!----> <a href="/nodejs/yarn.html" class="nav-link">
  Yarn
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title">工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具" class="mobile-dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool/emacs.html" class="nav-link">
  Emacs
</a></li><li class="dropdown-item"><!----> <a href="/tool/github.html" class="nav-link">
  Github
</a></li><li class="dropdown-item"><!----> <a href="/tool/nginx.html" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/tool/semver.html" class="nav-link">
  Semver
</a></li><li class="dropdown-item"><!----> <a href="/tool/vim.html" class="nav-link">
  Vim
</a></li><li class="dropdown-item"><!----> <a href="/tool/xpath.html" class="nav-link">
  XPath
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="命令" class="dropdown-title"><span class="title">命令</span> <span class="arrow down"></span></button> <button type="button" aria-label="命令" class="mobile-dropdown-title"><span class="title">命令</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/command/adb.html" class="nav-link">
  ADB, Android Debug Bridge
</a></li><li class="dropdown-item"><!----> <a href="/command/conan.html" class="nav-link">
  Conan
</a></li><li class="dropdown-item"><!----> <a href="/command/conda.html" class="nav-link">
  Conda
</a></li><li class="dropdown-item"><!----> <a href="/command/cocoapods.html" class="nav-link">
  CocoaPods
</a></li><li class="dropdown-item"><!----> <a href="/command/cargo.html" class="nav-link">
  Cargo
</a></li><li class="dropdown-item"><!----> <a href="/command/curl.html" class="nav-link">
  Curl
</a></li><li class="dropdown-item"><!----> <a href="/command/chmod.html" class="nav-link">
  Chmod
</a></li><li class="dropdown-item"><!----> <a href="/command/cron.html" class="nav-link">
  Cron
</a></li><li class="dropdown-item"><!----> <a href="/command/cmake.html" class="nav-link">
  CMake
</a></li><li class="dropdown-item"><!----> <a href="/command/make.html" class="nav-link">
  Make
</a></li><li class="dropdown-item"><!----> <a href="/command/git.html" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/command/grep.html" class="nav-link">
  Grep
</a></li><li class="dropdown-item"><!----> <a href="/command/find.html" class="nav-link">
  Find
</a></li><li class="dropdown-item"><!----> <a href="/command/ffmpeg.html" class="nav-link">
  FFmpeg
</a></li><li class="dropdown-item"><!----> <a href="/command/htop.html" class="nav-link">
  Htop
</a></li><li class="dropdown-item"><!----> <a href="/command/homebrew.html" class="nav-link">
  Homebrew
</a></li><li class="dropdown-item"><!----> <a href="/command/netstat.html" class="nav-link">
  Netstat
</a></li><li class="dropdown-item"><!----> <a href="/command/iptables.html" class="nav-link">
  iptables
</a></li><li class="dropdown-item"><!----> <a href="/command/jq.html" class="nav-link">
  jq
</a></li><li class="dropdown-item"><!----> <a href="/command/justfile.html" class="nav-link">
  Justfile
</a></li><li class="dropdown-item"><!----> <a href="/command/lsof.html" class="nav-link">
  Lsof
</a></li><li class="dropdown-item"><!----> <a href="/command/mitmproxy.html" class="nav-link">
  Mitmproxy
</a></li><li class="dropdown-item"><!----> <a href="/command/netcat.html" class="nav-link">
  Netcat
</a></li><li class="dropdown-item"><!----> <a href="/command/sed.html" class="nav-link">
  Sed
</a></li><li class="dropdown-item"><!----> <a href="/command/openssl.html" class="nav-link">
  OpenSSL
</a></li><li class="dropdown-item"><!----> <a href="/command/ps.html" class="nav-link">
  ps
</a></li><li class="dropdown-item"><!----> <a href="/command/systemd.html" class="nav-link">
  Systemd
</a></li><li class="dropdown-item"><!----> <a href="/command/ssh.html" class="nav-link">
  SSH
</a></li><li class="dropdown-item"><!----> <a href="/command/screen.html" class="nav-link">
  Screen
</a></li><li class="dropdown-item"><!----> <a href="/command/yum.html" class="nav-link">
  YUM
</a></li><li class="dropdown-item"><!----> <a href="/command/cmd.html" class="nav-link">
  CMD
</a></li><li class="dropdown-item"><!----> <a href="/command/zip.html" class="nav-link">
  Zip
</a></li><li class="dropdown-item"><!----> <a href="/command/apt.html" class="nav-link">
  APT
</a></li><li class="dropdown-item"><!----> <a href="/command/tar.html" class="nav-link">
  tar
</a></li><li class="dropdown-item"><!----> <a href="/command/linux-command.html" class="nav-link">
  Linux Command
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/database/mysql.html" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/database/mongodb.html" class="nav-link">
  MongoDB
</a></li><li class="dropdown-item"><!----> <a href="/database/oracle.html" class="nav-link">
  Oracle
</a></li><li class="dropdown-item"><!----> <a href="/database/postgres.html" class="nav-link">
  PostgreSQL
</a></li><li class="dropdown-item"><!----> <a href="/database/redis.html" class="nav-link">
  Redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="快捷键" class="dropdown-title"><span class="title">快捷键</span> <span class="arrow down"></span></button> <button type="button" aria-label="快捷键" class="mobile-dropdown-title"><span class="title">快捷键</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/quicklink/adobe-lightroom.html" class="nav-link">
  Adobe Lightroom
</a></li><li class="dropdown-item"><!----> <a href="/quicklink/adobe-photoshop.html" class="nav-link">
  Adobe Photoshop
</a></li><li class="dropdown-item"><!----> <a href="/quicklink/adobe-xd.html" class="nav-link">
  Adobe XD
</a></li><li class="dropdown-item"><!----> <a href="/quicklink/android-studio.html" class="nav-link">
  Android Studio
</a></li><li class="dropdown-item"><!----> <a href="/quicklink/firefox.html" class="nav-link">
  Firefox
</a></li><li class="dropdown-item"><!----> <a href="/quicklink/gmail.html" class="nav-link">
  Gmail
</a></li><li class="dropdown-item"><!----> <a href="/quicklink/gitlab.html" class="nav-link">
  Gitlab
</a></li><li class="dropdown-item"><!----> <a href="/quicklink/google-chrome.html" class="nav-link">
  Google Chrome
</a></li><li class="dropdown-item"><!----> <a href="/quicklink/intelli-j-idea.html" class="nav-link">
  IntelliJ IDEA
</a></li><li class="dropdown-item"><!----> <a href="/quicklink/pycharm.html" class="nav-link">
  PyCharm
</a></li><li class="dropdown-item"><!----> <a href="/quicklink/sketch.html" class="nav-link">
  Sketch
</a></li><li class="dropdown-item"><!----> <a href="/quicklink/sublime-text.html" class="nav-link">
  Sublime Text
</a></li><li class="dropdown-item"><!----> <a href="/quicklink/vscode.html" class="nav-link">
  VSCode
</a></li><li class="dropdown-item"><!----> <a href="/quicklink/webstorm.html" class="nav-link">
  WebStorm
</a></li><li class="dropdown-item"><!----> <a href="/quicklink/xcode.html" class="nav-link">
  Xcode
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其它" class="dropdown-title"><span class="title">其它</span> <span class="arrow down"></span></button> <button type="button" aria-label="其它" class="mobile-dropdown-title"><span class="title">其它</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/aspect-ratio.html" class="nav-link">
  Aspect Ratio
</a></li><li class="dropdown-item"><!----> <a href="/other/github-actions.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Github Actions
</a></li><li class="dropdown-item"><!----> <a href="/other/gitlab-ci.html" class="nav-link">
  Gitlab CI/CD
</a></li><li class="dropdown-item"><!----> <a href="/other/colors-named.html" class="nav-link">
  Colors Named
</a></li><li class="dropdown-item"><!----> <a href="/other/http-status-code.html" class="nav-link">
  HTTP 状态码
</a></li><li class="dropdown-item"><!----> <a href="/other/html-char.html" class="nav-link">
  HTML 字符实体
</a></li><li class="dropdown-item"><!----> <a href="/other/iso-639-1.html" class="nav-link">
  ISO 639-1 Language Code
</a></li><li class="dropdown-item"><!----> <a href="/other/emoji.html" class="nav-link">
  Emoji
</a></li><li class="dropdown-item"><!----> <a href="/other/mime.html" class="nav-link">
  MIME types
</a></li><li class="dropdown-item"><!----> <a href="/other/resolutions.html" class="nav-link">
  Resolutions
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/other/github-actions.html#入门" class="sidebar-link">入门</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/other/github-actions.html#介绍" class="sidebar-link">介绍</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#配置文件" class="sidebar-link">配置文件</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#指定触发" class="sidebar-link">指定触发</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#多项任务" class="sidebar-link">多项任务</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#多项任务依赖关系" class="sidebar-link">多项任务依赖关系</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#多项任务传递参数" class="sidebar-link">多项任务传递参数</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#指定每项任务的虚拟机环境" class="sidebar-link">指定每项任务的虚拟机环境</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#指定每项任务的步骤" class="sidebar-link">指定每项任务的步骤</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#环境变量" class="sidebar-link">环境变量</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#表达式" class="sidebar-link">表达式</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#github-上下文" class="sidebar-link">Github 上下文</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#默认环境变量" class="sidebar-link">默认环境变量</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#直接常量" class="sidebar-link">直接常量</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#函数-contains" class="sidebar-link">函数 contains</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#函数-startswith" class="sidebar-link">函数 startsWith</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#函数-format" class="sidebar-link">函数 format</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#函数-join" class="sidebar-link">函数 join</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#函数-tojson" class="sidebar-link">函数 toJSON</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#函数" class="sidebar-link">函数</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#函数-success" class="sidebar-link">函数 success()</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#函数-failure" class="sidebar-link">函数 failure()</a></li></ul></li><li><a href="/other/github-actions.html#常用实例" class="sidebar-link">常用实例</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/other/github-actions.html#获取版本信息" class="sidebar-link">获取版本信息</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#提交到-gh-pages-分支" class="sidebar-link">提交到 gh-pages 分支</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#修改-package-json" class="sidebar-link">修改 package.json</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#克隆带有-submodule-的仓库" class="sidebar-link">克隆带有 Submodule 的仓库</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#步骤依赖作业" class="sidebar-link">步骤依赖作业</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#同步-gitee" class="sidebar-link">同步 Gitee</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#提交-npm-包" class="sidebar-link">提交 NPM 包</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#步骤作业文件共享" class="sidebar-link">步骤作业文件共享</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#node-js" class="sidebar-link">Node.js</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#提交-docker-镜像" class="sidebar-link">提交 docker 镜像</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#创建一个-tag" class="sidebar-link">创建一个 tag</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#生成-git-提交日志" class="sidebar-link">生成 git 提交日志</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#提交到-github-docker-镜像仓库" class="sidebar-link">提交到 GitHub docker 镜像仓库</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#提交-commit-到-master-分支" class="sidebar-link">提交 commit 到 master 分支</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#作业之间共享数据" class="sidebar-link">作业之间共享数据</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#指定运行命令的工作目录" class="sidebar-link">指定运行命令的工作目录</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#jobs-job-id-steps-shell" class="sidebar-link">jobs..steps[*].shell</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#一些-actions-推荐" class="sidebar-link">一些 actions 推荐</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#在-github-中创建-docker-镜像" class="sidebar-link">在 Github 中创建 Docker 镜像</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#在-docker-hub-中创建-docker-镜像" class="sidebar-link">在 Docker Hub 中创建 Docker 镜像</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#检查签出仓库并安装-nodejs" class="sidebar-link">检查签出仓库并安装 nodejs</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#生成贡献者头像列表" class="sidebar-link">生成贡献者头像列表</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#忽略失败" class="sidebar-link">忽略失败</a></li></ul></li><li><a href="/other/github-actions.html#gitlab-ci-cd-迁移到-github-actions" class="sidebar-link">GitLab CI/CD 迁移到 GitHub Actions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/other/github-actions.html#语法示例" class="sidebar-link">语法示例</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#运行程序" class="sidebar-link">运行程序</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#docker-映像" class="sidebar-link">Docker 映像</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#条件和表达式语法" class="sidebar-link">条件和表达式语法</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#artifacts" class="sidebar-link">Artifacts</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#作业之间的依赖关系" class="sidebar-link">作业之间的依赖关系</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#缓存" class="sidebar-link">缓存</a></li><li class="sidebar-sub-header"><a href="/other/github-actions.html#数据库和服务容器" class="sidebar-link">数据库和服务容器</a></li></ul></li><li><a href="/other/github-actions.html#另见" class="sidebar-link">另见</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="github-actions-备忘清单"><a href="#github-actions-备忘清单" class="header-anchor">#</a> Github Actions 备忘清单</h1> <p>本备忘单总结了 <a href="https://github.com/actions" target="_blank" rel="noopener noreferrer">Github Actions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 常用的配置说明，以供快速参考。</p> <h2 id="入门"><a href="#入门" class="header-anchor">#</a> 入门</h2> <h3 id="介绍"><a href="#介绍" class="header-anchor">#</a> 介绍</h3> <p>GitHub <a href="https://github.com/actions" target="_blank" rel="noopener noreferrer">Actions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的仓库中自动化、自定义和执行软件开发工作流程，有四个基本的概念，如下：</p> <table><thead><tr><th style="text-align:left;">:-</th> <th style="text-align:left;">:-</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>workflow</code> <em>(工作流程)</em></td> <td style="text-align:left;">持续集成一次运行的过程，就是一个 <code>workflow</code></td></tr> <tr><td style="text-align:left;"><code>job</code> <em>(任务)</em></td> <td style="text-align:left;">一个 <code>workflow</code> 由一个或多个 <code>jobs</code> 构成，含义是一次持续集成的运行，可以完成多个任务</td></tr> <tr><td style="text-align:left;"><code>step</code> <em>(步骤)</em></td> <td style="text-align:left;">每个 <code>job</code> 由多个 <code>step</code> 构成，一步步完成</td></tr> <tr><td style="text-align:left;"><code>action</code> <em>(动作)</em></td> <td style="text-align:left;">每个 <code>step</code> 可以依次执行一个或多个命令(<code>action</code>)</td></tr></tbody></table> <hr> <ul><li>采用 <a href="/other/yaml.html">YAML</a> 格式定义配置文件</li> <li>存放在代码仓库的 <code>.github/workflows</code> 目录中</li> <li>后缀名统一为 <code>.yml</code>，比如 <code>ci.yml</code></li> <li>一个库可以有多个 <code>workflow</code> 文件</li> <li>根据配置事件自动运行配置文件
</li></ul> <h3 id="配置文件"><a href="#配置文件" class="header-anchor">#</a> 配置文件</h3> <div class="language-yaml line-numbers-mode"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br></div><pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span> GitHub Actions Demo
<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> main

<span class="token comment"># 任务</span>
<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">build</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token comment"># 步骤 根据步骤执行任务</span>
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v3
      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>node@v3
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">node-version</span><span class="token punctuation">:</span> <span class="token number">16</span>

      <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> npm install
      <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> npm run build
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>存放到 <code>.github/workflows</code> 目录中，命名为 <code>ci.yml</code>，当 <code>push</code> 代码到仓库 <code>main</code> 分支中，该配置自动运行配置。</p> <h3 id="指定触发"><a href="#指定触发" class="header-anchor">#</a> 指定触发</h3> <p><code>push</code> 事件触发 <code>workflow</code></p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">on</span><span class="token punctuation">:</span> push
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>push</code> 事件或 <code>pull_request</code> 事件都可以触发 <code>workflow</code></p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>push<span class="token punctuation">,</span> pull_request<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>只有在 <code>main</code> 分支 <code>push</code> 事件触发 <code>workflow</code></p> <div class="language-yaml line-numbers-mode"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br><br></div><pre class="language-yaml"><code><span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> main
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>push</code> 事件触发 <code>workflow</code>，<code>docs</code> 目录下的更改 <code>push</code> 事件不触发 <code>workflow</code></p> <div class="language-yaml line-numbers-mode"><div class="highlight-lines"><br><div class="highlighted"> </div><br><div class="highlighted"> </div><br></div><pre class="language-yaml"><code><span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token key atrule">paths-ignore</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">'docs/**'</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>push 事件触发 workflow，包括 sub-project 目录或其子目录中的文件触发 workflow，除非该文件在 sub-project/docs 目录中，不触发 workflow</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">'sub-project/**'</span>
      <span class="token punctuation">-</span> <span class="token string">'!sub-project/docs/**'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>版本发布为 <code>published</code> 时运行工作流程。</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">release</span><span class="token punctuation">:</span>
    <span class="token key atrule">types</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>published<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="多项任务"><a href="#多项任务" class="header-anchor">#</a> 多项任务</h3> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">my_first_job</span><span class="token punctuation">:</span>  <span class="token comment"># 第一个任务</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> My first job

  <span class="token key atrule">my_second_job</span><span class="token punctuation">:</span> <span class="token comment"># 第二个任务</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> My second job
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>通过 jobs <code>(jobs.&lt;job_id&gt;.name)</code>字段，配置一项或多项需要执行的任务</p> <h3 id="多项任务依赖关系"><a href="#多项任务依赖关系" class="header-anchor">#</a> 多项任务依赖关系</h3> <p>通过 needs <code>(jobs.&lt;job_id&gt;.needs)</code>字段，指定当前任务的依赖关系</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">job1</span><span class="token punctuation">:</span>
  <span class="token key atrule">job2</span><span class="token punctuation">:</span>
    <span class="token key atrule">needs</span><span class="token punctuation">:</span> job1
  <span class="token key atrule">job3</span><span class="token punctuation">:</span>
    <span class="token key atrule">needs</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>job1<span class="token punctuation">,</span> job2<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>上面配置中，<code>job1</code> 必须先于 <code>job2</code> 完成，而 <code>job3</code> 等待 <code>job1</code> 和 <code>job2</code> 的完成才能运行。因此，这个 <code>workflow</code> 的运行顺序依次为：<code>job1</code>、<code>job2</code>、<code>job3</code></p> <h3 id="多项任务传递参数"><a href="#多项任务传递参数" class="header-anchor">#</a> 多项任务传递参数</h3> <div class="language-yml line-numbers-mode"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><br><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-yml"><code><span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">job1</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token comment"># 将步骤输出映射到作业输出</span>
    <span class="token key atrule">outputs</span><span class="token punctuation">:</span>
      <span class="token key atrule">output1</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> steps.step1.outputs.test <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token key atrule">output2</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> steps.step2.outputs.test <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> step1
        <span class="token key atrule">run</span><span class="token punctuation">:</span> echo &quot;<span class="token punctuation">:</span><span class="token punctuation">:</span>set<span class="token punctuation">-</span>output name=test<span class="token punctuation">:</span><span class="token punctuation">:</span>hello&quot;
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> step2
        <span class="token key atrule">run</span><span class="token punctuation">:</span> echo &quot;<span class="token punctuation">:</span><span class="token punctuation">:</span>set<span class="token punctuation">-</span>output name=test<span class="token punctuation">:</span><span class="token punctuation">:</span>world&quot;
  <span class="token key atrule">job2</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">needs</span><span class="token punctuation">:</span> job1
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> echo $<span class="token punctuation">{</span><span class="token punctuation">{</span>needs.job1.outputs.output1<span class="token punctuation">}</span><span class="token punctuation">}</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span>needs.job1.outputs.output2<span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="指定每项任务的虚拟机环境"><a href="#指定每项任务的虚拟机环境" class="header-anchor">#</a> 指定每项任务的虚拟机环境</h3> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>指定运行所需要的虚拟机环境，⚠️ 它是必填字段</p> <div class="language-yml line-numbers-mode"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br></div><pre class="language-yml"><code><span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">build</span><span class="token punctuation">:</span> <span class="token comment"># 任务名称</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest <span class="token comment"># 虚拟机环境配置</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><hr> <ul><li><code>Windows Server 2022</code> <em>(windows-latest)</em> 或 <em>(windows-2022)</em></li> <li><code>Ubuntu 20.04</code> <em>(ubuntu-latest)</em> 或 <em>(ubuntu-20.04)</em></li> <li><code>macOS Monterey 12</code> <em>(macos-12)</em></li> <li><code>macOS Big Sur 11</code> <em>(macos-latest)</em>,<em>(macos-11)</em></li></ul> <p>另见: <a href="https://docs.github.com/cn/actions/using-workflows/workflow-syntax-for-github-actions#%E9%80%89%E6%8B%A9-github-%E6%89%98%E7%AE%A1%E7%9A%84%E8%BF%90%E8%A1%8C%E5%99%A8" target="_blank" rel="noopener noreferrer">选择 GitHub 托管的运行器<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="指定每项任务的步骤"><a href="#指定每项任务的步骤" class="header-anchor">#</a> 指定每项任务的步骤</h3> <p>每个步骤都可以指定以下三个字段</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>jobs.<span class="token operator">&lt;</span>job_id<span class="token operator">&gt;</span>.steps.name <span class="token comment"># 步骤名称</span>
<span class="token comment"># 该步骤运行的命令或者 action</span>
jobs.<span class="token operator">&lt;</span>job_id<span class="token operator">&gt;</span>.steps.run
<span class="token comment"># 该步骤所需的环境变量</span>
jobs.<span class="token operator">&lt;</span>job_id<span class="token operator">&gt;</span>.steps.env
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>steps</code> 字段指定每个 <code>Job</code> 的运行步骤，可以包含一个或多个步骤(<code>steps</code>)</p> <div class="language-yml line-numbers-mode"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br></div><pre class="language-yml"><code><span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">build</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v3
      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>node@v3
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">node-version</span><span class="token punctuation">:</span> <span class="token number">16</span>

      <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> npm install
      <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> npm run build
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="环境变量"><a href="#环境变量" class="header-anchor">#</a> 环境变量</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>jobs.<span class="token operator">&lt;</span>job_id<span class="token operator">&gt;</span>.environment
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用单一环境名称的示例</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">environment</span><span class="token punctuation">:</span> staging_environment
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用环境名称和 URL 的示例</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">environment</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> production_environment
  <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//github.com
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="自定义环境变量"><a href="#自定义环境变量" class="header-anchor">#</a> 自定义环境变量</h4> <p><code>GitHub</code> 会保留 <code>GITHUB_</code> 环境变量前缀供 <code>GitHub</code> 内部使用。设置有 <code>GITHUB_</code> 前缀的环境变量或密码将导致错误。</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 测试 nodejs 获取环境变量
  <span class="token key atrule">env</span><span class="token punctuation">:</span>
    <span class="token key atrule">API_TOKEN</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.API_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>在 <code>https://github.com/&lt;用户名&gt;/&lt;项目名称&gt;/settings/secrets</code> 中添加 <code>secrets</code> <code>API_TOKEN</code>，在工作流中设置环境变量 <a href="https://github.com/jaywcjlove/github-actions/blob/799b232fca3d9df0272eaa12610f9ebfca51b288/.github/workflows/ci.yml#L46" target="_blank" rel="noopener noreferrer"><code>API_TOKEN</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="表达式"><a href="#表达式" class="header-anchor">#</a> 表达式</h3> <p>在 <code>if</code> 条件下使用表达式时，可以省略表达式语法 (<code>$</code>)，因为 GitHub 会自动将 <code>if</code> 条件作为表达式求值</p> <div class="language-yml line-numbers-mode"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br></div><pre class="language-yml"><code><span class="token key atrule">steps</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/hello<span class="token punctuation">-</span>world<span class="token punctuation">-</span>action@v1.1
    <span class="token key atrule">if</span><span class="token punctuation">:</span> github.repository == 'uiw/uiw<span class="token punctuation">-</span>repo'
    <span class="token comment"># if: ${{ &lt;expression&gt; }}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>设置环境变量的示例</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">env</span><span class="token punctuation">:</span>
  <span class="token key atrule">MY_ENV_VAR</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> &lt;expression<span class="token punctuation">&gt;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="操作符"><a href="#操作符" class="header-anchor">#</a> 操作符</h4> <ul><li><code>( )</code> <em>(逻辑分组)</em></li> <li><code>[ ]</code> <em>(指数)</em></li> <li><code>.</code> <em>(属性取消引用)</em></li> <li><code>!</code> <em>(不是)</em></li> <li><code>&lt;</code> <em>(少于)</em></li> <li><code>&lt;=</code> <em>(小于或等于)</em></li> <li><code>&gt;</code> <em>(比...更棒)</em></li> <li><code>&gt;=</code> <em>(大于或等于)</em></li> <li><code>==</code> <em>(平等的)</em></li> <li><code>!=</code> <em>(不相等)</em></li> <li><code>&amp;&amp;</code> <em>(和)</em></li> <li><code>||</code> <em>(或者)</em></li></ul> <h3 id="github-上下文"><a href="#github-上下文" class="header-anchor">#</a> Github 上下文</h3> <table><thead><tr><th>属性名称</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>github</code> <em>(object)</em></td> <td>工作流程中任何作业或步骤期间可用的顶层上下文。</td> <td></td></tr> <tr><td><code>github.event</code> <em>(object)</em></td> <td>完整事件 web 挂钩有效负载。 更多信息请参阅“触发工作流程的事件”。</td> <td></td></tr> <tr><td><code>github.event_path</code> <em>(string)</em></td> <td>运行器上完整事件 web 挂钩有效负载的路径。</td> <td></td></tr> <tr><td><code>github.workflow</code> <em>(string)</em></td> <td>工作流程的名称。 如果工作流程文件未指定 name，此属性的值将是仓库中工作流程文件的完整路径。</td> <td></td></tr> <tr><td><code>github.job</code> <em>(string)</em></td> <td>当前作业的 job_id。</td> <td></td></tr> <tr><td><code>github.run_id</code> <em>(string)</em></td> <td>仓库中每个运行的唯一编号。 如果您重新执行工作流程运行，此编号不变。</td> <td></td></tr> <tr><td><code>github.run_number</code> <em>(string)</em></td> <td>仓库中特定工作流程每个运行的唯一编号。 此编号从 1（对应于工作流程的第一个运行）开始，然后随着每个新的运行而递增。 如果您重新执行工作流程运行，此编号不变。</td> <td></td></tr> <tr><td><code>github.actor</code> <em>(string)</em></td> <td>发起工作流程运行的用户的登录名。</td> <td></td></tr> <tr><td><code>github.repository</code> <em>(string)</em></td> <td>所有者和仓库名称。 例如 Codertocat/Hello-World。</td> <td></td></tr> <tr><td><code>github.repository_owner</code> <em>(string)</em></td> <td>仓库所有者的名称。 例如 Codertocat。</td> <td></td></tr> <tr><td><code>github.event_name</code> <em>(string)</em></td> <td>触发工作流程运行的事件的名称。</td> <td></td></tr> <tr><td><code>github.sha</code> <em>(string)</em></td> <td>触发工作流程的提交 SHA。</td> <td></td></tr> <tr><td><code>github.ref</code> <em>(string)</em></td> <td>触发工作流程的分支或标记参考。</td> <td></td></tr> <tr><td><code>github.head_ref</code> <em>(string)</em></td> <td>工作流程运行中拉取请求的 head_ref 或来源分支。 此属性仅在触发工作流程运行的事件为 pull_request 时才可用。</td> <td></td></tr> <tr><td><code>github.base_ref</code> <em>(string)</em></td> <td>工作流程运行中拉取请求的 base_ref 或目标分支。 此属性仅在触发工作流程运行的事件为 pull_request 时才可用。</td> <td></td></tr> <tr><td><code>github.token</code> <em>(string)</em></td> <td>代表仓库上安装的 GitHub 应用程序进行身份验证的令牌。 这在功能上等同于 GITHUB_TOKEN 密码。 更多信息请参阅“使用 GITHUB_TOKEN 验证身份”。</td> <td></td></tr> <tr><td><code>github.workspace</code> <em>(string)</em></td> <td>使用 checkout 操作时步骤的默认工作目录和仓库的默认位置。</td> <td></td></tr> <tr><td><code>github.action</code> <em>(string)</em></td> <td>正在运行的操作的名称。 在当前步骤运行脚本时，GitHub 删除特殊字符或使用名称 run。 如果在同一作业中多次使用相同的操作，则名称将包括带有序列号的后缀。 例如，运行的第一个脚本名称为 run1，则第二个脚本将命名为 run2。 同样，actions/checkout 第二次调用时将变成 actionscheckout2。</td> <td></td></tr></tbody></table> <p><a href="https://help.github.com/cn/actions/reference/context-and-expression-syntax-for-github-actions" target="_blank" rel="noopener noreferrer">Github 上下文<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>是访问有关工作流运行、运行器环境、作业和步骤的信息的一种方式</p> <h3 id="默认环境变量"><a href="#默认环境变量" class="header-anchor">#</a> 默认环境变量</h3> <table><thead><tr><th>环境变量</th> <th>描述</th></tr></thead> <tbody><tr><td><code>CI</code></td> <td>始终设置为 <code>true</code></td></tr> <tr><td><code>HOME</code></td> <td>用于存储用户数据的 GitHub 主目录路径。 例如 <code>/github/home</code></td></tr> <tr><td><code>GITHUB_WORKFLOW</code></td> <td>工作流程的名称。</td></tr> <tr><td><code>GITHUB_RUN_ID</code></td> <td>仓库中每个运行的唯一编号。 如果您重新执行工作流程运行，此编号不变。</td></tr> <tr><td><code>GITHUB_RUN_NUMBER</code></td> <td>仓库中特定工作流程每个运行的唯一编号。 此编号从 1（对应于工作流程的第一个运行）开始，然后随着每个新的运行而递增。 如果您重新执行工作流程运行，此编号不变。</td></tr> <tr><td><code>GITHUB_ACTION</code></td> <td>操作唯一的标识符 (id)。</td></tr> <tr><td><code>GITHUB_ACTIONS</code></td> <td>当 GitHub 操作 运行工作流程时，始终设置为 true。 您可以使用此变量来区分测试是在本地运行还是通过 GitHub 操作 运行。</td></tr> <tr><td><code>GITHUB_ACTION_PATH</code></td> <td>GitHub 操作所在的路径</td></tr> <tr><td><code>GITHUB_ACTOR</code></td> <td>发起工作流程的个人或应用程序的名称。 例如 octocat</td></tr> <tr><td><code>GITHUB_API_URL</code></td> <td>返回 <code>API URL</code>。例如：<code>https://api.github.com</code></td></tr> <tr><td><code>GITHUB_REPOSITORY</code></td> <td>所有者和仓库名称。 例如 octocat/Hello-World</td></tr> <tr><td><code>GITHUB_EVENT_NAME</code></td> <td>触发工作流程的 web 挂钩事件的名称</td></tr> <tr><td><code>GITHUB_EVENT_PATH</code></td> <td>具有完整 web 挂钩事件有效负载的文件路径。 例如 /github/workflow/event.json</td></tr> <tr><td><code>GITHUB_WORKSPACE</code></td> <td>GitHub 工作空间目录路径。 如果您的工作流程使用 <a href="https://github.com/actions/checkout" target="_blank" rel="noopener noreferrer">actions/checkout<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 操作，工作空间目录将包含存储仓库副本的子目录。 如果不使用 <a href="https://github.com/actions/checkout" target="_blank" rel="noopener noreferrer">actions/checkout<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 操作，该目录将为空。 例如 /home</td></tr> <tr><td><code>GITHUB_SHA</code></td> <td>触发工作流程的提交 SHA。 例如 ffac537e6cbbf9</td></tr> <tr><td><code>GITHUB_REF</code></td> <td>触发工作流程的分支或标记参考。 例如 refs/heads/feature-branch-1。 如果分支或标记都不适用于事件类型，则变量不会存在</td></tr> <tr><td><code>GITHUB_HEAD_REF</code></td> <td>仅为复刻的仓库设置。头部仓库的分支</td></tr> <tr><td><code>GITHUB_BASE_REF</code></td> <td>仅为复刻的仓库设置。基础仓库的分支</td></tr></tbody></table> <p>另见: <a href="https://docs.github.com/cn/actions/learn-github-actions/environment-variables#default-environment-variables" target="_blank" rel="noopener noreferrer">默认环境变量<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="直接常量"><a href="#直接常量" class="header-anchor">#</a> 直接常量</h3> <p>作为表达式的一部分，可以使用 <code>boolean</code>, <code>null</code>, <code>number</code> 或 <code>string</code>数据类型</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">env</span><span class="token punctuation">:</span>
  <span class="token key atrule">myNull</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token null important">null</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token key atrule">myBoolean</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token boolean important">false</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token key atrule">myIntegerNumber</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token number">711</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token key atrule">myFloatNumber</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token number">-9.2</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token key atrule">myHexNumber</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token number">0xff</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token key atrule">myExponentialNumber</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token number">-2.99e-2</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token key atrule">myString</span><span class="token punctuation">:</span> Mona the Octocat
  <span class="token key atrule">myStringInBraces</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> 'It''s source<span class="token tag">!'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="函数-contains"><a href="#函数-contains" class="header-anchor">#</a> 函数 contains</h3> <p>使用字符串的示例</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'Hello world'</span><span class="token punctuation">,</span> <span class="token string">'llo'</span><span class="token punctuation">)</span> <span class="token comment">// 返回 true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用对象过滤器的示例返回 true</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">contains</span><span class="token punctuation">(</span>github<span class="token punctuation">.</span>event<span class="token punctuation">.</span>issue<span class="token punctuation">.</span>labels<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">'bug'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div> <p>另见: <a href="https://docs.github.com/cn/actions/learn-github-actions/expressions#contains" target="_blank" rel="noopener noreferrer">函数 contains<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="函数-startswith"><a href="#函数-startswith" class="header-anchor">#</a> 函数 startsWith</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'Hello world'</span><span class="token punctuation">,</span> <span class="token string">'He'</span><span class="token punctuation">)</span> <span class="token comment">// 返回 true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>另见: <a href="https://docs.github.com/cn/actions/learn-github-actions/expressions#startswith" target="_blank" rel="noopener noreferrer">函数 startsWith<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，此函数不区分大小写</p> <h3 id="函数-format"><a href="#函数-format" class="header-anchor">#</a> 函数 format</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'{{Hello {0} {1} {2}!}}'</span><span class="token punctuation">,</span> <span class="token string">'Mona'</span><span class="token punctuation">,</span> <span class="token string">'the'</span><span class="token punctuation">,</span> <span class="token string">'Octocat'</span><span class="token punctuation">)</span>
<span class="token comment">// 返回 '{Hello Mona the Octocat!}'.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div> <p>另见: <a href="https://docs.github.com/cn/actions/learn-github-actions/expressions#format" target="_blank" rel="noopener noreferrer">函数 format<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="函数-join"><a href="#函数-join" class="header-anchor">#</a> 函数 join</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">join</span><span class="token punctuation">(</span>github<span class="token punctuation">.</span>event<span class="token punctuation">.</span>issue<span class="token punctuation">.</span>labels<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">', '</span><span class="token punctuation">)</span>
<span class="token comment">// 也许返回 'bug, help wanted'.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>另见: <a href="https://docs.github.com/cn/actions/learn-github-actions/expressions#join" target="_blank" rel="noopener noreferrer">函数 join<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="函数-tojson"><a href="#函数-tojson" class="header-anchor">#</a> 函数 toJSON</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">toJSON</span><span class="token punctuation">(</span>job<span class="token punctuation">)</span>
<span class="token comment">// 也许返回 { &quot;status&quot;: &quot;Success&quot; }.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>另见: <a href="https://docs.github.com/cn/actions/learn-github-actions/expressions#tojson" target="_blank" rel="noopener noreferrer">函数 toJSON<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="函数"><a href="#函数" class="header-anchor">#</a> 函数</h3> <table><thead><tr><th style="text-align:left;">:-</th> <th style="text-align:left;">:-</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>fromJSON</code></td> <td style="text-align:left;">返回 JSON 对象或 JSON 数据类型的值 <a href="https://docs.github.com/cn/actions/learn-github-actions/expressions#fromjson" target="_blank" rel="noopener noreferrer">#<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr> <tr><td style="text-align:left;"><code>hashFiles</code></td> <td style="text-align:left;">返回与路径模式匹配的文件集的单个哈希 <a href="https://docs.github.com/cn/actions/learn-github-actions/expressions#hashfiles" target="_blank" rel="noopener noreferrer">#<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr> <tr><td style="text-align:left;"><code>success</code></td> <td style="text-align:left;">当前面的步骤都没失败或被取消时返回 true <a href="https://docs.github.com/cn/actions/learn-github-actions/expressions#success" target="_blank" rel="noopener noreferrer">#<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr> <tr><td style="text-align:left;"><code>always</code></td> <td style="text-align:left;">使步骤始终执行，返回 <code>true</code> 即使取消也是如此 <a href="https://docs.github.com/cn/actions/learn-github-actions/expressions#always" target="_blank" rel="noopener noreferrer">#<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr> <tr><td style="text-align:left;"><code>cancelled</code></td> <td style="text-align:left;">如果工作流被取消，则返回 true <a href="https://docs.github.com/cn/actions/learn-github-actions/expressions#cancelled" target="_blank" rel="noopener noreferrer">#<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr> <tr><td style="text-align:left;"><code>failure</code></td> <td style="text-align:left;">当作业的任何先前步骤失败时返回 true <a href="https://docs.github.com/cn/actions/learn-github-actions/expressions#failure" target="_blank" rel="noopener noreferrer">#<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr></tbody></table> <h3 id="函数-success"><a href="#函数-success" class="header-anchor">#</a> 函数 success()</h3> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">steps</span><span class="token punctuation">:</span>
  <span class="token punctuation">...</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 作业已成功
    <span class="token key atrule">if</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> success() <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="函数-failure"><a href="#函数-failure" class="header-anchor">#</a> 函数 failure()</h3> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">steps</span><span class="token punctuation">:</span>
  <span class="token punctuation">...</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 作业失败
    <span class="token key atrule">if</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> failure() <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="常用实例"><a href="#常用实例" class="header-anchor">#</a> 常用实例</h2> <h3 id="获取版本信息"><a href="#获取版本信息" class="header-anchor">#</a> 获取版本信息</h3> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Test
  <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
    # Strip git ref prefix from version
    echo &quot;${{ github.ref }}&quot;
    # VERSION=$(echo &quot;${{ github.ref }}&quot; | sed -e 's,.*/\(.*\),\1,')</span>

    <span class="token comment"># # Strip &quot;v&quot; prefix from tag name</span>
    <span class="token comment"># [[ &quot;${{ github.ref }}&quot; == &quot;refs/tags/&quot;* ]] &amp;&amp; VERSION=$(echo $VERSION | sed -e 's/^v//')</span>
    echo &quot;$VERSION&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div> <h3 id="提交到-gh-pages-分支"><a href="#提交到-gh-pages-分支" class="header-anchor">#</a> 提交到 gh-pages 分支</h3> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy
  <span class="token key atrule">uses</span><span class="token punctuation">:</span> peaceiris/actions<span class="token punctuation">-</span>gh<span class="token punctuation">-</span>pages@v3
  <span class="token key atrule">with</span><span class="token punctuation">:</span>
    <span class="token key atrule">github_token</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span>secrets.GITHUB_TOKEN<span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token key atrule">publish_dir</span><span class="token punctuation">:</span> ./build
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="修改-package-json"><a href="#修改-package-json" class="header-anchor">#</a> 修改 package.json</h3> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Modify Version
  <span class="token key atrule">shell</span><span class="token punctuation">:</span> bash
  <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
    node -e 'var pkg = require(&quot;./package.json&quot;); pkg.version= (new Date().getFullYear().toString().substr(2)) + &quot;.&quot; + (new Date().getMonth() + 1) + &quot;.&quot; + (new Date().getDate()); require(&quot;fs&quot;).writeFileSync(&quot;./package.json&quot;, JSON.stringify(pkg, null, 2))'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div> <p>使用 <a href="https://github.com/jaywcjlove/github-action-package" target="_blank" rel="noopener noreferrer">github-action-package<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 修改 <code>name</code> 字段</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> package.json info
  <span class="token key atrule">uses</span><span class="token punctuation">:</span> jaywcjlove/github<span class="token punctuation">-</span>action<span class="token punctuation">-</span>package@main
  <span class="token key atrule">with</span><span class="token punctuation">:</span>
    <span class="token key atrule">rename</span><span class="token punctuation">:</span> <span class="token string">'@wcj/github-package-test'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="克隆带有-submodule-的仓库"><a href="#克隆带有-submodule-的仓库" class="header-anchor">#</a> 克隆带有 Submodule 的仓库</h3> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Checkout
  <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v3
  <span class="token key atrule">with</span><span class="token punctuation">:</span>
    <span class="token key atrule">path</span><span class="token punctuation">:</span> main
    <span class="token key atrule">submodules</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>submodules</code>：<code>true</code> 检出子模块或 <code>recursive</code> 递归检出子模块</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Clone sub repository
  <span class="token key atrule">shell</span><span class="token punctuation">:</span> bash
  <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
    auth_header=&quot;$(git config --local --get http.https://github.com/.extraheader)&quot;
    # git submodule sync --recursive
    # git -c &quot;http.extraheader=$auth_header&quot; -c protocol.version=2 submodule update --init --remote --force --recursive --checkout ant.design</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="步骤依赖作业"><a href="#步骤依赖作业" class="header-anchor">#</a> 步骤依赖作业</h3> <p>使用 <code>jobs.&lt;job_id&gt;.needs</code> 识别在此作业运行之前必须成功完成的任何作业。它可以是一个字符串，也可以是字符串数组。 如果某个作业失败，则所有需要它的作业都会被跳过，除非这些作业使用让该作业继续的条件表达式。</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">job1</span><span class="token punctuation">:</span>
  <span class="token key atrule">job2</span><span class="token punctuation">:</span>
    <span class="token key atrule">needs</span><span class="token punctuation">:</span> job1
  <span class="token key atrule">job3</span><span class="token punctuation">:</span>
    <span class="token key atrule">needs</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>job1<span class="token punctuation">,</span> job2<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>在此示例中，<code>job1</code> 必须在 <code>job2</code> 开始之前成功完成，而 <code>job3</code> 要等待 <code>job1</code> 和 <code>job2</code> 完成。此示例中的作业按顺序运行：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>❶ job1
❷ job2
❸ job3
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>配置如下</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">job1</span><span class="token punctuation">:</span>
  <span class="token key atrule">job2</span><span class="token punctuation">:</span>
    <span class="token key atrule">needs</span><span class="token punctuation">:</span> job1
  <span class="token key atrule">job3</span><span class="token punctuation">:</span>
    <span class="token key atrule">if</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> always() <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token key atrule">needs</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>job1<span class="token punctuation">,</span> job2<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>在此示例中，<code>job3</code> 使用 <code>always()</code> 条件表达式，因此它始终在 <code>job1</code> 和 <code>job2</code> 完成后运行，不管它们是否成功。</p> <h3 id="同步-gitee"><a href="#同步-gitee" class="header-anchor">#</a> 同步 Gitee</h3> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Sync to Gitee
  <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
    mirror() {
      git clone &quot;https://github.com/$1/$2&quot;
      cd &quot;$2&quot;
      git remote add gitee &quot;https://jaywcjlove:${{ secrets.GITEE_TOKEN }}@gitee.com/uiw/$2&quot;
      git remote set-head origin -d
      git push gitee --prune +refs/remotes/origin/*:refs/heads/* +refs/tags/*:refs/tags/*
      cd ..
    }
    mirror uiwjs uiw</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div> <h3 id="提交-npm-包"><a href="#提交-npm-包" class="header-anchor">#</a> 提交 NPM 包</h3> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> npm publish <span class="token punctuation">-</span><span class="token punctuation">-</span>access public
  <span class="token key atrule">env</span><span class="token punctuation">:</span>
    <span class="token key atrule">NODE_AUTH_TOKEN</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span>secrets.NPM_TOKEN<span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>获取 <code>NPM_TOKEN</code>，可以通过 <a href="https://www.npmjs.com/settings/wcjiang/tokens" target="_blank" rel="noopener noreferrer">npm<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 账号创建 <code>token</code></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> token list <span class="token punctuation">[</span>--json<span class="token operator">|</span>--parseable<span class="token punctuation">]</span> <span class="token comment"># 查看</span>
<span class="token function">npm</span> token create <span class="token punctuation">[</span>--read-only<span class="token punctuation">]</span> <span class="token punctuation">[</span>--cidr<span class="token operator">=</span><span class="token number">1.1</span>.1.1/24,2.2.2.2/16<span class="token punctuation">]</span> <span class="token comment"># 创建</span>
<span class="token function">npm</span> token revoke <span class="token operator">&lt;</span>id<span class="token operator">|</span>token<span class="token operator">&gt;</span> <span class="token comment"># 撤销</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div> <p>可以使用 <a href="https://github.com/JS-DevTools/npm-publish" target="_blank" rel="noopener noreferrer">JS-DevTools/npm-publish<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 提交</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span>  📦 @province<span class="token punctuation">-</span>city<span class="token punctuation">-</span>china/data
  <span class="token key atrule">uses</span><span class="token punctuation">:</span> JS<span class="token punctuation">-</span>DevTools/npm<span class="token punctuation">-</span>publish@v1
  <span class="token key atrule">with</span><span class="token punctuation">:</span>
    <span class="token key atrule">token</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.NPM_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token key atrule">package</span><span class="token punctuation">:</span> packages/data/package.json
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>它有个好处，检测 <code>package.json</code> 中版本号是否发生变更，来决定是否提交版本，不会引发流程错误。</p> <h3 id="步骤作业文件共享"><a href="#步骤作业文件共享" class="header-anchor">#</a> 步骤作业文件共享</h3> <p>Artifacts 是 GitHub Actions 为您提供持久文件并在运行完成后使用它们或在作业（文档）之间共享的一种方式。</p> <p>要创建工件并使用它，您将需要不同的操作：上传和下载。
要上传文件或目录，您只需像这样使用它：</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">steps</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v2
  <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> mkdir <span class="token punctuation">-</span>p path/to/artifact
  <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> echo hello <span class="token punctuation">&gt;</span> path/to/artifact/a.txt
  <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/upload<span class="token punctuation">-</span>artifact@v2
    <span class="token key atrule">with</span><span class="token punctuation">:</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>artifact
      <span class="token key atrule">path</span><span class="token punctuation">:</span> path/to/artifact/a.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>然后下载 <code>artifact</code> 以使用它：</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">steps</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v2
  <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/download<span class="token punctuation">-</span>artifact@v2
    <span class="token key atrule">with</span><span class="token punctuation">:</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>artifact
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="node-js"><a href="#node-js" class="header-anchor">#</a> Node.js</h3> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Setup Node
  <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>node@v2
  <span class="token key atrule">with</span><span class="token punctuation">:</span>
    <span class="token key atrule">node-version</span><span class="token punctuation">:</span> <span class="token number">14</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>使用<a href="https://docs.github.com/cn/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idstrategy" target="_blank" rel="noopener noreferrer">矩阵策略<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 在 nodejs 不同版本中运行</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">strategy</span><span class="token punctuation">:</span>
  <span class="token key atrule">matrix</span><span class="token punctuation">:</span>
    <span class="token key atrule">node-version</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>10.x<span class="token punctuation">,</span> 12.x<span class="token punctuation">,</span> 14.x<span class="token punctuation">]</span>

<span class="token key atrule">steps</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v2
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 使用 Node $<span class="token punctuation">{</span><span class="token punctuation">{</span> matrix.node<span class="token punctuation">-</span>version <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>node@v1
    <span class="token key atrule">with</span><span class="token punctuation">:</span>
      <span class="token key atrule">node-version</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> matrix.node<span class="token punctuation">-</span>version <span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> npm ci
  <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> npm run build <span class="token punctuation">-</span><span class="token punctuation">-</span>if<span class="token punctuation">-</span>present
  <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> npm test
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="提交-docker-镜像"><a href="#提交-docker-镜像" class="header-anchor">#</a> 提交 docker 镜像</h3> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token comment"># https://www.basefactor.com/github-actions-docker</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Docker login
  <span class="token key atrule">run</span><span class="token punctuation">:</span> docker login <span class="token punctuation">-</span>u $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.DOCKER_USER <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token punctuation">-</span>p $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.DOCKER_PASSWORD <span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Build ant.design image
  <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
    cd ./ant\.design
    docker build -t ant.design .</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Tags &amp; Push docs
  <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
    # Strip git ref prefix from version
    VERSION=$(echo &quot;${{ github.ref }}&quot; | sed -e 's,.*/\(.*\),\1,')</span>

    <span class="token comment"># Strip &quot;v&quot; prefix from tag name</span>
    <span class="token punctuation">[</span><span class="token punctuation">[</span> &quot;$<span class="token punctuation">{</span><span class="token punctuation">{</span> github.ref <span class="token punctuation">}</span><span class="token punctuation">}</span>&quot; == &quot;refs/tags/&quot;* <span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token important">&amp;&amp;</span> VERSION=$(echo $VERSION <span class="token punctuation">|</span> sed <span class="token punctuation">-</span>e 's/^v//')

    docker tag ant.design $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.DOCKER_USER <span class="token punctuation">}</span><span class="token punctuation">}</span>/ant.design<span class="token punctuation">:</span>$VERSION
    docker tag ant.design $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.DOCKER_USER <span class="token punctuation">}</span><span class="token punctuation">}</span>/ant.design<span class="token punctuation">:</span>latest
    docker push $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.DOCKER_USER <span class="token punctuation">}</span><span class="token punctuation">}</span>/ant.design<span class="token punctuation">:</span>$VERSION
    docker push $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.DOCKER_USER <span class="token punctuation">}</span><span class="token punctuation">}</span>/ant.design<span class="token punctuation">:</span>latest
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="创建一个-tag"><a href="#创建一个-tag" class="header-anchor">#</a> 创建一个 tag</h3> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Create Tag
  <span class="token key atrule">id</span><span class="token punctuation">:</span> create_tag
  <span class="token key atrule">uses</span><span class="token punctuation">:</span> jaywcjlove/create<span class="token punctuation">-</span>tag<span class="token punctuation">-</span>action@main
  <span class="token key atrule">with</span><span class="token punctuation">:</span>
    <span class="token key atrule">package-path</span><span class="token punctuation">:</span> ./package.json
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>根据 <code>package-path</code> 指定的 <code>package.json</code> 检测 <code>version</code> 是否发生变化来创建 <code>tag</code></p> <h3 id="生成-git-提交日志"><a href="#生成-git-提交日志" class="header-anchor">#</a> 生成 git 提交日志</h3> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Generate Changelog
  <span class="token key atrule">id</span><span class="token punctuation">:</span> changelog
  <span class="token key atrule">uses</span><span class="token punctuation">:</span> jaywcjlove/changelog<span class="token punctuation">-</span>generator@main
  <span class="token key atrule">with</span><span class="token punctuation">:</span>
    <span class="token key atrule">filter-author</span><span class="token punctuation">:</span> (小弟调调™)

<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Get the changelog
  <span class="token key atrule">run</span><span class="token punctuation">:</span> echo &quot;$<span class="token punctuation">{</span><span class="token punctuation">{</span> steps.changelog.outputs.changelog <span class="token punctuation">}</span><span class="token punctuation">}</span>&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div> <h3 id="提交到-github-docker-镜像仓库"><a href="#提交到-github-docker-镜像仓库" class="header-anchor">#</a> 提交到 GitHub docker 镜像仓库</h3> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">'登录到 GitHub 注册表'</span>
  <span class="token key atrule">run</span><span class="token punctuation">:</span> echo $<span class="token punctuation">{</span><span class="token punctuation">{</span> github.token <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token punctuation">|</span> docker login ghcr.io <span class="token punctuation">-</span>u $<span class="token punctuation">{</span><span class="token punctuation">{</span> github.actor <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>password<span class="token punctuation">-</span>stdin

<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">'编译 docker image'</span>
  <span class="token key atrule">run</span><span class="token punctuation">:</span> docker build <span class="token punctuation">-</span>t ghcr.io/jaywcjlove/reference<span class="token punctuation">:</span>latest .

<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">'推送到 GitHub 注册表中'</span>
  <span class="token key atrule">run</span><span class="token punctuation">:</span> docker push ghcr.io/jaywcjlove/reference<span class="token punctuation">:</span>latest

<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">'标记 docker 镜像并发布到 GitHub 注册表'</span>
  <span class="token key atrule">if</span><span class="token punctuation">:</span> steps.create_tag.outputs.successful
  <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
    echo &quot;version: v${{ steps.changelog.outputs.version }}&quot;
    docker tag ghcr.io/jaywcjlove/reference:latest ghcr.io/jaywcjlove/reference:${{steps.changelog.outputs.version}}
    docker push ghcr.io/jaywcjlove/reference:${{steps.changelog.outputs.version}}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="提交-commit-到-master-分支"><a href="#提交-commit-到-master-分支" class="header-anchor">#</a> 提交 commit 到 master 分支</h3> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 生成一个文件，并将它提交到 master 分支
  <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
    # Strip git ref prefix from version
    VERSION=$(echo &quot;${{ github.ref }}&quot; | sed -e 's,.*/\(.*\),\1,')
    COMMIT=released-${VERSION}
    # Strip &quot;v&quot; prefix from tag name
    [[ &quot;${{ github.ref }}&quot; == &quot;refs/tags/&quot;* ]] &amp;&amp; VERSION=$(echo $VERSION | sed -e 's/^v//')
    echo &quot;输出版本号：$VERSION&quot;
    # 将版本输出到当前 VERSION 文件中
    echo &quot;$VERSION&quot; &gt; VERSION
    echo &quot;1. 输出Commit：$commit&quot;
    echo &quot;2. Released $VERSION&quot;
    git fetch
    git config --local user.email &quot;action@github.com&quot;
    git config --local user.name &quot;GitHub Action&quot;
    git add .
    git commit -am $COMMIT
    git branch -av
    git pull origin master</span>

<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 将上面的提交 push 到 master 分支
  <span class="token key atrule">uses</span><span class="token punctuation">:</span> ad<span class="token punctuation">-</span>m/github<span class="token punctuation">-</span>push<span class="token punctuation">-</span>action@master
  <span class="token key atrule">with</span><span class="token punctuation">:</span>
    <span class="token key atrule">github_token</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.GITHUB_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="作业之间共享数据"><a href="#作业之间共享数据" class="header-anchor">#</a> 作业之间共享数据</h3> <p>创建一个文件，然后将其作为构件上传</p> <div class="language-yml line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-yml"><code><span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">example-job</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> Save output
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">shell</span><span class="token punctuation">:</span> bash
        <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
          expr 1 + 1 &gt; output.log</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Upload output file
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/upload<span class="token punctuation">-</span>artifact@v3
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">name</span><span class="token punctuation">:</span> output<span class="token punctuation">-</span>log<span class="token punctuation">-</span>file
          <span class="token key atrule">path</span><span class="token punctuation">:</span> output.log
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>可以下载名为 <code>output-log-file</code> 的工件</p> <div class="language-yml line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><div class="highlighted"> </div><br></div><pre class="language-yml"><code><span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">example-job</span><span class="token punctuation">:</span>
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Download a single artifact
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/download<span class="token punctuation">-</span>artifact@v3
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">name</span><span class="token punctuation">:</span> output<span class="token punctuation">-</span>log<span class="token punctuation">-</span>file
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="指定运行命令的工作目录"><a href="#指定运行命令的工作目录" class="header-anchor">#</a> 指定运行命令的工作目录</h3> <div class="language-yml line-numbers-mode"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br></div><pre class="language-yml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Clean temp directory
  <span class="token key atrule">run</span><span class="token punctuation">:</span> rm <span class="token punctuation">-</span>rf *
  <span class="token key atrule">working-directory</span><span class="token punctuation">:</span> ./temp
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>使用 <code>working-directory</code> 关键字，您可以指定运行命令的工作目录(<code>./temp</code>)</p> <h4 id="defaults-run"><a href="#defaults-run" class="header-anchor">#</a> defaults.run</h4> <div class="language-yml line-numbers-mode"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><div class="highlighted"> </div><br></div><pre class="language-yml"><code><span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">job1</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">defaults</span><span class="token punctuation">:</span>
      <span class="token key atrule">run</span><span class="token punctuation">:</span>
        <span class="token key atrule">shell</span><span class="token punctuation">:</span> bash
        <span class="token key atrule">working-directory</span><span class="token punctuation">:</span> scripts
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>作业中的所有 <code>run</code> 步骤提供默认的 <code>shell</code> 和 <code>working-directory</code></p> <h3 id="jobs-job-id-steps-shell"><a href="#jobs-job-id-steps-shell" class="header-anchor">#</a> jobs.&lt;job_id&gt;.steps[*].shell</h3> <p>使用 <code>bash</code> 运行脚本</p> <div class="language-yml line-numbers-mode"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br></div><pre class="language-yml"><code><span class="token key atrule">steps</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Display the path
    <span class="token key atrule">run</span><span class="token punctuation">:</span> echo $PATH
    <span class="token key atrule">shell</span><span class="token punctuation">:</span> bash
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>运行 <code>python</code> 脚本</p> <div class="language-yml line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><br></div><pre class="language-yml"><code><span class="token key atrule">steps</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Display the path
    <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
      import os
      print(os.environ['PATH'])</span>
    <span class="token key atrule">shell</span><span class="token punctuation">:</span> python
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>您可以使用 <code>shell</code> 关键字覆盖运行器操作系统中的默认 <code>shell</code> 设置</p> <h3 id="一些-actions-推荐"><a href="#一些-actions-推荐" class="header-anchor">#</a> 一些 actions 推荐</h3> <table><thead><tr><th style="text-align:left;">:-</th> <th style="text-align:left;">:-</th></tr></thead> <tbody><tr><td style="text-align:left;"><a href="https://github.com/jaywcjlove/create-tag-action" target="_blank" rel="noopener noreferrer"><code>create-tag-action</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td style="text-align:left;">根据 package.json 创建 <code>Tag</code> / <code>Release</code></td></tr> <tr><td style="text-align:left;"><a href="https://github.com/jaywcjlove/changelog-generator" target="_blank" rel="noopener noreferrer"><code>changelog-generator</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td style="text-align:left;">生成 <code>changelog</code> 日志</td></tr> <tr><td style="text-align:left;"><a href="https://github.com/jaywcjlove/github-action-modify-file-content" target="_blank" rel="noopener noreferrer"><code>github-action-modify-file-content</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td style="text-align:left;">修改仓库文件内容</td></tr> <tr><td style="text-align:left;"><a href="https://github.com/jaywcjlove/github-action-contributors" target="_blank" rel="noopener noreferrer"><code>github-action-contributors</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td style="text-align:left;">生成贡献(contributors.svg)图片</td></tr> <tr><td style="text-align:left;"><a href="https://github.com/jaywcjlove/generated-badges" target="_blank" rel="noopener noreferrer"><code>generated-badges</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td style="text-align:left;">生成徽章(Badges)图片</td></tr> <tr><td style="text-align:left;"><a href="https://github.com/jaywcjlove/coverage-badges-cli" target="_blank" rel="noopener noreferrer"><code>coverage-badges-cli</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td style="text-align:left;">生成覆盖率徽章(Badges)图片</td></tr> <tr><td style="text-align:left;"><a href="https://github.com/jaywcjlove/action-ejs" target="_blank" rel="noopener noreferrer"><code>action-ejs</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td style="text-align:left;">基于 ejs 生成 HTML</td></tr> <tr><td style="text-align:left;"><a href="https://github.com/jaywcjlove/github-action-package" target="_blank" rel="noopener noreferrer"><code>github-action-package</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td style="text-align:left;">修改 JSON 文件内容</td></tr> <tr><td style="text-align:left;"><a href="https://github.com/jaywcjlove/github-action-read-file" target="_blank" rel="noopener noreferrer"><code>github-action-read-file</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td style="text-align:left;">读取文件内容</td></tr> <tr><td style="text-align:left;"><a href="https://github.com/jaywcjlove/markdown-to-html-cli" target="_blank" rel="noopener noreferrer"><code>markdown-to-html-cli</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td style="text-align:left;">Markdown 转换成 HTML</td></tr> <tr><td style="text-align:left;"><a href="https://github.com/ncipollo/release-action" target="_blank" rel="noopener noreferrer"><code>ncipollo/release-action</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td style="text-align:left;">创建 <code>Release</code></td></tr> <tr><td style="text-align:left;"><a href="https://github.com/peaceiris/actions-gh-pages" target="_blank" rel="noopener noreferrer"><code>peaceiris/actions-gh-pages</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td style="text-align:left;">将文件或文件夹内容提交到 <code>gh-pages</code> 分支</td></tr></tbody></table> <h3 id="在-github-中创建-docker-镜像"><a href="#在-github-中创建-docker-镜像" class="header-anchor">#</a> 在 Github 中创建 Docker 镜像</h3> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Set up Docker Buildx
  <span class="token key atrule">uses</span><span class="token punctuation">:</span> docker/setup<span class="token punctuation">-</span>buildx<span class="token punctuation">-</span>action@v2
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 登录 GitHub 容器注册表
  <span class="token key atrule">uses</span><span class="token punctuation">:</span> docker/login<span class="token punctuation">-</span>action@v2
  <span class="token key atrule">with</span><span class="token punctuation">:</span>
    <span class="token key atrule">registry</span><span class="token punctuation">:</span> ghcr.io
    <span class="token key atrule">username</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> github.actor <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token key atrule">password</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.GITHUB_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 构建并推送 image<span class="token punctuation">:</span>latest
  <span class="token key atrule">uses</span><span class="token punctuation">:</span> docker/build<span class="token punctuation">-</span>push<span class="token punctuation">-</span>action@v3
  <span class="token key atrule">with</span><span class="token punctuation">:</span>
    <span class="token key atrule">push</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">context</span><span class="token punctuation">:</span> .
    <span class="token key atrule">platforms</span><span class="token punctuation">:</span> linux/amd64<span class="token punctuation">,</span>linux/arm64
    <span class="token key atrule">tags</span><span class="token punctuation">:</span> ghcr.io/jaywcjlove/reference<span class="token punctuation">:</span>latest

<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 构建并推送 image<span class="token punctuation">:</span>tags
  <span class="token key atrule">uses</span><span class="token punctuation">:</span> docker/build<span class="token punctuation">-</span>push<span class="token punctuation">-</span>action@v3
  <span class="token key atrule">if</span><span class="token punctuation">:</span> steps.create_tag.outputs.successful
  <span class="token key atrule">with</span><span class="token punctuation">:</span>
    <span class="token key atrule">push</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">context</span><span class="token punctuation">:</span> .
    <span class="token key atrule">platforms</span><span class="token punctuation">:</span> linux/amd64<span class="token punctuation">,</span>linux/arm64
    <span class="token key atrule">tags</span><span class="token punctuation">:</span> ghcr.io/jaywcjlove/reference<span class="token punctuation">:</span>$<span class="token punctuation">{</span><span class="token punctuation">{</span>steps.changelog.outputs.version<span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="在-docker-hub-中创建-docker-镜像"><a href="#在-docker-hub-中创建-docker-镜像" class="header-anchor">#</a> 在 Docker Hub 中创建 Docker 镜像</h3> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Set up Docker Buildx
  <span class="token key atrule">uses</span><span class="token punctuation">:</span> docker/setup<span class="token punctuation">-</span>buildx<span class="token punctuation">-</span>action@v2
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 登录到 Docker Hub
  <span class="token key atrule">uses</span><span class="token punctuation">:</span> docker/login<span class="token punctuation">-</span>action@v2
  <span class="token key atrule">with</span><span class="token punctuation">:</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.DOCKER_USER <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token key atrule">password</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.DOCKER_PASSWORD <span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 构建并推送 image<span class="token punctuation">:</span>latest
  <span class="token key atrule">uses</span><span class="token punctuation">:</span> docker/build<span class="token punctuation">-</span>push<span class="token punctuation">-</span>action@v3
  <span class="token key atrule">with</span><span class="token punctuation">:</span>
    <span class="token key atrule">push</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">context</span><span class="token punctuation">:</span> .
    <span class="token key atrule">platforms</span><span class="token punctuation">:</span> linux/amd64<span class="token punctuation">,</span>linux/arm64
    <span class="token key atrule">tags</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.DOCKER_USER <span class="token punctuation">}</span><span class="token punctuation">}</span>/reference<span class="token punctuation">:</span>latest

<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 构建并推送 image<span class="token punctuation">:</span>tags
  <span class="token key atrule">uses</span><span class="token punctuation">:</span> docker/build<span class="token punctuation">-</span>push<span class="token punctuation">-</span>action@v3
  <span class="token key atrule">if</span><span class="token punctuation">:</span> steps.create_tag.outputs.successful
  <span class="token key atrule">with</span><span class="token punctuation">:</span>
    <span class="token key atrule">push</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">context</span><span class="token punctuation">:</span> .
    <span class="token key atrule">platforms</span><span class="token punctuation">:</span> linux/amd64<span class="token punctuation">,</span>linux/arm64
    <span class="token key atrule">tags</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.DOCKER_USER <span class="token punctuation">}</span><span class="token punctuation">}</span>/reference<span class="token punctuation">:</span>$<span class="token punctuation">{</span><span class="token punctuation">{</span>steps.changelog.outputs.version<span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="检查签出仓库并安装-nodejs"><a href="#检查签出仓库并安装-nodejs" class="header-anchor">#</a> 检查签出仓库并安装 nodejs</h3> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v3
<span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>node@v3
  <span class="token key atrule">with</span><span class="token punctuation">:</span>
    <span class="token key atrule">node-version</span><span class="token punctuation">:</span> <span class="token number">16</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="生成贡献者头像列表"><a href="#生成贡献者头像列表" class="header-anchor">#</a> 生成贡献者头像列表</h3> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Generate Contributors Images
  <span class="token key atrule">uses</span><span class="token punctuation">:</span> jaywcjlove/github<span class="token punctuation">-</span>action<span class="token punctuation">-</span>contributors@main
  <span class="token key atrule">id</span><span class="token punctuation">:</span> contributors
  <span class="token key atrule">with</span><span class="token punctuation">:</span>
    <span class="token key atrule">output</span><span class="token punctuation">:</span> dist/CONTRIBUTORS.svg
    <span class="token key atrule">avatarSize</span><span class="token punctuation">:</span> <span class="token number">42</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="忽略失败"><a href="#忽略失败" class="header-anchor">#</a> 忽略失败</h3> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> npm publish
  <span class="token key atrule">continue-on-error</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">env</span><span class="token punctuation">:</span>
    <span class="token key atrule">NODE_AUTH_TOKEN</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.NPM_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>当 <code>npm</code> 推送包失败不影响整个流程，可用于自动发包</p> <h2 id="gitlab-ci-cd-迁移到-github-actions"><a href="#gitlab-ci-cd-迁移到-github-actions" class="header-anchor">#</a> GitLab CI/CD 迁移到 GitHub Actions</h2> <h3 id="语法示例"><a href="#语法示例" class="header-anchor">#</a> 语法示例</h3> <p><yel>GitLab CI/CD</yel></p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">job1</span><span class="token punctuation">:</span>
  <span class="token key atrule">variables</span><span class="token punctuation">:</span>
    <span class="token key atrule">GIT_CHECKOUT</span><span class="token punctuation">:</span> <span class="token string">&quot;true&quot;</span>
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;Run your script here&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>GitHub Actions</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">job1</span><span class="token punctuation">:</span>
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v3
      <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> echo &quot;Run your script here&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="运行程序"><a href="#运行程序" class="header-anchor">#</a> 运行程序</h3> <p><yel>GitLab CI/CD</yel></p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">windows_job</span><span class="token punctuation">:</span>
  <span class="token key atrule">tags</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> windows
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo Hello<span class="token punctuation">,</span> %USERNAME%<span class="token tag">!</span>

<span class="token key atrule">linux_job</span><span class="token punctuation">:</span> <span class="token key atrule">tags</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">linux script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;Hello<span class="token punctuation">,</span> $USER<span class="token tag">!</span>&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>GitHub Actions</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">windows_job</span><span class="token punctuation">:</span>
  <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> windows<span class="token punctuation">-</span>latest
  <span class="token key atrule">steps</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> echo Hello<span class="token punctuation">,</span> %USERNAME%<span class="token tag">!</span>

<span class="token key atrule">linux_job</span><span class="token punctuation">:</span>
  <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
  <span class="token key atrule">steps</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> echo &quot;Hello<span class="token punctuation">,</span> $USER<span class="token tag">!</span>&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>在不同的平台上运行作业</p> <h3 id="docker-映像"><a href="#docker-映像" class="header-anchor">#</a> Docker 映像</h3> <p><yel>GitLab CI/CD</yel></p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">my_job</span><span class="token punctuation">:</span>
  <span class="token key atrule">image</span><span class="token punctuation">:</span> node<span class="token punctuation">:</span>10.16<span class="token punctuation">-</span>jessie
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>GitHub Actions</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">my_job</span><span class="token punctuation">:</span>
    <span class="token key atrule">container</span><span class="token punctuation">:</span> node<span class="token punctuation">:</span>10.16<span class="token punctuation">-</span>jessie
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="条件和表达式语法"><a href="#条件和表达式语法" class="header-anchor">#</a> 条件和表达式语法</h3> <p><yel>GitLab CI/CD</yel></p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">deploy_prod</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> deploy
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;部署到生产服务器&quot;
  <span class="token key atrule">rules</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">if</span><span class="token punctuation">:</span> <span class="token string">'$CI_COMMIT_BRANCH == &quot;master&quot;'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>GitHub Actions</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">deploy_prod</span><span class="token punctuation">:</span>
    <span class="token key atrule">if</span><span class="token punctuation">:</span> contains( github.ref<span class="token punctuation">,</span> 'master')
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> echo &quot;部署到生产服务器&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="artifacts"><a href="#artifacts" class="header-anchor">#</a> Artifacts</h3> <p><yel>GitLab CI/CD</yel></p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">script</span><span class="token punctuation">:</span>
<span class="token key atrule">artifacts</span><span class="token punctuation">:</span>
  <span class="token key atrule">paths</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> math<span class="token punctuation">-</span>homework.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>GitHub Actions</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Upload math result for job 1
  <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/upload<span class="token punctuation">-</span>artifact@v3
  <span class="token key atrule">with</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> homework
    <span class="token key atrule">path</span><span class="token punctuation">:</span> math<span class="token punctuation">-</span>homework.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="作业之间的依赖关系"><a href="#作业之间的依赖关系" class="header-anchor">#</a> 作业之间的依赖关系</h3> <p><yel>GitLab CI/CD</yel></p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">stages</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> build
  <span class="token punctuation">-</span> test
  <span class="token punctuation">-</span> deploy

<span class="token key atrule">build_a</span><span class="token punctuation">:</span> <span class="token key atrule">stage</span><span class="token punctuation">:</span> <span class="token key atrule">build script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;该作业将首先运行&quot;

<span class="token key atrule">build_b</span><span class="token punctuation">:</span> <span class="token key atrule">stage</span><span class="token punctuation">:</span> <span class="token key atrule">build script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;该作业将首先运行，与 build_a 并行&quot;

<span class="token key atrule">test_ab</span><span class="token punctuation">:</span> <span class="token key atrule">stage</span><span class="token punctuation">:</span> <span class="token key atrule">test script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;此作业将在 build_a 和 build_b 完成后运行&quot;

<span class="token key atrule">deploy_ab</span><span class="token punctuation">:</span> <span class="token key atrule">stage</span><span class="token punctuation">:</span> <span class="token key atrule">deploy script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;此作业将在 test_ab 完成后运行&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>GitHub Actions</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">build_a</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> echo &quot;该作业将首先运行&quot;

  <span class="token key atrule">build_b</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> echo &quot;该作业将首先运行，与 build_a 并行&quot;

  <span class="token key atrule">test_ab</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">needs</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>build_a<span class="token punctuation">,</span>build_b<span class="token punctuation">]</span>
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> echo &quot;此作业将在 build_a 和 build_b 完成后运行&quot;

  <span class="token key atrule">deploy_ab</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">needs</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>test_ab<span class="token punctuation">]</span>
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> echo &quot;此作业将在 test_ab 完成后运行&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="缓存"><a href="#缓存" class="header-anchor">#</a> 缓存</h3> <p><yel>GitLab CI/CD</yel></p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">image</span><span class="token punctuation">:</span> node<span class="token punctuation">:</span>latest

<span class="token key atrule">cache</span><span class="token punctuation">:</span> <span class="token key atrule">key</span><span class="token punctuation">:</span> <span class="token key atrule">$CI_COMMIT_REF_SLUG paths</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> .npm/

<span class="token key atrule">before_script</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> npm ci <span class="token punctuation">-</span><span class="token punctuation">-</span>cache .npm <span class="token punctuation">-</span><span class="token punctuation">-</span>prefer<span class="token punctuation">-</span>offline

<span class="token key atrule">test_async</span><span class="token punctuation">:</span> <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> node ./specs/start.js ./specs/async.spec.js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>GitHub Actions</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">test_async</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Cache node modules
      <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/cache@v3
      <span class="token key atrule">with</span><span class="token punctuation">:</span>
        <span class="token key atrule">path</span><span class="token punctuation">:</span> ~/.npm
        <span class="token key atrule">key</span><span class="token punctuation">:</span> v1<span class="token punctuation">-</span>npm<span class="token punctuation">-</span>deps<span class="token punctuation">-</span>$<span class="token punctuation">{</span><span class="token punctuation">{</span> hashFiles('<span class="token important">**/package-lock.json')</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token key atrule">restore-keys</span><span class="token punctuation">:</span> v1<span class="token punctuation">-</span>npm<span class="token punctuation">-</span>deps<span class="token punctuation">-</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="数据库和服务容器"><a href="#数据库和服务容器" class="header-anchor">#</a> 数据库和服务容器</h3> <p><yel>GitLab CI/CD</yel></p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">container-job</span><span class="token punctuation">:</span>
  <span class="token key atrule">variables</span><span class="token punctuation">:</span>
    <span class="token key atrule">POSTGRES_PASSWORD</span><span class="token punctuation">:</span> postgres
    <span class="token comment"># PostgreSQL 服务容器通信的主机名</span>
    <span class="token key atrule">POSTGRES_HOST</span><span class="token punctuation">:</span> postgres
    <span class="token comment"># 默认的 PostgreSQL 端口</span>
    <span class="token key atrule">POSTGRES_PORT</span><span class="token punctuation">:</span> <span class="token number">5432</span>
  <span class="token key atrule">image</span><span class="token punctuation">:</span> node<span class="token punctuation">:</span>10.18<span class="token punctuation">-</span>jessie
  <span class="token key atrule">services</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> postgres
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token comment"># 执行 package.json 文件中</span>
    <span class="token comment"># 所有依赖项的全新安装</span>
    <span class="token punctuation">-</span> npm ci
    <span class="token comment"># 运行创建 PostgreSQL 客户端的脚本，</span>
    <span class="token comment"># 用数据填充客户端，并检索数据</span>
    <span class="token punctuation">-</span> node client.js
  <span class="token key atrule">tags</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> docker
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>GitHub Actions</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">container-job</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">container</span><span class="token punctuation">:</span> node<span class="token punctuation">:</span>10.18<span class="token punctuation">-</span>jessie

    <span class="token key atrule">services</span><span class="token punctuation">:</span>
      <span class="token key atrule">postgres</span><span class="token punctuation">:</span>
        <span class="token key atrule">image</span><span class="token punctuation">:</span> postgres
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
          <span class="token key atrule">POSTGRES_PASSWORD</span><span class="token punctuation">:</span> postgres

    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Check out repository code
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v3

      <span class="token comment"># 执行 package.json 文件中</span>
      <span class="token comment"># 所有依赖项的全新安装</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install dependencies
        <span class="token key atrule">run</span><span class="token punctuation">:</span> npm ci

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Connect to PostgreSQL
        <span class="token comment"># 运行创建 PostgreSQL 客户端的脚本，</span>
        <span class="token comment"># 用数据填充客户端，并检索数据</span>
        <span class="token key atrule">run</span><span class="token punctuation">:</span> node client.js
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
          <span class="token comment"># PostgreSQL 服务容器通信的主机名</span>
          <span class="token key atrule">POSTGRES_HOST</span><span class="token punctuation">:</span> postgres
          <span class="token comment"># 默认的 PostgreSQL 端口</span>
          <span class="token key atrule">POSTGRES_PORT</span><span class="token punctuation">:</span> <span class="token number">5432</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h2 id="另见"><a href="#另见" class="header-anchor">#</a> 另见</h2> <ul><li><a href="https://jaywcjlove.github.io/github-actions" target="_blank" rel="noopener noreferrer">Github Actions 学习笔记<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <em>(jaywcjlove.github.io)</em></li> <li><a href="https://docs.github.com/cn/actions/learn-github-actions" target="_blank" rel="noopener noreferrer">了解 GitHub Actions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <em>(docs.github.com)</em></li> <li><a href="https://docs.github.com/cn/actions/migrating-to-github-actions/migrating-from-gitlab-cicd-to-github-actions" target="_blank" rel="noopener noreferrer">从 GitLab CI/CD 迁移到 GitHub Actions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <em>(docs.github.com)</em></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.c8ed8bcf.js" defer></script><script src="/assets/js/2.f44a4f26.js" defer></script><script src="/assets/js/83.04d03012.js" defer></script>
  </body>
</html>
