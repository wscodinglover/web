(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{307:function(a,s,e){"use strict";e.r(s);var t=e(14),r=Object(t.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"openssl-备忘清单"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#openssl-备忘清单"}},[a._v("#")]),a._v(" OpenSSL 备忘清单")]),a._v(" "),s("p",[a._v("这个 "),s("a",{attrs:{href:"https://www.openssl.org/",target:"_blank",rel:"noopener noreferrer"}},[a._v("OpenSSL"),s("OutboundLink")],1),a._v(" 快速参考备忘单展示了它的常用命令使用清单")]),a._v(" "),s("h2",{attrs:{id:"入门"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#入门"}},[a._v("#")]),a._v(" 入门")]),a._v(" "),s("h3",{attrs:{id:"基础"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基础"}},[a._v("#")]),a._v(" 基础")]),a._v(" "),s("p",[a._v("检查版本")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl version "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-a")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("它在使用四个 CPU 内核并测试 RSA 算法的系统上运行速度有多快")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl speed "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-multi")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("4")]),a._v(" rsa\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("获得基本帮助")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("help")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("生成 20 个随机字节并将它们显示在屏幕上")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl rand "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-hex")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("20")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"编码-解码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编码-解码"}},[a._v("#")]),a._v(" 编码/解码")]),a._v(" "),s("p",[a._v("使用 Base64 编码文件")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl base64 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" file.data\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("使用 Base64 编码一些文本")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"some text"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" openssl base64\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("Base64 解码一个文件并输出到另一个文件")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl base64 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" encode­d.data "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" decode­d.data\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("h3",{attrs:{id:"使用哈希"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用哈希"}},[a._v("#")]),a._v(" 使用哈希")]),a._v(" "),s("p",[a._v("列出可用的摘要算法")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl list -diges­t-a­lgo­rithms\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("使用 SHA256 散列文件")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl dgst "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sha256")]),a._v(" file.data\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("使用 SHA256 散列文件及其二进制形式的输出（无输出十六进制编码） 没有 ASCII 或编码字符将打印到控制台，只有纯字节。 您可以附加 ' | xxd'")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl dgst "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-binary")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sha256")]),a._v(" file.data\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("使用 SHA3-512 的哈希文本")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"some text"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" openssl dgst -sha3-512\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("创建 HMAC - 使用特定密钥（以字节为单位）的文件的 SHA384")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl dgst "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-SHA384")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-mac")]),a._v(" HMAC "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-macopt")]),a._v(" hexkey:369bd7d655 file.data\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("创建 HMAC - 一些文本的 SHA512")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"some text"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" openssl dgst "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-mac")]),a._v(" HMAC "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-macopt")]),a._v(" hexkey­:36­9bd­7d655 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sha512")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("h3",{attrs:{id:"非对称加密"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#非对称加密"}},[a._v("#")]),a._v(" 非对称加密")]),a._v(" "),s("p",[a._v("列出可用的椭圆曲线")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl ecparam -list_­curves\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("创建 4096 位 RSA 公私密钥对")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl genrsa "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" pub_pr­iv.key "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("4096")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("显示详细的私钥信息")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl rsa "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-text")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" pub_priv.key "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-noout")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("使用 AES-256 算法加密公私钥对")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl rsa "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" pub_priv.key "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" encrypted.key "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-aes256")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("删除密钥文件加密并将它们保存到另一个文件")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl rsa "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" encrypted.key "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" cleartext.key\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("将公私钥对文件的公钥复制到另一个文件中")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl rsa "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" pub_priv.key "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-pubout")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" pubkey.key\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("使用 RSA 公钥加密文件")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl rsautl "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-encrypt")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-inkey")]),a._v(" pubkey.key "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-pubin")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" cleartext.file "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" ciphertext.file\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("使用 RSA 私钥解密文件")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl rsautl "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-decrypt")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-inkey")]),a._v(" pub_priv.key "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" ciphertext.file "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" decrypted.file\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("使用 P-224 椭圆曲线创建私钥")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl ecparam "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-name")]),a._v(" secp224k1 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-genkey")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" ecpriv.key\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("使用 3DES 算法加密私钥")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl ec "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" ecP384priv.key "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-des3")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" ecP384priv_enc.key\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"对称加密"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#对称加密"}},[a._v("#")]),a._v(" 对称加密")]),a._v(" "),s("p",[a._v("列出所有支持的对称加密密码")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl enc "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-list")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("使用提供的 ASCII 编码密码和 AES-128-ECB 算法加密文件")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl enc -aes-128-ecb "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" cleartext.file "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" ciphertext.file "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-pass")]),a._v(" pass:thisisthepassword\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("使用 AES-256-CBC 和密钥文件解密文件")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl enc "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" -aes-256-cbc "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" ciphertext.file "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" cleartext.file "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-pass")]),a._v(" file:./key.file\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("使用以十六进制数字形式提供的特定加密密钥 (K) 加密文件")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl enc -aes-128-ecb "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" cleartext.file "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" ciphertext.file "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-K")]),a._v(" 1881807b2d1b3d22f14e9ec52563d981 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-nosalt")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("使用指定的加密密钥（K：256 位）和初始化向量（iv：128 位）在 CBC 块密码模式下使用 ARIA 256 加密文件")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl enc -aria-256-cbc "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" cleartext.file "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" ciphertext.file "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-K")]),a._v(" f92d2e986b7a2a01683b4c40d0cbcf6feaa669ef2bb5ec3a25ce85d9548291c1 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-iv")]),a._v(" 470bc29762496046882b61ecee68e07c "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-nosalt")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("使用提供的密钥和 iv 在 COUNTER 块密码模式下使用 Camellia 192 算法加密文件")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl enc -camellia-192-ctr "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" cleartext.file "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" ciphertext.file "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-K")]),a._v(" 6c7a1b3487d28d3bf444186d7c529b48d67dd6206c7a1b34 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-iv")]),a._v(" 470bc29762496046882b61ecee68e07c\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("h3",{attrs:{id:"数字签名"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数字签名"}},[a._v("#")]),a._v(" 数字签名")]),a._v(" "),s("p",[a._v("为私钥生成 DSA 参数。 2048 位长度")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl dsaparam "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" dsaparam.pem "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2048")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("生成用于签署文档的 DSA 公私密钥并使用 AES128 算法对其进行保护")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl gendsa "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" dsaprivatekey.pem -aes-128-cbc dsaparam.pem\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("将DSA公私钥文件的公钥复制到另一个文件中")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl dsa "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" dsaprivatekey.pem "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-pubout")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" dsapublickey.pem\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("打印出 DSA 密钥对文件的内容")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl dsa "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" dsaprivatekey.pem "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-text")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-noout")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("使用 RSA 私钥对文件的 sha-256 哈希进行签名")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl dgst "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sha256")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sign")]),a._v(" rsakey.key "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" signature.data document.pdf\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("使用公钥验证 SHA-256 文件签名")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl dgst "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sha256")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-verify")]),a._v(" publickey.pem "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-signature")]),a._v(" signature.data original.file\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("使用 DSA 私钥对文件的 sha3-512 哈希进行签名")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl pkeyutl "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sign")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-pkeyopt")]),a._v(" digest:sha3-512 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" document.docx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-inkey")]),a._v(" dsaprivatekey.pem "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" signature.data\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("验证 DSA 签名")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl pkeyutl "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-verify")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sigfile")]),a._v(" dsasignature.data "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-inkey")]),a._v(" dsakey.pem "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" document.docx\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("使用 P-384 椭圆曲线创建私钥")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl ecparam "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-name")]),a._v(" secp384r1 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-genkey")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" ecP384priv.key\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("使用3DES算法加密私钥")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl ec "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" ecP384priv.key "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-des3")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" ecP384priv_enc.key\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("使用带有生成密钥的椭圆曲线对 PDF 文件进行签名")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl pkeyutl "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sign")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-inkey")]),a._v(" ecP384priv_enc.key "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-pkeyopt")]),a._v(" digest:sha3-512 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" document.pdf "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" signature.data\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("验证文件的签名。 如果没问题，您必须收到“签名验证成功”")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl pkeyutl "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-verify")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" document.pdf "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sigfile")]),a._v(" signature.data "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-inkey")]),a._v(" ecP384priv_enc.key\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"数字证书"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数字证书"}},[a._v("#")]),a._v(" 数字证书")]),a._v(" "),s("p",[a._v("生成 CSR 文件和 4096 位 RSA 密钥对")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl req "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-newkey")]),a._v(" rsa:4096 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-keyout")]),a._v(" private.key "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" request.csr\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("显示证书签名请求 ( CSR ) 内容")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl req "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-text")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-noout")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" request.csr\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("显示 CSR 文件中包含的公钥")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl req "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-pubkey")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-noout")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" request.csr\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("使用现有私钥创建证书签名请求 ( CSR )。 当您需要在不更改私钥的情况下更新公共数字证书时，这会很有用")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl req "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-key")]),a._v(" private.key "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" request.csr\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("创建 EC P384 曲线参数文件以在下一步中使用椭圆曲线生成 CSR")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl genpkey "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-genparam")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-algorithm")]),a._v(" EC "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" EC_params.pem "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-pkeyopt")]),a._v(" ec_paramgen_curve:secp384r1 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-pkeyopt")]),a._v(" ec_param_enc:named_curve\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("使用在上一步中创建的椭圆曲线 P384 参数文件创建 CSR 文件。 而不是使用 RSA 密钥。")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl req "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-newkey")]),a._v(" ec:EC_params.pem "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-keyout")]),a._v(" EC_P384_priv.key "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" EC_request.csr\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("创建自签名证书，新的 2048 位 RSA 密钥对，有效期为一年")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl req "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-newkey")]),a._v(" rsa:2048 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-nodes")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-keyout")]),a._v(" priv.key "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-x509")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-days")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("365")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" cert.crt\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("使用 CSR 文件和用于签名的私钥创建并签署新证书（您必须准备好 openssl.cnf 文件）")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl ca "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" request.csr "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" certificate.crt "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-config")]),a._v(" ./CA/config/openssl.cnf\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("显示PEM格式证书信息")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl x509 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-text")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-noout")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" cert.crt\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("以 Abstract Sintax Notation One (ASN.1) 显示证书信息")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl asn1parse "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" cert.crt\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("提取证书的公钥")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl x509 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-pubkey")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-noout")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" cert.crt\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("在证书中提取公钥的模数")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl x509 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-modulus")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-noout")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" cert.crt\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("从 HTTPS/TLS 连接中提取域证书")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl s_client "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-connect")]),a._v(" domain.com:443 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" openssl x509 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" certificate.crt\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("将证书从 PEM 格式转换为 DER 格式")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl x509 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-inform")]),a._v(" PEM "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-outform")]),a._v(" DER "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" cert.crt "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" cert.der\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("检查证书公钥是否与私钥和请求文件匹配。 每个文件一步。 必须在输出哈希中匹配")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl x509 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-modulus")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" certificate.crt "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-noout")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" openssl dgst "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sha256")]),a._v("\n$ openssl rsa "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-modulus")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" private.key "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-noout")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" openssl dgst "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sha256")]),a._v("\n$ openssl req "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-modulus")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" request.csr "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-noout")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" openssl dgst "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sha256")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),a._v(" "),s("h3",{attrs:{id:"使用-tls-协议"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-tls-协议"}},[a._v("#")]),a._v(" 使用 TLS 协议")]),a._v(" "),s("p",[a._v("列出所有支持的密码套件")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl ciphers "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-V")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'ALL'")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("列出 AES 支持的所有密码套件")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl ciphers "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-V")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'AES'")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("列出所有支持 CAMELLIA 和 SHA256 算法的密码套件。")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl ciphers "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-V")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'CAMELLIA+SHA256'")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("使用端口 443 (HTTPS) 与服务器的 TLS 连接")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl s_client "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-connect")]),a._v(" domain.com:443\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("使用 v1.2 与服务器的 TLS 连接")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl s_client "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-tls1_2")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-connect")]),a._v(" domain.com:443\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("TLS 连接和禁用 v1.0")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl s_client "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-no_tls1")]),a._v(" domain.com:443\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("使用特定密码套件的 TLS 连接")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl s_client "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-cipher")]),a._v(" DHE-RSA-AES256-GCM-SHA384 domain.com:443\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("显示服务器提供的所有证书的 TLS 连接")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl s_client "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-showcerts")]),a._v(" domain.com:443\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("使用证书、私钥和仅支持 TLS 1.2 设置监听端口以接收 TLS 连接")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl s_server "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-port")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("443")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-cert")]),a._v(" cert.crt "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-key")]),a._v(" priv.key "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-tls1_2")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("从 HTTPS/TLS 连接中提取域证书")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl s_client "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-connect")]),a._v(" domain.com:443 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" openssl x509 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" certificate.crt\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("nmap 命令：通过 HTTPS/TLS 连接显示启用的密码套件")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ nmap "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--script")]),a._v(" ssl-enum-ciphers "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("443")]),a._v(" domain.com\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("nmap 命令：使用 SNI 通过 TLS (HTTPS) 连接显示启用的密码套件。 （将其更改为所需的 IP 和域名）")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ nmap "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--script")]),a._v(" ssl-enum-ciphers --script-args"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("tls.servername"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("domain.com "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("172.67")]),a._v(".129.11\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"个人安全环境-pse"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#个人安全环境-pse"}},[a._v("#")]),a._v(" 个人安全环境 (PSE)")]),a._v(" "),s("p",[a._v("将证书从 PEM (base64) 格式转换为 DER（二进制）格式")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl x509 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" certif­ica­te.pem "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-outform")]),a._v(" DER "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" certif­ica­te.der\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("将证书和私钥插入 PKCS #12 格式文件。 这些文件可以导入到 Windows 证书管理器或 Java Key Store (jks) 文件中")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl pkcs12 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" cert_key.p12 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-inkey")]),a._v(" private.key "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" certificate.crt\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("显示 PKCS #12 文件的内容")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl pkcs12 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" cert_k­ey.p12\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("将 .p12 文件转换为 Java Key Store。 此命令使用 java keytool 而不是 openssl。")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("keytool "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-importkeystore")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-destkeystore")]),a._v(" javakeystore.jks "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-srckeystore")]),a._v(" cert_key.p12 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-srcstoretype")]),a._v(" pkcs12\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("将 PEM 证书转换为 PKCS #7 格式")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl crl2pkcs7 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-nocrl")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-certfile")]),a._v(" certificate.crt "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" cert.p7b\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("将 PKCS #7 文件从 PEM 转换为 DER")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl pkcs7 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" cert.p7b "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-outform")]),a._v(" DER "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" p7.der\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("h2",{attrs:{id:"查看"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看"}},[a._v("#")]),a._v(" 查看")]),a._v(" "),s("h3",{attrs:{id:"查看-pem-编码证书"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看-pem-编码证书"}},[a._v("#")]),a._v(" 查看 PEM 编码证书")]),a._v(" "),s("p",[a._v("使用具有证书扩展名的命令将 cert.xxx 替换为证书名称")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl x509 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" cert.pem "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-text")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-noout")]),a._v("\n$ openssl x509 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" cert.cer "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-text")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-noout")]),a._v("\n$ openssl x509 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" cert.crt "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-text")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-noout")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("p",[a._v("如果您收到以下错误，则表示您正在尝试查看 DER 编码的证书，并且需要使用下面“查看 DER 编码的证书”部分中的命令：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("unable to load certificate\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("12626")]),a._v(":error:0906D06C:PEM routines:PEM_read_bio:no start line:pem_lib.c:647:Expecting: TRUSTED CERTIFICATE View DER encoded Certificate\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),a._v(" "),s("h3",{attrs:{id:"查看-der-编码证书"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看-der-编码证书"}},[a._v("#")]),a._v(" 查看 DER 编码证书")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("openssl x509 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" certificate.der "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-inform")]),a._v(" der "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-text")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-noout")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("如果您收到以下错误，则表示您正在尝试使用用于 DER 编码证书的命令查看 PEM 编码证书。 使用上面“查看 PEM 编码证书”部分中的命令：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("unable to load certificate\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("13978")]),a._v(":error:0D0680A8:asn1 encoding routines:ASN1_CHECK_TLEN:wrong tag:tasn_dec.c:1306:\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("13978")]),a._v(":error:0D07803A:asn1 encoding routines:ASN1_ITEM_EX_D2I:nested asn1 error:tasn_dec.c:380:Type"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("X509\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),a._v(" "),s("h3",{attrs:{id:"查看证书链中的所有证书"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看证书链中的所有证书"}},[a._v("#")]),a._v(" 查看证书链中的所有证书")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# subject + issuer")]),a._v("\nopenssl crl2pkcs7 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-nocrl")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-certfile")]),a._v(" host.domain.tld-ca-chain.pem "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" openssl pkcs7 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-print_certs")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-noout")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# full public keys")]),a._v("\nopenssl crl2pkcs7 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-nocrl")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-certfile")]),a._v(" host.domain.tld-ca-chain.pem "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" openssl pkcs7 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-print_certs")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-text")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-noout")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("h2",{attrs:{id:"转换"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#转换"}},[a._v("#")]),a._v(" 转换")]),a._v(" "),s("h3",{attrs:{id:"转换示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#转换示例"}},[a._v("#")]),a._v(" 转换示例")]),a._v(" "),s("p",[a._v("将 DER 文件 (.crt .cer .der) 转换为 PEM")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("openssl x509 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-inform")]),a._v(" der "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" certificate.cer "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" certificate.pem\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("将 PEM 文件转换为 DER")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("openssl x509 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-outform")]),a._v(" der "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" certificate.pem "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" certificate.der\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("将包含私钥和证书的 PKCS#12 文件 (.pfx .p12) 转换为 PEM")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("openssl pkcs12 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" keyStore.pfx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" keyStore.pem "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-nodes")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 您可以添加 -nocerts 以仅输出私钥或添加 -nokeys 以仅输出证书")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),a._v(" "),s("p",[a._v("将 PEM 证书文件和私钥转换为 PKCS#12 (.pfx .p12)")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("openssl pkcs12 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" certificate.pfx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-inkey")]),a._v(" privateKey.key "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" certificate.crt "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-certfile")]),a._v(" CACert.crt\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("将 PEM 转换为 CRT（.CRT 文件）")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("openssl x509 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-outform")]),a._v(" der "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" certificate.pem "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" certificate.crt\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("h3",{attrs:{id:"openssl-转换-pem"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#openssl-转换-pem"}},[a._v("#")]),a._v(" OpenSSL 转换 PEM")]),a._v(" "),s("p",[a._v("将 PEM 转换为 DER")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl x509 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-outform")]),a._v(" der "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" certificate.pem "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" certificate.der\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("将 PEM 转换为 P7B")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl crl2pkcs7 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-nocrl")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-certfile")]),a._v(" certificate.cer "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" certificate.p7b "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-certfile")]),a._v(" CACert.cer\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("将 PEM 转换为 PFX")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl pkcs12 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" certificate.pfx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-inkey")]),a._v(" privateKey.key "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" certificate.crt "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-certfile")]),a._v(" CACert.crt\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("h3",{attrs:{id:"openssl-转换-der"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#openssl-转换-der"}},[a._v("#")]),a._v(" OpenSSL 转换 DER")]),a._v(" "),s("p",[a._v("将 DER 转换为 PEM")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl x509 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-inform")]),a._v(" der "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" certificate.cer "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" certificate.pem\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("h3",{attrs:{id:"openssl-转换-pfx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#openssl-转换-pfx"}},[a._v("#")]),a._v(" OpenSSL 转换 PFX")]),a._v(" "),s("p",[a._v("将 PFX 转换为 PEM")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl pkcs12 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" certificate.pfx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" certificate.cer "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-nodes")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("h3",{attrs:{id:"openssl-转换-p7b"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#openssl-转换-p7b"}},[a._v("#")]),a._v(" OpenSSL 转换 P7B")]),a._v(" "),s("p",[a._v("将 P7B 转换为 PEM")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl pkcs7 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-print_certs")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" certificate.p7b "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" certificate.cer\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("将 P7B 转换成 PFX")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl pkcs7 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-print_certs")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" certificate.p7b "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" certificate.cer\n$ openssl pkcs12 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" certificate.cer "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-inkey")]),a._v(" privateKey.key "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" certificate.pfx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-certfile")]),a._v(" CACert.cer\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),a._v(" "),s("h3",{attrs:{id:"通过-openssl-生成-rsa-密钥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通过-openssl-生成-rsa-密钥"}},[a._v("#")]),a._v(" 通过 OpenSSL 生成 rsa 密钥")]),a._v(" "),s("p",[a._v("在命令行上使用 OpenSSL 您首先需要生成公钥和私钥。 您应该使用 "),s("code",[a._v("-passout")]),a._v(" 参数对这个文件进行密码保护，这个参数可以采用许多不同的形式，因此请查阅 OpenSSL 文档")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl genrsa "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" private.pem "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("4096")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("这将创建一个名为 private.pem 的密钥文件，它使用 4096 位。 这个文件实际上有私钥和公钥，所以你应该从这个文件中提取公钥：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl rsa "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" private.pem "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" public.pem "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-outform")]),a._v(" PEM "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-pubout")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# or")]),a._v("\n$ openssl rsa "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" private.pem "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-pubout")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" public.pem\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# or")]),a._v("\n$ openssl rsa "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" private.pem "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-pubout")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" public.pem\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),a._v(" "),s("p",[a._v("您现在将拥有仅包含您的公钥的 public.pem，您可以与第 3 方自由共享。 您可以通过使用您的公钥自己加密一些东西然后使用您的私钥解密来测试这一切，首先我们需要一些数据来加密：")]),a._v(" "),s("p",[a._v("示例文件：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'too many secrets'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" file.txt\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("您现在在 file.txt 中有一些数据，让我们使用 OpenSSL 和公钥对其进行加密：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl rsautl "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-encrypt")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-inkey")]),a._v(" public.pem "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-pubin")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" file.txt "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" file.ssl\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("这会创建一个 file.txt 的加密版本，称为 file.ssl，如果你看这个文件，它只是二进制垃圾，对任何人都没有什么用处。 现在您可以使用私钥对其进行解密：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl rsautl "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-decrypt")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-inkey")]),a._v(" private.pem "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" file.ssl "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" decrypted.txt\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("您现在将在 decrypted.txt 中有一个未加密的文件：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" decrypted.txt\n "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("output -"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" too many secrets\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"openssl-中的-rsa-工具选项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#openssl-中的-rsa-工具选项"}},[a._v("#")]),a._v(" OpenSSL 中的 RSA 工具选项")]),a._v(" "),s("p",[a._v("NAME")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ rsa - RSA key processing tool\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("SYNOPSIS 概要")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl rsa "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-help"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-inform PEM"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("NET"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("DER"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-outform PEM"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("NET"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("DER"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-in filename"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-passin arg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-out filename"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-passout arg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-aes128"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-aes192"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-aes256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-camellia128"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-camellia192"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-camellia256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-des"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-des3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-idea"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-noout"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-modulus"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-check"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-pubin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-pubout"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-RSAPublicKey_in"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-RSAPublicKey_out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-engine id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("DESCRIPTION 描述")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("rsa 命令处理 RSA 密钥。 它们可以在各种形式之间转换，并且可以打印出它们的组成部分。\n请注意，此命令使用传统的 SSLeay 兼容格式进行私钥加密：较新的应用程序\n应该使用 pkcs8 实用程序使用更安全的 PKCS"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#8 格式。")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("p",[a._v("COMMAND OPTIONS 命令选项")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-help")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#> 打印出使用信息。")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-inform")]),a._v(" DER"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("NET"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("PEM\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#> 这指定了输入格式。 DER 选项使用与 PKCS #1 RSAPrivateKey 或 SubjectPublicKeyInfo 格式兼容的 ASN1 DER 编码形式。 PEM 形式是默认格式：它由 DER 格式 base64 编码，并带有额外的页眉和页脚行。 输入 PKCS#8 格式的私钥也 接受。 NET 形式是一种在注释部分中描述的格式。")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-outform")]),a._v(" DER"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("NET"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("PEM\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#> 这指定了输出格式，选项与 -inform 选项具有相同的含义。")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" filename\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#> 如果未指定此选项，这将指定要从中读取密钥的输入文件名或标准输入。 如果密钥被加密，将提示输入密码。")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-passin")]),a._v(" arg\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#> 输入文件密码源。有关 arg 格式的更多信息，请参阅 openssl 中的 PASS PHRASE ARGUMENTS 部分。")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" filename\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#> 如果未指定此选项，这将指定要写入密钥的输出文件名或标准输出。如果设置了任何加密选项，则会提示输入密码。输出文件名不应与输入文件名相同。")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-passout")]),a._v(" password\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#> 输出文件密码源。有关 arg 格式的更多信息，请参阅 openssl 中的 PASS PHRASE ARGUMENTS 部分。")]),a._v("\n\n-aes128"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("-aes192"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("-aes256"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("-camellia128"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("-camellia192"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("-camellia256"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("-des"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("-des3"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("-idea\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#> 这些选项在输出之前使用指定的密码加密私钥。提示输入密码。如果未指定这些选项，则密钥将以纯文本形式写入。这意味着使用 rsa 实用程序读取没有加密选项的加密密钥可用于从密钥中删除密码短语，或者通过设置可用于添加或更改密码短语的加密选项。这些选项只能用于 PEM 格式的输出文件。")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-text")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#> 除了编码版本之外，还以纯文本形式打印出各种公钥或私钥组件。")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-noout")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#> 此选项可防止输出密钥的编码版本。")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-modulus")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#> 此选项打印出密钥模数的值。")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-check")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#> 此选项检查 RSA 私钥的一致性。")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-pubin")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#> 默认情况下，从输入文件中读取私钥：使用此选项，改为读取公钥。")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-pubout")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#> 默认情况下输出私钥：使用此选项将输出公钥。 如果输入是公钥，则会自动设置此选项。")]),a._v("\n\n-RSAPublicKey_in, "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-RSAPublicKey_out")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#> 类似于 -pubin 和 -pubout，除了使用 RSAPublicKey 格式。")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-engine")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("id")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#> 指定引擎（通过其唯一 ID 字符串）将导致 rsa 尝试获取对指定引擎的功能引用，从而在需要时对其进行初始化。 然后引擎将被设置为所有可用算法的默认值。")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br"),s("span",{staticClass:"line-number"},[a._v("27")]),s("br"),s("span",{staticClass:"line-number"},[a._v("28")]),s("br"),s("span",{staticClass:"line-number"},[a._v("29")]),s("br"),s("span",{staticClass:"line-number"},[a._v("30")]),s("br"),s("span",{staticClass:"line-number"},[a._v("31")]),s("br"),s("span",{staticClass:"line-number"},[a._v("32")]),s("br"),s("span",{staticClass:"line-number"},[a._v("33")]),s("br"),s("span",{staticClass:"line-number"},[a._v("34")]),s("br"),s("span",{staticClass:"line-number"},[a._v("35")]),s("br"),s("span",{staticClass:"line-number"},[a._v("36")]),s("br"),s("span",{staticClass:"line-number"},[a._v("37")]),s("br"),s("span",{staticClass:"line-number"},[a._v("38")]),s("br"),s("span",{staticClass:"line-number"},[a._v("39")]),s("br"),s("span",{staticClass:"line-number"},[a._v("40")]),s("br"),s("span",{staticClass:"line-number"},[a._v("41")]),s("br"),s("span",{staticClass:"line-number"},[a._v("42")]),s("br"),s("span",{staticClass:"line-number"},[a._v("43")]),s("br"),s("span",{staticClass:"line-number"},[a._v("44")]),s("br"),s("span",{staticClass:"line-number"},[a._v("45")]),s("br"),s("span",{staticClass:"line-number"},[a._v("46")]),s("br"),s("span",{staticClass:"line-number"},[a._v("47")]),s("br")])]),a._v(" "),s("h3",{attrs:{id:"支持以下加密算法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#支持以下加密算法"}},[a._v("#")]),a._v(" 支持以下加密算法")]),a._v(" "),s("ul",[s("li",[s("code",[a._v("-aes128")])]),a._v(" "),s("li",[s("code",[a._v("-aes192")])]),a._v(" "),s("li",[s("code",[a._v("-aes256")])]),a._v(" "),s("li",[s("code",[a._v("-des3")])]),a._v(" "),s("li",[s("code",[a._v("-des")])])]),a._v(" "),s("h3",{attrs:{id:"示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[a._v("#")]),a._v(" 示例")]),a._v(" "),s("p",[a._v("要删除 RSA 私钥上的密码短语：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl rsa "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" key.pem "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" keyout.pem\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("要使用三重 DES 加密私钥：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl rsa "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" key.pem "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-des3")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" keyout.pem\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("要将私钥从 PEM 格式转换为 DER 格式：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl rsa "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" key.pem "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-outform")]),a._v(" DER "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" keyout.der\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("将私钥的组件打印到标准输出：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl rsa "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" key.pem "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-text")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-noout")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("仅输出私钥的公共部分：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl rsa "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" key.pem "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-pubout")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" pubkey.pem\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("以 RSAPublicKey 格式输出私钥的公共部分：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl rsa "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" key.pem "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-RSAPublicKey_out")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" pubkey.pem\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("h2",{attrs:{id:"格式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#格式"}},[a._v("#")]),a._v(" 格式")]),a._v(" "),s("h3",{attrs:{id:"rsa-公钥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rsa-公钥"}},[a._v("#")]),a._v(" RSA 公钥")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("-----BEGIN RSA PUBLIC KEY-----\n-----END RSA PUBLIC KEY-----\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"加密的-pem-私钥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#加密的-pem-私钥"}},[a._v("#")]),a._v(" 加密的 PEM 私钥")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("-----BEGIN RSA PRIVATE KEY-----\nProc-Type: "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("4")]),a._v(",ENCRYPTED\n-----END RSA PRIVATE KEY-----\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("h3",{attrs:{id:"识别为-pem-格式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#识别为-pem-格式"}},[a._v("#")]),a._v(" 识别为 PEM 格式")]),a._v(" "),s("p",[a._v("为了让 OpenSSL 将其识别为 PEM 格式，它必须使用 Base64 进行编码，并带有以下标头：")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("-----BEGIN CERTIFICATE-----\nand footer :\n-----END CERTIFICATE-----\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("p",[a._v("此外，每行的长度不得超过 79 个字符。 否则你会收到错误：")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("2675996:error:0906D064:PEM routines:PEM_read_bio:bad base64 decode:pem_lib.c:818:\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("注意：PEM 标准 (RFC1421) 要求行长度为 64 个字符。 可以使用 UNIX 命令行实用程序转换存储为单行的 PEM 证书：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("fold")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-w")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("64")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("hr"),a._v(" "),s("ul",[s("li",[a._v("PKCS#1 RSAPublicKey (PEM header: BEGIN RSA PUBLIC KEY)")]),a._v(" "),s("li",[a._v("PKCS#8 EncryptedPrivateKeyInfo (PEM header: BEGIN ENCRYPTED PRIVATE KEY)")]),a._v(" "),s("li",[a._v("PKCS#8 PrivateKeyInfo (PEM header: BEGIN PRIVATE KEY)")]),a._v(" "),s("li",[a._v("X.509 SubjectPublicKeyInfo (PEM header: BEGIN PUBLIC KEY)")]),a._v(" "),s("li",[a._v("CSR PEM header : (PEM header:—-BEGIN NEW CERTIFICATE REQUEST—–)")]),a._v(" "),s("li",[a._v("DSA PrivateKeyInfo (PEM header: (—–BEGIN DSA PRIVATE KEY—-)")])]),a._v(" "),s("h3",{attrs:{id:"crl"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#crl"}},[a._v("#")]),a._v(" CRL")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("-----BEGIN X509 CRL-----\n-----END X509 CRL-----\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"crt"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#crt"}},[a._v("#")]),a._v(" CRT")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("-----BEGIN CERTIFICATE-----\n-----END CERTIFICATE-----\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"csr"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#csr"}},[a._v("#")]),a._v(" CSR")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("-----BEGIN CERTIFICATE REQUEST-----\n-----END CERTIFICATE REQUEST-----\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"new-csr"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#new-csr"}},[a._v("#")]),a._v(" NEW CSR")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("-----BEGIN NEW CERTIFICATE REQUEST-----\n-----END NEW CERTIFICATE REQUEST-----\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"pem"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pem"}},[a._v("#")]),a._v(" PEM")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("-----END RSA PRIVATE KEY-----\n-----BEGIN RSA PRIVATE KEY-----\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"pkcs7"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pkcs7"}},[a._v("#")]),a._v(" PKCS7")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("-----BEGIN PKCS7-----\n-----END PKCS7-----\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"私钥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#私钥"}},[a._v("#")]),a._v(" 私钥")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("-----BEGIN PRIVATE KEY-----\n-----END PRIVATE KEY-----\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"dsa密钥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dsa密钥"}},[a._v("#")]),a._v(" DSA密钥")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("-----BEGIN DSA PRIVATE KEY-----\n-----END DSA PRIVATE KEY-----\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"椭圆曲线"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#椭圆曲线"}},[a._v("#")]),a._v(" 椭圆曲线")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("-----BEGIN EC PRIVATE KEY-----\n-----BEGIN EC PRIVATE KEY-----\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"pgp-私钥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pgp-私钥"}},[a._v("#")]),a._v(" PGP 私钥")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("-----BEGIN PGP PRIVATE KEY BLOCK-----\n-----END PGP PRIVATE KEY BLOCK-----\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"pgp-公钥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pgp-公钥"}},[a._v("#")]),a._v(" PGP 公钥")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("-----BEGIN PGP PUBLIC KEY BLOCK-----\n-----END PGP PUBLIC KEY BLOCK-----\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h2",{attrs:{id:"校验"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#校验"}},[a._v("#")]),a._v(" 校验")]),a._v(" "),s("h3",{attrs:{id:"介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[a._v("#")]),a._v(" 介绍")]),a._v(" "),s("p",[a._v("在建立 SSL/TLS 连接之前，客户端需要确保收到的证书有效。为了做到这一点，客户端不仅要验证其公钥的真实性，还要验证与之相关的其他元数据（了解这一点对于了解典型数字证书的内容很重要）：")]),a._v(" "),s("ul",[s("li",[s("strong",[s("code",[a._v("签名验证")])]),a._v(" 这确保了证书没有以任何方式被更改")]),a._v(" "),s("li",[s("strong",[s("code",[a._v("证书尚未过期")])]),a._v(" 当证书由 CA 颁发时，它会指定一个到期日期")]),a._v(" "),s("li",[s("strong",[s("code",[a._v("证书主题与主机名匹配")])]),a._v(" 证书是为特定服务器颁发的。因此，证书主题名称需要与客户端尝试连接的 URL 相匹配")]),a._v(" "),s("li",[s("strong",[s("code",[a._v("它没有被撤销")])]),a._v(" 有时证书可以在任何需要的情况下被其颁发者撤销（例如，关联的私钥已被公开，因此证书无效）")]),a._v(" "),s("li",[s("strong",[s("code",[a._v("它由受信任的 CA 签名")])]),a._v(" 为了证明证书的真实性，我们需要获取 CA 证书并验证其可信度。然而在 PKI 中有一个信任链的概念，因此 CA 证书可能是由另一个 CA 颁发的。因此我们需要获得另一个 CA 的证书并验证它。依此类推……因此，为了信任证书，我们需要一直导航到根 CA。最后，如果我们信任根 CA，可以肯定地说我们信任整个链")])]),a._v(" "),s("h3",{attrs:{id:"验证信任链"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#验证信任链"}},[a._v("#")]),a._v(" 验证信任链")]),a._v(" "),s("p",[a._v("a) 您的整个 CA 链在一个文件中，实际的网络服务器或客户端证书在另一个文件中")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl verify "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-untrusted")]),a._v(" ca-chain.pem 客户端证书.pem\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("b) 单独文件中的根证书和中间证书以及另一个文件中的实际网络服务器或客户端证书")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl verify "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-CAfile")]),a._v(" root.pem "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-untrusted")]),a._v(" intermediate-chain.pem client-cert.pem\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("如果您有多个中间 "),s("code",[a._v("CA")]),a._v("（例如 "),s("code",[a._v("root.pem -> intermediate1.pem -> intermediate2.pem -> client-cert.pem")]),a._v("），将它们连接到一个文件中并通过："),s("code",[a._v("-untrusted intermediate-chain.pem")]),a._v(" 或执行它与 cat：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl verify "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-CAfile")]),a._v(" root.pem "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-untrusted")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" intermediate1.pem intermediate2.pem"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" client-cert.pem\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("实例")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl verify "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-CAfile")]),a._v(" letsencrypt-root-cert/isrgrootx1.pem.txt "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-untrusted")]),a._v(" letsencrypt-intermediate-cert/letsencryptauthorityx3.pem.txt /etc/letsencrypt/live/sitename.tld/cert.pem \n/etc/letsencrypt/live/sitename.tld/cert.pem: OK\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),a._v(" "),s("h3",{attrs:{id:"截止日期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#截止日期"}},[a._v("#")]),a._v(" 截止日期")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl x509 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-enddate")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-noout")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" file.pem\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h4",{attrs:{id:"验证本地证书文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#验证本地证书文件"}},[a._v("#")]),a._v(" 验证本地证书文件")]),a._v(" "),s("p",[a._v("这是我的 bash 命令行，用于按过期顺序列出多个证书，最近过期的证书最先过期。")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[a._v("pem")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" /etc/ssl/certs/*.pem"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("do")]),a._v(" \n    "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("printf")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'%s: %s\\n'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"$(date --date="'),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("openssl x509 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-enddate")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-noout")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$pem")]),a._v('"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cut")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v('"')]),a._v(" --iso-8601"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('" \\\n      "')]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$pem")]),a._v('"\n'),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("done")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sort")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),a._v(" "),s("p",[a._v("示例输出：")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("2015-12-16: /etc/ssl/certs/Staat_der_Nederlanden_Root_CA.pem\n2016-03-22: /etc/ssl/certs/CA_Disig.pem\n2016-08-14: /etc/ssl/certs/EBG_Elektronik_Sertifika_Hizmet_S.pem\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("h4",{attrs:{id:"验证远程服务器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#验证远程服务器"}},[a._v("#")]),a._v(" 验证远程服务器")]),a._v(" "),s("p",[a._v("这是一个 bash 函数，它会检查你所有的服务器，假设你正在使用 DNS 循环法。 请注意，这需要 GNU 日期并且不能在 Mac OS 上运行")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function-name function"}},[a._v("check_certs")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-z")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$1")]),a._v('"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("then")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"domain name missing"')]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exit")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("fi")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$1")]),a._v('"')]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("shift")]),a._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("now_epoch")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("date")]),a._v(" +%s "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("dig")]),a._v(" +noall +answer "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$name")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("while")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("read")]),a._v(" _ _ _ _ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ip")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("do")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$ip")]),a._v(':"')]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("expiry_date")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" openssl s_client "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-showcerts")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-servername")]),a._v(" $name "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-connect")]),a._v(" $ip:443 "),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("2")]),a._v(">")]),a._v("/dev/null "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" openssl x509 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-inform")]),a._v(" pem "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-noout")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-enddate")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cut")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"="')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('" '),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$expiry_date")]),a._v('"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("expiry_epoch")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("date")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$expiry_date")]),a._v('"')]),a._v(" +%s "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("expiry_days")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$((")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("$expiry_epoch "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v(" $now_epoch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3600")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("24")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("))")])]),a._v('"')]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"    '),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$expiry_days")]),a._v(' days"')]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("done")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br")])]),a._v(" "),s("p",[a._v("输出示例：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ check_certs stackoverflow.com\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("151.101")]),a._v(".1.69: Aug "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("12")]),a._v(":00:00 "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2019")]),a._v(" GMT    "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("603")]),a._v(" days\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("151.101")]),a._v(".65.69: Aug "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("12")]),a._v(":00:00 "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2019")]),a._v(" GMT    "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("603")]),a._v(" days\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("151.101")]),a._v(".129.69: Aug "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("12")]),a._v(":00:00 "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2019")]),a._v(" GMT    "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("603")]),a._v(" days\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("151.101")]),a._v(".193.69: Aug "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("12")]),a._v(":00:00 "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2019")]),a._v(" GMT    "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("603")]),a._v(" days\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("h3",{attrs:{id:"验证-curl"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#验证-curl"}},[a._v("#")]),a._v(" 验证 curl")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--insecure")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" https://www.google.com "),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("2")]),a._v(">")]),s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("&1")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'BEGIN { cert=0 } /^\\* Server certificate:/ { cert=1 } /^\\*/ { if (cert) print }'")]),a._v("\n\n* Server certificate:\n*  subject: "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("C")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("US"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ST")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("California"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("L")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("Mountain View"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("O")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("Google LLC"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("CN")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("www.google.com\n*  start date: Mar  "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" 09:46:35 "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2019")]),a._v(" GMT\n*  expire date: May "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("24")]),a._v(" 09:25:00 "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2019")]),a._v(" GMT\n*  issuer: "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("C")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("US"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("O")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("Google Trust Services"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("CN")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("Google Internet Authority G3\n*  SSL certificate verify ok.\n* Using HTTP2, server supports multi-use\n* Connection state changed "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("HTTP/2 confirmed"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n* Copying HTTP/2 data "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" stream buffer to connection buffer after upgrade: "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("len")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n* Using Stream ID: "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("easy handle 0x7ff5dc803600"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n* Connection state changed "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("MAX_CONCURRENT_STREAMS updated"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("\n* Connection "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#0 to host www.google.com left intact")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br")])]),a._v(" "),s("p",[a._v("您需要为 "),s("RouterLink",{attrs:{to:"/command/curl.html"}},[a._v("curl")]),a._v(" 提供整个证书链，因为 "),s("RouterLink",{attrs:{to:"/command/curl.html"}},[a._v("curl")]),a._v(" 不再附带任何 CA 证书。 由于 cacert 选项只能使用一个文件，因此您需要将完整的链信息连接到 1 个文件中。 从 "),s("a",{attrs:{href:"https://curl.haxx.se/ca/cacert.pem",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://curl.haxx.se/ca/cacert.pem"),s("OutboundLink")],1),a._v(" 获取根 CA 证书包。")],1),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--cacert")]),a._v(" certRepo "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-u")]),a._v(" user:passwd "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-X")]),a._v(" GET "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-H")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'Content-Type: application/json'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"https//somesecureserver.com/rest/field"')]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("h3",{attrs:{id:"验证-openssl-s-client"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#验证-openssl-s-client"}},[a._v("#")]),a._v(" 验证 openssl s_client")]),a._v(" "),s("h4",{attrs:{id:"使用-sni"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-sni"}},[a._v("#")]),a._v(" 使用 SNI")]),a._v(" "),s("p",[a._v("如果远程服务器使用 SNI（即在一个 IP 地址上共享多个 SSL 主机），您将需要发送正确的主机名以获得正确的证书（"),s("code",[a._v("-servername")]),a._v(" 选项用于启用 SNI 支持）。")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl s_client "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-showcerts")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-servername")]),a._v(" www.example.com "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-connect")]),a._v(" www.example.com:443 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/dev/null\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("h4",{attrs:{id:"没有-sni"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#没有-sni"}},[a._v("#")]),a._v(" 没有 SNI")]),a._v(" "),s("p",[a._v("如果远程服务器没有使用 SNI，那么你可以跳过 "),s("code",[a._v("-servername")]),a._v(" 参数：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("openssl s_client "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-showcerts")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-connect")]),a._v(" www.example.com:443 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/dev/null\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("要查看站点证书的完整详细信息，您也可以使用以下命令链：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    openssl s_client "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-servername")]),a._v(" www.example.com "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-connect")]),a._v(" www.example.com:443 "),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("2")]),a._v(">")]),a._v("/dev/null "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    openssl x509 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-text")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),a._v(" "),s("p",[a._v("对于带有 starttls 的 SMTP，请使用：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl s_client "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-connect")]),a._v(" server:port "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-starttls")]),a._v(" smtp\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("p",[a._v("对于 Client Auth 保护的资源，请使用：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl s_client "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-connect")]),a._v(" host:port "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-key")]),a._v(" our_private_key.pem "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-showcerts")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-cert")]),a._v(" our_server-signed_cert.pem\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),a._v(" "),s("p",[s("code",[a._v("-prexit")]),a._v(" 也会返回数据：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ openssl s_client "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-connect")]),a._v(" host:port "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-prexit")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),a._v(" "),s("h3",{attrs:{id:"使用私钥验证-tls-证书"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用私钥验证-tls-证书"}},[a._v("#")]),a._v(" 使用私钥验证 TLS 证书")]),a._v(" "),s("p",[a._v("希望您永远不会遇到不知道用于生成 TLS 证书的私钥的情况，但如果您知道……这里是您可以检查的方法。")]),a._v(" "),s("p",[a._v("注意：这比将证书上传到生产环境以检查它们更好😉")]),a._v(" "),s("p",[a._v("假设我们已经生成了一个名为 example.com.key 的私钥和一个名为 example.com.crt 的证书，我们可以使用 openssl 检查 MD5 哈希值是否相同：")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("$ openssl x509 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-noout")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-modulus")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" example.com.crt "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" openssl md5\n$ openssl rsa "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-noout")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-modulus")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" example.com.key "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" openssl md5\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("为了让事情变得更好，你可以写一个脚本：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token shebang important"}},[a._v("#!/bin/bash")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("CERT_MD5")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("openssl x509 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-noout")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-modulus")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" example.com.crt "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" openssl md5"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\n "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("KEY_MD5")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("openssl rsa  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-noout")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-modulus")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" example.com.key "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" openssl md5"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$CERT_MD5")]),a._v('"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("==")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$KEY_MD5")]),a._v('"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("then")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Private key matches certificate"')]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("else")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Private key does not match certificate"')]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("fi")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br")])]),s("h2",{attrs:{id:"java-key-store"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#java-key-store"}},[a._v("#")]),a._v(" Java Key store")]),a._v(" "),s("h3",{attrs:{id:"java-密钥库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#java-密钥库"}},[a._v("#")]),a._v(" Java 密钥库")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ keytool "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-importcert")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-file")]),a._v(" certificate.cer "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-keystore")]),a._v(" keystore.jks "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-alias")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Alias"')]),a._v(" \n$ "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("bin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("keytool "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-import")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-trustcacerts")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-keystore")]),a._v(" cacerts "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-storepass")]),a._v(" changeit "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-noprompt")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-alias")]),a._v(" yourAliasName "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-file")]),a._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("to"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("certificate.cer\n$ keytool "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-import")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-alias")]),a._v(" joe "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-file")]),a._v(" mycert.cer "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-keystore")]),a._v(" mycerts "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-storepass")]),a._v(" changeit\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("h2",{attrs:{id:"创建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建"}},[a._v("#")]),a._v(" 创建")]),a._v(" "),s("h3",{attrs:{id:"使用-certstrap-创建开发证书"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-certstrap-创建开发证书"}},[a._v("#")]),a._v(" 使用 "),s("code",[a._v("certstrap")]),a._v(" 创建开发证书")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ brew "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" certstrap\n$ certstrap init --common-name "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"ExampleDevCA"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--expires")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"10 years"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"My Tech Inc."')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"DE"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-l")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Muenchen"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--st")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Bayern"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--stdout")]),a._v("\n$ certstrap request-cert --common-name "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"example.localhost"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"My Tech Inc."')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"DE"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-l")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Muenchen"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--st")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Bayern"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--stdout")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--domain")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"*.example.localhost"')]),a._v(","),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"example.localhost"')]),a._v(","),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"localhost"')]),a._v("\n$ certstrap sign "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"example.localhost"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--CA")]),a._v(" ExampleDevCA\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),a._v(" "),s("h3",{attrs:{id:"使用-mkcert-创建开发证书"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-mkcert-创建开发证书"}},[a._v("#")]),a._v(" 使用 "),s("code",[a._v("mkcert")]),a._v(" 创建开发证书")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ brew "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" mkcert\n$ mkcert "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"*.example.localhost"')]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Clean up with:")]),a._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-vrf")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$HOME")]),a._v('/Library/Application Support/mkcert"')]),a._v("  _wildcard.example*\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),a._v(" "),s("h2",{attrs:{id:"另见"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#另见"}},[a._v("#")]),a._v(" 另见")]),a._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.openssl.org/",target:"_blank",rel:"noopener noreferrer"}},[a._v("OpenSSL 官网"),s("OutboundLink")],1),a._v(" "),s("em",[a._v("(openssl.org)")])]),a._v(" "),s("li",[s("a",{attrs:{href:"https://cheatography.com/albertx/cheat-sheets/openssl/",target:"_blank",rel:"noopener noreferrer"}},[a._v("OpenSSL Cheat Sheet"),s("OutboundLink")],1),a._v(" "),s("em",[a._v("(cheatography.com)")])]),a._v(" "),s("li",[s("a",{attrs:{href:"https://megamorf.gitlab.io/cheat-sheets/openssl/#convert",target:"_blank",rel:"noopener noreferrer"}},[a._v("OpenSSL Cheat Sheet"),s("OutboundLink")],1),a._v(" "),s("em",[a._v("(megamorf.gitlab.io)")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);